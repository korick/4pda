https://github.com/korick/4pda/raw/master/manual_Redmi_6.txt
скачать, читать удобнее на ПК
Notepad++ https://github.com/notepad-plus-plus/notepad-plus-plus | https://notepad-plus-plus.org/downloads
.\plugins\DSpellCheck\ https://github.com/Predelnik/DSpellCheck/releases/
.\plugins\Config\Hunspell\ru_RU.aff, ru_RU.dic https://github.com/LibreOffice/dictionaries/ru_RU/
кодировка UTF-8, синтаксис YAML или MD (markdown) для удобочитаемости
подготовлено участниками форума 4pda.ru

! ВСЁ НИЖЕ ОПИСАННОЕ ОТНОСИТСЯ ТОЛЬКО ДЛЯ ТЕЛА REDMI 6










































Муки выбора телефона https://4pda.ru/forum/index.php?showtopic=86855
Муки выбора ПК, ноутбука https://4pda.ru/forum/index.php?showtopic=252563
Подбор устройства БД https://4pda.ru/devdb/phones/select
Полезные ссылки на имеющиеся темы форума https://4pda.ru/forum/index.php?showtopic=147272&view=findpost&p=4847640&anchor=Spoil-4847640-1
Вопросы новичка https://4pda.ru/forum/index.php?showtopic=147272
Инструкция по GitHub | В помощь нубу! https://4pda.ru/forum/index.php?showtopic=879904
Мини-F.A.Q. https://4pda.ru/forum/index.php?s=&showtopic=949619&view=findpost&p=84581191
Полезная информация https://4pda.ru/forum/index.php?showtopic=732822&view=findpost&p=47994033
FAQ общих инструкций и рекомендаций для устройств Xiaomi https://4pda.ru/forum/index.php?showtopic=949619
Каталог тем раздела Android - Прошивки > Xiaomi https://4pda.ru/forum/index.php?showtopic=612335
Разблокировка загрузчиков XIAOMI | Для всех смартфонов и планшетов XIAOMI (MediaTek Qualcomm) https://4pda.ru/forum/index.php?showtopic=721838
Mi Аккаунт - Обсуждаем все, что связано с аккаунтом https://4pda.ru/forum/index.php?showtopic=792504
Набор ** Must Have ** https://4pda.ru/forum/index.php?showtopic=151739
Помощь в поиске программ для Android OS | ИЩЕМ программы https://4pda.ru/forum/index.php?showtopic=112900
Наиболее популярные приложения https://4pda.ru/forum/index.php?showtopic=112900&view=findpost&p=68110134
ADB | fastboot - их использование | Работа со вспомогательными Android утилитами
https://4pda.ru/forum/index.php?showtopic=383300
Переназначение функций кнопок на Android устройствах https://4pda.ru/forum/index.php?showtopic=411431
Проблемы подключения по USB | Решение вопросов подключения девайсов к ПК https://4pda.ru/forum/index.php?showtopic=269288
Очень подробная инструкция про все аспекты прошивки в картинках и не только (1-3 стр.)
Xiaomi Redmi Note 6 Pro - Прошивки MIUI https://4pda.ru/forum/index.php?showtopic=927964
Удаление системных приложений Android | Облегчаем систему https://4pda.ru/forum/index.php?showtopic=236256
Очень подробная инструкция про Список приложений MIUI которые можно удалить/заморозить
Энергопотребление (автономность) Xiaomi Redmi Note 6 Pro https://4pda.ru/forum/index.php?showtopic=921645&view=findpost&p=77962469
Списки отключенных сервисов/ресиверов/активити/провайдеров для разных приложений
https://4pda.ru/forum/index.php?showtopic=907729
https://4pda.ru/forum/index.php?showtopic=777336&view=findpost&p=55340718
https://reports.exodus-privacy.eu.org/
Советы по улучшению энергосбережения устройств на Android OS https://4pda.ru/forum/index.php?showtopic=144999
Magisk - The Universal Systemless Interface https://4pda.ru/forum/index.php?showtopic=774072
Каталог модулей для Magisk https://4pda.ru/forum/index.php?showtopic=915158
Обсуждение модулей для Magisk. Обсуждение работы модулей для Magisk https://4pda.ru/forum/index.php?showtopic=946260
Xposed | моддинг прошивок без декомпиляции apk файлов и прошивки через CWM https://4pda.ru/forum/index.php?showtopic=425052
edXposed https://4pda.ru/forum/index.php?showtopic=425052&view=findpost&p=81226127
Инструкции по Xposed | Выбор версии, способы установки, решение проблем https://4pda.ru/forum/index.php?showtopic=571274
Инструкции по функционалу модулей Xposed | Самые популярные и актуальные вопросы https://4pda.ru/forum/index.php?showtopic=324724
Каталог модулей для Xposed framework | Каталог готовых модулей https://4pda.ru/forum/index.php?showtopic=603033
FAQ по TWRP | Recovery для Android устройств https://4pda.ru/forum/index.php?showtopic=523117
Стол заказов кастомного рекавери TWRP CWM | Все платформы https://4pda.ru/forum/index.php?showtopic=789936
Сборка ядра Android для процессоров MTK https://4pda.ru/forum/index.php?showtopic=583114
SP Flash Tool https://4pda.ru/forum/index.php?showtopic=469340
Nova Launcher | Оригинальный и настраиваемый лаунчер для современного Android https://4pda.ru/forum/index.php?showtopic=297970
Темы для лаунчеров: GO EX, Apex, Nova, Holo
https://4pda.ru/forum/index.php?showtopic=239158&view=findpost&p=95392951
https://4pda.ru/forum/index.php?showtopic=239158&view=findpost&p=95474703
Темы для CyanogenMod12/13, Каталог тем для CyanogenMod12/13 и их обсуждение https://4pda.ru/forum/index.php?showtopic=636805&view=findpost&p=37054932
Подробное описание CPU Говерноров, планировщиков I/O и алгоритмов TCP <- плацебо
http://4pda.ru/forum/index.php?showtopic=737235&view=findpost&p=54831160
Разработка и портирование GSI-прошивок - 4PDA https://4pda.ru/forum/index.php?showtopic=892755
Обработка (распаковка, сборка) прошивок и образов (.img, .bin) под Windows, утилиты https://4pda.ru/forum/index.php?showtopic=496786
Средство для разборки сборки прошивок и отдельных образов https://4pda.ru/forum/index.php?showtopic=459926
microG Services Core | Альтернатива сервисам Google Play https://4pda.ru/forum/index.php?showtopic=724118
Восстановление данных из внутренней памяти https://4pda.ru/forum/index.php?showtopic=475400
Решение проблем с файлами на карте памяти https://4pda.ru/forum/index.php?showtopic=309190
Извлекаем личные данные с повреждённого/разбитого аппарата https://4pda.ru/forum/index.php?showtopic=591994
Замена оперативной памяти на чип большего объема https://4pda.ru/forum/index.php?showtopic=129567 <- на современных версиях Android невозможно
Способы обхода заблокированного доступа к интернет-ресурсам https://4pda.ru/forum/index.php?showtopic=824716
Инструкции по редактированию системных ресурсов | Каталог инструкций (мануалов) по редактированию системных ресурсов
https://4pda.ru/forum/index.php?showtopic=540887
Скрипты на shell под Android | Обсуждаем резиденты и прочие в быту полезные команды https://4pda.ru/forum/index.php?showtopic=508427
Создание патча update.zip для прошивки через рекавери https://4pda.ru/forum/index.php?showtopic=205817&st=0#Spoil-27695720-32
Вопросы по безопасности, приватности и анонимности в сети и под андроидом | [technoblabla] общие вопросы безопасности, приватности и анонимности
https://4pda.ru/forum/index.php?showtopic=717365&view=findpost&p=68304580
Android: проверка и анализ исполняемых файлов и прочие мысли по этому поводу | Проверка, анализ и другие исследования APK, DEX, ODEX, JAR итп
https://4pda.ru/forum/index.php?showtopic=899691
Безопасность в андроиде. Приватность и анонимность в интернете. Обсуждение реалий и будущего темы. | Векторы развития, недостатки, возможные изменения и другие организационные вопросы основной темы
https://4pda.ru/forum/index.php?showtopic=943940
Тестовый набор для Android-устройств | Набор приложений и методов для тестирования Android устройств
https://4pda.ru/forum/index.php?showtopic=240901
Каталог программ для Android устройств https://4pda.ru/forum/index.php?showtopic=112220
Каталог программ для Android TV Box медиаприставок https://4pda.ru/forum/index.php?showtopic=740069
Librem 5 | смартфон FOSS за 700$ https://4pda.ru/forum/index.php?showtopic=884412
Поиск программ для Android https://4pda.ru/forum/index.php?showtopic=112900
Поиск тем оформления, виджетов, обоев, иконок для Android https://4pda.ru/forum/index.php?showtopic=208182
Поиск игр для Android https://4pda.ru/forum/index.php?showtopic=172737
Игры портированные с других платформ для Android https://4pda.ru/forum/index.php?showtopic=753092
Поиск эмуляторов https://4pda.ru/forum/index.php?showtopic=322070
Android - эмуляторы https://4pda.ru/forum/index.php?showforum=529
Новости игрового мира Android https://4pda.ru/forum/index.php?showtopic=189413
Обзоры игр для Android https://4pda.ru/forum/index.php?showtopic=337923
Клуб Mod APK | Здесь делаем заказы на мод апк, учимся их создавать итд (если тут откажут) https://4pda.ru/forum/index.php?showtopic=461675&st=0#entry21945584
Клуб ЧИТЕРОВ | Тут собираются читеры форума, собираем полезную информацию https://4pda.ru/forum/index.php?showtopic=375352&st=0#entry15462703
NetGuard https://4pda.ru/forum/index.php?showtopic=700336
AFWall+ https://4pda.ru/forum/index.php?showtopic=392249
Migrate https://4pda.ru/forum/index.php?showtopic=927915
Переводчик Google (Google Translate) https://4pda.ru/forum/index.php?showtopic=151200
Footej Camera https://4pda.ru/forum/index.php?showtopic=747784
GameGuardian https://4pda.ru/forum/index.php?showtopic=259340
Скрипты GameGuardian https://4pda.ru/forum/index.php?showtopic=961867
MacroDroid, Автоматизация Android https://4pda.ru/forum/index.php?showtopic=374521&view=findpost&p=55832020
Stop Log | Отключаем logcat https://4pda.ru/forum/index.php?showtopic=602538
FeraDroid Engine | Мощный оптимизатор устройств Андроид из разряда - всё в одном https://4pda.ru/forum/index.php?showtopic=716174
ViPER4Android V4A Описание эффектов https://4pda.ru/forum/index.php?showtopic=405989&st=11020#entry52819652
Activity Launcher https://4pda.ru/forum/index.php?showtopic=808337
Dev Tools Утилита для разработчиков приложений на Android https://4pda.ru/forum/index.php?showtopic=958291






















** сток odex-файлы
.odex .vdex:
.ODEX Optimized Dalvik Executable. Формат Binary.
Создается ОС Android для увеличения скорости загрузки приложения APK.
Файлы ODEX - это оптимизированные версии файлов .DEX, которые содержат исполняемый код для приложения для Android. Хотя файлы DEX в основном работают на всех устройствах Android, файлы ODEX оптимизированы для конкретного устройства, на котором они находятся. Они не только ускоряют скорость загрузки, но также уменьшают объём пространства, требуемого для приложения.
Android создает файлы ODEX для приложений до их запуска, и они содержат один и тот же префикс имени файла в качестве соответствующего файла APK (MyApp.apk, MyApp.odex). Данные в файлах ODEX заменяют данные, используемые в эквивалентном файле DEX (classes.dex), хранящемся в файле APK.
Dalvik - это имя, присвоенное виртуальной машине, которая запускает скомпилированный код для приложений Android. Поэтому ODEX оптимизирован для выполнения виртуальной машиной Dalvik.
** модифицированный сток deodex-файлы
deodex медленней работает? Прошивка тормознутая - субъективное мнение, разные версии работают по-разному.
Деодекс ставить на сток соответствующей версии. Рекомендую часа через два после установки Деодекса прошить в TWRP архив dalvik-cache.zip система устаканится.
Почему именно через 2 часа, а если сразу прошить? После установки деодекса лучше ничего не устанавливать нестокового (к примеру Xposed или другие свои приложения) в течение 2-х часов, прошить ваш файл dalvik-cache, и только после этого начать устанавливать свои "хотелки".

AOSP - Android Open Source Project
GZOSP - Ground Zero Open Source Project
CAOS - Custom AOSP OS - просто чистый Андроид
CM13 - CyanogenMod v13 v14 - кастомная прошивка
CWM - ClockWorkMod Project - кастомное рекавери
TWRP - Team Win Recovery Project - кастомное рекавери. в TWRP встроенный File Manager - не копирует файлы с русскими именами, пробелами?, специальными символами
GSF - Google Service Framework - 
GMS - Google Mobile Services - 
HMS - Huawei Mobile Services - альтернативный GMS
FRP - Factory Reset Protection - представлена в A6 защита устройства от кражи, требуя ввести пароль владельца после аппаратного сброса тела: Google, Xiaomi Mi account
CAF - Code Aurora Forum - поддерживаемый Linux Foundation проект, форсирующий продвижение открытого кода в мобильную технику. Главный участник проекта - компания Qualcomm, поддерживающая репозиторий Android for MSM, который содержит исходный код Android с оптимизациями для чипов Qualcomm. Если разработчики заявляют, что их прошивка основана на CAF, значит, она включает все эти оптимизации. Но стоит иметь в виду, что изменения из Android for MSM зачастую перетекают в AOSP. CAF имеют оптимизированный код под процессоры Qualcomm Snapdragon. Это обещает повышение стабильности работы, высокое быстродействие, улучшенную многозадачность, высокую экономичность.
CTS - Compatibility Test Suite
СЦ - сервисный центр
ДУ - Диспетчер устройств Windows
БД - база данных
TC - Total Commander
FOSS - свободное программное обеспечение с открытым исходным кодом
NFC - это оплата телом
MTK, mali - не для игр. Медиатек - не работают геймпады, конфликты с внешними устройствами.
В Андроиде используется ядро Linux. Все драйвера в нём. Каждый производитель (MTK, Qualcomm, Samsung, HiSilicon Kirin) занимаются разработкой своей оптимизированной версии ядра, которая потом используется производителями смартфонов. Очень вероятно что ядро от Медиатек содержит меньше драйверов для геймпадов. В любом случае, дело в софте, хоть и тесно связанным с железом.
GSI - не для игр
non-GSI - для игр
Snapdragon - для игр
MTK - не для игр
A8.1 - для игр, fps больше по сравнению с A9, A10
QC - быстрая зарядка, стандарт быстрой проводной зарядки
BT - bluetooth, блютуз


Что взять лучше всего: не брать MTK, брать Snapdragon.
Отличия современных смартфонов между собой ничтожны.
Xiaomi Mi Store - у Xiaomi есть свой Маркет.
Xiaomi Redmi 8a, Xiaomi Redmi 7a, Meizu 15 Lite!, Redmi 8, Xiaomi Redmi Note 8, Xiaomi Mi A3! aosp, Xiaomi Mi Note 3, UMiDIGI Power 4/64, Xiaomi Redmi Note 8t 64Gb, Xiaomi Mi 9 Lite 128Gb, Xiaomi Mi 9t 64Gb!, Xiaomi Redmi Note 8 Pro
Redmi Note 5: 1 место по связи
Redmi Note 7: 2 место по связи
Redmi Note 9: плохо
Redmi Note 8: проблема, скорость режется, при подключении через 5.0ГГц - норм.
Redmi Note 8t: урезанный антенный блок. Одну антенну убрали, а на другую повесили Wifi и BT, при подключении BT-часов или ушей, Wifi режется прилично. После обновы на мяу 12 куча жалоб в т.ч. и на NFC.
Redmi 8A: урезанный антенный блок. режется Wifi в 2 раза при включении BT. Но тут ещё хуже, нет поддердки Wifi 5ГГц.
Redmi 6/6A: урезанный антенный блок?











Xiaomi MIUI.
Xiaomi Mi линейку разрабатывают сами и им её собирают на каком-то заводе, прям как Apple (поэтому и цена такая относительно высокая).
Xiaomi Redmi линейку перекупают, только прошивку под железо пишут (поэтому дешевле).
HONOR отдельно от HUAWEI.
HUAWEI EMUI. MagicUI (это и есть EMUI только переименованная)
HUAWEI сами делают полностью, вроде.
Meizu FlymeOS
OnePlus HydrogenOS, OxygenOS
HTC Oppo/Oppo Real + Realme/Vivo/Oneplus/ ColorOS китай
Vivo сами делают полностью, и Oppo доделывают.
ColorOS  для Китая
RealmeUI для не-Китая форк ColorOS сидим ждём обновлений по полгода на флагманах
Nokia NB0, NB1
Samsung OneUI. TouchWiz. кастом Slim ICS. Galaxy Market.
Получить рут на Samsung: Knox security platform вырубает секретную папку Knox и Samsung Pay (всё скопом), смартфон с битым Knox (был установлен рут) стоит ровно в три раза дешевле (типа жженый), и смысл рута?
Samsung S серия флагманская линейка собирает сам Samsung.
Samsung не S серия собирает кто-попало, тоже пепекупают у кого-то.
кирины практически один в один с одноуровневыми медиатеками, да ещё обычно по видеоускорителям хуже всех.
сжав фото с топового смарта до 2MP в редакторе, оно не станет сильно хуже без зума, чего не скажешь про 48-64MP фото с дешёвого китайского смарта.



Сравнение R8A с R6:
(+): экран больше. x64 (есть). 5000mAh. Qualcomm. GCam. type-C. QC. в AnTuTu_Benchmark >10k. смотреть youtube, играть - тупо комфортнее.
(-): 2Гб (Global)/3Гб (China). нет Bootrom. некоторые проблемы со связью. некоторые проблемы при включённом BT - скорость Wi-Fi падает в 10 раз.

Поддержка Redmi 6/6A прекращена 01.12.2020г.
Модель Redmi 6/6A больше не выпускается.
Девайс снят с производства.
Данная линейка аппаратов Xiaomi Redmi 6/6A очень капризна и часто тяжело восстанавливаема из состояния кирпича/бутлупа. Для этого нужен СЦ и деньги. А в кирпич он превращается от любого неосторожного чиха. Даже у тех, кто считает себя опытным в деле перепрошивок аппаратов, случается словить такой кирпич. Подумайте об этом, когда будете принимать решение об откатах, кастомных прошивках и опытах с TWRP.
Аппарат замечательный, если Вы хотите "поставить и забыть", но ни в коем случае не для шаловливых ручек.
Если Вы привыкли менять прошивки, как перчатки, менять ядра, модемы и разные плюшки, то лишний раз подумайте, стОит ли испытывать судьбу - возможно этот аппарат не то, что Вам нужно.
Запчасти к аппарату достаточно дешёвые по сравнению с другими смартфонами. Экраны - если есть опыт разделения экрана и тача (они у нас одним модулем идут), а потом склейки их специальным клеем. На сегодня, по-моему, гораздо проще заменить битый модуль на новый модуль в сборе, они у нас часто прямо с шасси идут, ничего вклеивать не надо, благо на этот аппарат экраны достаточно дешёвые по сравнению с другими смартфонами.
Мобильные устройства (смартфоны, планшеты) в основном не предназначены для замены/увеличения оперативной памяти и прочего (каждый случай разбирается отдельно).
Линейка Redmi скатывается в ультробюджет. И что ожидать от линейки Redmi 9 не известно. С батарейкой походу нас на Redmi 8 покинули, возлагая энергоэффективность на заниженную подсветку, слабое питание радиомодулей и энергоэкономичный процессор. И с быстрой зарядкой QC не совсем ясно (не эффективна, обычная зарядка заряжает так же).
Смартфон - это штамповка. То что купите то и будет без возможности апгрейда железа, поменять процессор/видеочип нельзя, расширить ОЗУ нельзя, расширить встроенную память с помощью SDcard флеш-памяти можно, но с ней постоянные проблемы.
https://gsmforum.ru/forums/xiaomi-аппаратный ремонт.744
Разобрать/заменить дисплей/тачскрин:
https://youtu.be/iVh3-WLJ2Bw

Краткий, но не исчерпывающий список того, что не нужно делать с данными аппаратами, дабы не получить кирпич, верно как для Redmi 6/6A:
Рекомендации по действиям с телефонами Redmi 6/6A:
https://4pda.ru/forum/index.php?showtopic=912972&view=findpost&p=94468022
Что НАДО делать:
- Попродать, поменять, подарить, потерять, потопить, побить - не связываться с MTK, данной моделью телефона
- При покупке телефона, не спешить обновлять до последней MIUI "по воздуху" (через три точки), сразу разблокировать загрузчик
- После разблокировки загрузчика, прошивки TWRP, обязательно сделать бекап NVRAM, бывало он у меня слетал на стоке
- До установки TWRP спросить в теме прошивок своего аппарата какое TWRP установить, написав полную версию (MIUI 10.4.4.0 PCBMIXM)
Что НЕ НАДО ДЕЛАТЬ с телефоном:
- Ставить TWRP A8.1 на вендор/прошивку MIUI 10.4.1.0+ A9
- Ставить TWRP A9 на вендор/прошивку MIUI 10.3.8.0- A8.1
- Ставить кастомный logo.bin, или каким либо образом модифицировать его
- Ставить вендор и модем от MIUI A8.1 на MIUI A9 и наоборот
- Стирать или модифицировать NVRAM в надежде поменять IMEI. Сначала сделайте бекап IMEI перед экспериментами
- Ставить прошивки, вендоры, модемы, буты, TWRP от других телефонов
- Отключать USB шнур когда прошивается прошивка через fastboot (Mi Flash)
- Восстанавливать бекап MIUI A9 на MIUI A8.1 и наоборот, также бекап от 10.4.1.0 A9 нельзя ставить на 10.4.4.0 A9
- Прошивать чужие boot.img, даже если совпадает по версии Android, даже если MIUI по версии на цифру отличаются, я так получил виброкирпич (без fastboot без recovery)
- Восстанавливать бэкапы прошивок, которые даунгрейдят её, либо апгрейдят (к примеру с 10.4.3.0 до 10.4.4.0 и наоборот)
- Прошивать чужие прошивки (даже от Redmi 6A. Исключения Treble, но и то не рекомендуется)
- Прошивать чужие рекавери
- Делать апгрейд с arm-a на a64-ab и наоборот через резервное копирование вендора, кирпич, который даже вибрировать не будет
- Прошивать несовместимые программы (к примеру прошив magisk и gcam, телефон стал виброкирпичём (без fastboot без рекавери) читал в этой теме.

Таблица некоторых комплектующих Redmi 6
https://4pda.ru/forum/index.php?showtopic=895128&view=findpost&p=83783824
Вывод: производитель использует комплектующие "те что есть под рукой", никакой спецификации, унификации, стандартизации. После приобретения тела, проверить производительность памяти, часто битая Skyrocket Charger Test_v0.9.
Можно сделать тест памяти в SPFT (все данные сотрутся), если пойдут ошибки - проблема с памятью.

Т.к. Xiaomi штампует телефоны как горячие пирожки. У телефонов короткий цикл жизни, Xiaomi умудряется выпускать по одной (чаще), две (реже) версии за один календарный год, напр. в 2019г. Redmi 7, Redmi 8. Всё дело в том, что эта модель Redmi 6 больше не выпускается. А всё, что предлагается китайцами на AliExpress и др. интернет площадках - проблемный хлам, собранный из остатков или возвратов или отремонтированных телефонов. Брать в 2020г. Redmi 6 - как то неразумно. Если телефон глючит? Теперь остаётся только своими силами приводить его в чувство. Как советовали выше, накатить MIUI 10 на A8.1 - только на нём тело ведёт себя адекватно. Всё что выше, вводит его в анабиоз и вызывает различные глюки, причём у каждого свои.

Какие вообще бывают стоковые прошивки Xiaomi:
China Version Китайская официальная прошивка - прошивка от производителя, в данной прошивке 3 языковых пакета 2 китайских, 1 английский, преимущество данной прошивки в том что она имеет наиболее свежую пачку исправлений глюков и "фишек", а так же получает ОТА обновления (обновления которые прилетают по воздуху), однако есть и минусы Китайский Маркет, отсутствие сервисов Google (gapps-ы), которые можно при желании поставить отдельно.

Global Version Глобальная официальная прошивка (международная глобалка) - прошивка от производителя, отличается от предыдущей прошивки тем что имеет множество других языковых пакетов (в том числе русский), предустановлены сервисы Google, пожалуй в этом и есть преимущество данной прошивки, так же получает ОТА обновления.

Localization ROM Локализованные прошивки - отличаются тем что основаны на китайских оф. прошивках однако при этом имеют иные языковые пакеты как и оф. глобальная прошивка и имеют встроенные в систему сервисы Google, эти языковые пакеты ромоделы вручную добавляют в оф. китайские прошивки, однако зачастую для того что бы получить более свежую прошивку приходится снова использовать свои ручки для установки оных на свой телефон.

Global ROM - тело для китайского рынка, но с глобальной прошивкой (китайцы наловчились менять id материнки тела и глобал ром чудесным образом превращается в глобальный, последствия рандомные проблемы со связью, отсутствие Band 7 и 20 частоты). Не брать от Goldway глобал ром, во всех аппаратах которые пришли, они свои шаловливые ручки внутрь пихали. Брать или чистый Китай или чистую Глобальную версию. Если брать китайскую версию - чистый китаец с китайской прошивкой (китайский/английский язык локализации) не перешитую, самому официально разблокировать загрузчик и перешивать на глобальную (без блокировки загрузчика) - тогда проблем со связью не будет.

Сервисная прошивка (+ софт для прошивки) - это те, что используют в СЦ для полного восстановления работоспособности аппарата после сбоев. Например в Samsung состоят из 4 файлов. (Не для Redmi 6).

Прошивки делятся ещё на: Стабильные и Девелоперские
Developer Девелоперские - прошивки обновляются каждую неделю, однако так как на этих прошивках опробывают всё и вся, менее стабильны в работе.
Stable Стабильные - прошивки обновляются реже, но включают в себя все полезные обновления Девелоперских прошивок (некоторые заявляют, китайская Девелоперка стабильнее Стабилки, как это ни странно).

При смене Global Stable (MI) на Developer (CN) и обратно. данные не сохраняются. сброс на заводские.
При смене Global (MI) на Индию (IN), Индонезию (ID) и обратно. данные не сохраняются. сброс на заводские.
При обновлении/повышении версии Global на Global, RU на RU, IN на IN. данные сохраняются.
При обновлении/повышении версии в пределах одного локализатора. данные/настройки сохраняются. Достаточно сделать только Wipe Dalvik и Cache.
При смене локализатора/кастома на другой. Это касается и авторских прошивок. данные/настройки не сохраняются. Full Wipe.
Всегда делайте чистую установку. Авторы прошивок даже об этом упоминают. Проблем будет меньше.

Все прошивки в одном месте: Китай China ChinaVersion (CN). Глобал Global GlobalVersion (MI). Европа EEA (EU). Россия Russia (RU). Индия India (IN). Индонезия Indonesia (ID). 
Redmi 6  = OCGMIXM, PCGMIXM
Redmi 6A = OCBMIXM, PCBMIXM
Redmi 8A = PCPMIXM, QCPMIXM

Какие вообще бывают кастомные прошивки:
На базе AOSP (AOSP-based): AOSP, GZOSP, CAOS, AEX, AOSIP, Pixel Experience, HavocOS, OmniROM, SyberiaOS, EvolutionX, Paranoid Android, MoKee, Bootleggers, SlimROM, CarbonROM, AOKB, 
На базе AOSP - LineageOS (LOS-based): LOS, crDroid, Resurrection Remix, HashOS, MoKee, Bliss, 
На базе CAF: PixelExperienceCAF, CitrusCAF, DerpCAF, 
На базе Project Treble: GSI образы прошивок
На базе Unofficial Treble: non-GSI образы прошивок

AOSP -> GZOSP -> LOS, CAOS, AEX -> crDroid, RR, PE, PE+ -> HavocOS, KomodoOS, EvolutionX, 

** LOS LineageOS бывший CyanogenMod (CM)
Лёгкий. Быстро. Надёжно. Удобно. Кастомизация. Trust (безопасность). Launcher3. OTA. F2FS. Локализация полная. Энергоэффективнось хуже стока. 
официально поддерживаемых устройств: 376 (2016)
https://lineageos.org
https://wiki.lineageos.org/devices
https://habr.com/ru/post/452610
https://habr.com/ru/post/465945
https://habr.com/ru/post/320612
https://habr.com/ru/post/440280
https://www.reddit.com/r/LineageOS/comments/cl5c90/degoogling_lineageos_instructions_august_2019
https://medium.com/russian/почему-мой-телефон-не-обновится-до-нового-андроеда-e4cd5fa3fa85
https://ubuntulogia.blogspot.com/2008/06/blog-post.html
AOSP с надстройкой в виде различных мелких улучшений и патчей.
Одна из первых кастомных прошивок, появившаяся вскоре после того, как пользователи нашли метод получения root на первом Android-смартфоне HTC Dream. Изначально прошивка базировалась на стоке, т.е. была создана не путем добавления функциональности в AOSP и пересборки исходного кода, а пересборкой образа с прошивкой, что существенно ограничивало возможности разработчиков. Но вскоре создатели (Team Douche) перешли на сборку из исходного кода.
Со временем функций становилось всё больше и больше, но прошивка сохраняла стабильность и скорость работы. Уже к 6-й версии CyanogenMod превосходил стоковый A2.2 практически по всем параметрам (скорость, энергопотребление, стабильность). В прошивку "из коробки" были вшиты полезные дополнения, такие как планировщик задач BFS, кодек FLAC и множество дополнительных опций настройки.
CyanogenMod - эталон, отличающийся гигантским списком официально поддерживаемых устройств и не менее гигантским списком устройств, портированных независимыми энтузиастами. Прошивка очень часто используется в качестве базы, поэтому все прошивки, основанные на CM, превосходят его по возможностям.
Android - "дырявая" ОС. Ещё более дырявая, чем Windows. Ну хоть какая-то безопасность. Чуть ли ни единственная возможность для старых девайсов получить новый Android. С новой версией API Android официальная поддержка старых девайсов прекращается, переходят на новые модели девайсов.

Форк дистрибутива прошивки проекта CM13 CM14 CyanogenMod на основе AOSP с некоторыми добавлениями от CAF для тех устройств, в основе которых лежит "железо" от Qualcomm, которая делается энтузиастами. Данная прошивка есть не на все устройства, так как создание такой прошивки под каждое устройство дело рук энтузиастов ромоделов. LineageOS - это прошивка, без проприетарных сервисов GApps.
- LOS официальные прошивки, поддерживаемые устройства имеют OTA из "коробки".
- LOS неофициальные прошивки, собраны энтузиастами ромоделами. Нет OTA, иногда содержат вирусы. Проверить содержит такая прошивка вирусы или нет, практически невозможно. Если только вы сами не собрали прошивку под устройство, которое не поддерживается официально (что могут только неплохие IT-шники).
При покупке устройства проверьте поддерживает данная модель официальную кастомную или адаптированную неофициальную прошивку LineageOS это важно.

LineageOS 15.1 A8.1 Oreo (arm, arm64)-(A, A/B)
- Новый framework для работы с драйверами Project Treble (AOSP)
- Новые возможности стилизации и поддержка LiveDisplay
- Переписан launcher, добавлены адаптивные иконки
- Добавлен режим QR в камере.
LineageOS 16.0 A9 Pie (arm, arm64, binder)-(A, A/B)
- Eleven music player перестал падать и подвисать (Odyssey)
- Анимации более плавные, немного подкручен дизайн
- Цвета стали другие, словно по умолчанию другой RGB профиль
- Пока ещё ни разу не поймал зависания gsm модуля на yota
- Настройки приложения камеры
LineageOS 17.1 A10 Q (arm, arm64, binder)-(A, A/B)
https://www.reddit.com/r/LineageOS/comments/fsvuq3/official_lineageos_171_being_built_again/
- Новый интерфейс для съёмки скриншотов
- Возможность защиты приложений биометрической аутентификацией
- Возвращение функции Wi-Fi display (убранной в 16.0)
- Поддержка чтения отпечатков через сенсоры, встроенные в экраны
- Поддержка выдвижных камер и камер с механическим поворотом
- Эмодзи клавиатуры AOSP обновлены до стандарта Emoji 12.0
- Lineage Recovery теперь является рекомендуемым средством для установки прошивок LineageOS
- PrivacyGuard заменена на PermissionHub из AOSP
- Styles API замененa на ThemePicker из AOSP
Android 10 Scooped Storage (API29) - раздельный доступ ограничение к папкам на внешнем хранилище. Ограниченный доступ только к своей папке и на выбор к папкам с аудио, видео, фото (нюансы).
LineageOS 18 A11 R
https://ru.androidhow.eu/как/android-11-changelog-полный-список-каждой-новой-функц/
- super раздел /system, /product, /vendor монтирование только на чтение. Логические разделы.
- A11 не дружит с twrp, плохо дружит с рут правами
- поломаны все приложения
- удалять системные приложения: модуль Magisk (скрывает от системы apk в системном разделе) или деинсталяция с помощью adb

** AOSP (phhusson)
github phhusson Treble experiment releases
Чистый AOSP. Минимализм. Разрабатывается phhusson чтоб подходить для как можно большего кол-ва девайсов. Не оконченность. RAW. 

** GZOSP Ground Zero Open Source Project
https://github.com/GZOSP/build
GZOSP, Validus, AICP. Они все на базе GZOSP.

** CAOS Custom AOSP
Чистый AOSP. Лёгкий. Быстро. Надёжно. Удобно. phh Treble патчи. 
Никаких новых функций, особенностей не добавлено.
Проблемы, ограничения, ошибки, которые нельзя исправить и по мнению некоторых разработчиков критичны, реализовались в форке AOSP - CAOS.

** AEX AOSP Extended
https://aospextended.com
https://downloads.aospextended.com/devices
https://github.com/aospextended-devices
https://sourceforge.net/projects/aospextended-rom/files/
Чистый AOSP. Лёгкий. Быстро. Надёжно. Удобно. Расширения. OTA. Встроенные темы. Локализация не полная. 
Полностью похожа на LOS только некоторые пункты меню собраны по-другому, расположены в отдельном меню Расширения Extensions - есть нормальная кастомизация, всё что нужно, полный функционал LOS.
AOSP Extended - это прошивка на основе AOSP, которое предоставляет удобный интерфейс UI/UX с полезными настройками. Основана на AOSP, обеспечивает плавную работу. Мы добавили полезные настройки из других похожих проектов с открытым исходным кодом и постарались сделать ещё проще. Прошивка пользователя для пользователя. #BeExtended
Substratum theme engine.
Разработка прекращена или приостановлена на A9. Выпущена прошивка на A10.

** PE PE+ Pixel Experience Pixel Experience+
https://download.pixelexperience.org/devices
Лёгкий. Красивая. Плавная. Быстрая. Минимализм. Google. Gapps. OTA. Pixel launcher. Локализация полная. 
Основывается на AOSP, включены все Гаппс сервисы и приложения, разрабатывается первоначально для телефонов Google Pixel (launcher, wallpapers, icons, fonts, bootanimation, Цифровое благополучие, Родительский контроль). Боковые меню-панели. Всю полноту опыта использования можно получить только с оригинальным телефоном Google Pixel. Наша цель предложить максимально возможную стабильность и безопасность на ряду с полезными и необходимыми в первую очередь функциями для корректного функционирования устройства. Внимание к деталям. Доступны оригинальные приложения из Google Pixel. Сторонних настроек минимум, приложения все стандартные.
На MTK у прошивки проблемы: сложно установить, прошивка работает не идеально. Изначально PE разрабатывается конкретно под Qualcomm. Хотя на Redmi 6 на практике работает идеально, летает.

Отличие PE+ от PE:
Пакет gapps больше.
Полноценная тёмная тема и немного доп. настроек.
Дополнительные функции: изменение сетки быстрых настроек, настройка меню питания, переключение треков клавишами громкости, настройка жестов (можно убрать полосу снизу), могут быть живые обои.

** AOKP AOSP Kang
https://aokp.co

** Cr crDroid. crDroid = RR (меню расширенных настроек похоже) = Floko?
CrDRom, crDroidMod = crDroid Mod.
https://crdroid.net
Комбайн. Самая кастомизируемая. Кастомизация+. Локализация не полная. 
официально поддерживаемых устройств: 29 (2016)
На базе LOS. Цель создания, как и у всех - добавить самые лучшие функции из других прошивок. На экране приветствия при первоначальной настройке написано, что прошивка включает в себя очень много функций из OmniROM, Paranoid Android, Temasek др. К сожалению, тут та же история, что и с Bliss. Отсутствие эксклюзивных функций и значительное отставание по возможностям от RR, AICP, Temasek. Никаких интересных приложений не встроено.

** HavocOS. HavocOS = KomodoOS = StagOS = EvolutionX = 
https://sourceforge.net/projects/havoc-os/
Комбайн. phh Treble патчи. Расширенные настройки. Кастомизация+. OTA. Локализация не полная. 
официально поддерживаемых устройств: 
Нормальная стабильная официальная GSI прошивка без багов.
HavocOS основан на AOSP, вдохновлён Google Pixel.
Получен Material Design 2 UI от @SKULSHADY. Столько настроек вы не найдете ни в одной прошивке. Все что вам нужно, и всё о чём вы мечтали. Прошейте и наслаждайтесь.
Центр настроек - Кастомизация+. Расширенные настройки кастомизации, где собрано неимоверное количество всевозможных настроек. От такой кастомизации страдает энергоэффективность.

** EvolutionX
Прошивка на базе Pixel Experience со средней кастомизацией.
Настройки устройства - The Evolver - Кастомизация+. Start evolving your device with our features.

** RR Resurrection Remix
https://get.resurrectionremix.com
https://archive.resurrectionremix.com
Комбайн. Самая кастомизируемая. Кастомизация+. Расширенные настройки. Локализация полная. 
официально поддерживаемых устройств: 91 (2016)
Крутая прошивка с множеством настроек, одна из много кастомизируемого интерфейса. Присутствует: Расширенные настройки (Настройки Resurrection), Цифровое благополучие, RR Stats, 
Создатели прошивки решили включить в своё творение лучшие функции из CM, Slim, Omni. А в качестве стартовой площадки использовать RemixOS http://www.jide.com. В итоге появился весьма интересный комбайн.
Тут есть несколько отлично настраиваемых панелей с недавними приложениями (Slim, OmniSwith, стандартные из AOSP), вшиты AdAway, Kernel Adiutor, SuperSU (при желании можно использовать и стандартный контроллер root-доступа из CM).
Эта прошивка по праву разделяет первое место по нашпигованности различными функциями с Temasek, а может, и превосходит его. Не всем любителям максимально настраиваемых прошивок понравится механизм настройки наэкранных клавиш: нельзя поставить дополнительные клавиши с правого и левого краев (там, где обычно отображается значок меню и переключения клавиатур).
Из недостатков: режимов энергосбережения меньше, чем в Temasek, кнопки быстрых настроек настраиваются неочевидным способом - нужно удерживать палец на шестеренке, которая ведет в настройки. Официально CAF-версия не выпускается, есть неофициальная. Отдельный пункт меню "Расширенные настройки".
Меню недавних приложений - вертикально.
Меню расширенных настроек - горизонтально.

** Bliss Bless
Комбайн. Кастомизация. Локализация не полная. 
официально поддерживаемых устройств: 48 (2016)
Разработчики утверждают, что Bliss - одна из самых настраиваемых прошивок. Прошивка представляет собой сборку интересных функций из других прошивок, но до RR, AICP или Temasek ей далеко.
Разве что изначально вшиты и запускаются через настройки Kernel Adiutor и SuperSU.
Blissify - меню расширнных настроек немного оригинальное.
Анимированные субменю. Громкость как на MIUI. 

** Paranoid Android
Кастомизация. Тёмная тема. Жесты. OTA. F2FS не поддерживает. Локализация не полная. 
официально поддерживаемых устройств: 30 (2016)
Одна из самых инновационных прошивок. Когда-то была популярна благодаря возможности динамического переключения между интерфейсом планшет-смартфон.
В разное время в прошивке существовали такие функции, как уведомления в стиле Facebook Heads, ставшее культовым круговое меню навигации Pie и всплывающие уведомления ещё до того, как они появились в A5.0.
В 2015г. значительная часть разработчиков занялась развитием OxygenOS для компании OnePlus и покинула команду.
Направлена на безопасность, анонимизацию.

** OmniROM
https://omnirom.org
Тёмная тема. OmniSwitch (альтернативное переключение между приложениями). OTA. OpenDelta (DeltaOTA меньше на 90%). F2FS не поддерживает. Локализация не полная. 
официально поддерживаемых устройств: 84 (2016)
OmniROM родилась в ответ на "коммерциализацию" CyanogenMod. В число её разработчиков входят Dees Troy (автор TWRP) и очень известный разработчик Chainfire (SuperSU, LiveBoot, Recently, FlashFire, Mobile Odin др.).
Ключевая особенность - какую функциональность добавить, выбирают сами пользователи, голосуя. В настройках есть любопытный пункт "Производительность". Он позволяет настроить частоты процессора, алгоритмы ввода-вывода, агрессивность менеджера задач (именно он выполняет работу таск-киллеров), а также посмотреть ряд интересных параметров.

** Temasek
Комбайн. Кастомизация+. 
официально поддерживаемых устройств: только неофициальные сборки. Основа: CM. 
В один день XDA@temasek решил немного улучшить CM, добавив в него пару нужных приложений и функций с других прошивок. А потом не смог остановиться... Комбайн из частей различных прошивок. Автор никуда не выкладывал порт прошивки, хоть и сам создавал её для своего Samsung Note 3. Количество устройств растёт только за счет неофициальных портов.
Режим энергосбережения ("Экономия энергии" - "Высокая производительность"). ViPER4Android, SuperSU, OmniSwitch. Для полного фарша не хватает Kernel Adiutor, L Speed, AdAway, настроек показа уровня сигнала в Dbm и переключения между 2G/3G из панели быстрых настроек.

** AICP Android Ice Cold Project 
https://dwnld.aicp-rom.com/
Постоянный Ребренд. Локализация не полная. 
официально поддерживаемых устройств: 71 (2016)
Изначально ROM создавался для HTC Desire HD в 2012г. на основе кастома AOKP. Со временем к разработке присоединились другие разработчики, а вместе с ними росло и количество поддерживаемых девайсов. Не менее успешно этот проект обрастал и функциями. После выхода A5.1 разработчики AOKP сообщили, что приостанавливают разработку на неопределённый срок. Ребренд AICP на CM. Ребренд CM на LOS (с некоторыми твиками AOSP). Ребренд A9 на GZOSP. Ребренд A10 на репозиторий AOSP с некоторым дополнением из LOS для репозиториев конкретных устройств.
В настоящее время разработчики заявляют, что эта прошивка включает в себя абсолютно все необходимые расширения, так что никакие дополнительные твики не понадобятся.
Это действительно так, AICP имеет почти все функции, присутствующие в других прошивках. Плюс сюда вшиты SuperSU, AdAway и OmniSwitch, но нет ViPER4Android. Меню настроек не сильно отличается от меню в CM, хоть и включает в себя некоторые новые пункты. Зрелый ROM с ЛУЧШИМ сообществом, которое вы только можете найти.
AICP Extras Расширенные настройки - Кастомизация+.

** MK MoKeeOS
https://github.com/MoKee
Комбайн. Кастомизация. OTA. Локализация полная. 
официально поддерживаемых устройств: 220 (2016)
Разработчики запустили проект 12.12.2012, задавшись целью добавлять только самые лучшие функции из других прошивок. На данный момент это CM, OmniROM и SlimRom.
Прошивка имеет что-то общее с Paranoid Android, функций не очень много по сравнению с конкурентами, но самые полезные присутствуют. Вшит ViPER4Android FX, есть возможность изменить высоту навбара, можно отобразить секунды в часах, скорость входящего и исходящего трафика, DT2W.
Интерфейс CM, только в нём поменялась анимация всплывающих текстовых уведомлений, а навбар красится в цвет строки состояния во многих приложениях.
Скорость работы не уступает чистому CM. Есть "Защитник" - что-то вроде антивируса. Позволяет управлять некоторыми разрешениями приложений. Экспериментальные функции.

** NitrogenOS
https://github.com/nitrogen-project
Комбайн. Кастомизация. Минимализм. Launcher3. Локализация не полная. 
официально поддерживаемых устройств: >10
Список устройств достаточно скромный, зато качество прошивок лучше.
NitrogenOS стандартная прошивка A8.1. Стандартный интерфейс, все особенности "под капотом".

** iON
phh Treble патчи. 
Digitall Wellbeing & parental controls (Screen time, app timers, bedtimer schedules) - скорее всего от предустановленных Gapps.
ionizer - Кастомизация+. Ionize everything.

** DescendantX
phh Treble патчи. 

** ZenXOS
phh Treble патчи. 
Zen Hub - Кастомизация.

** DotOS
Droid On Time OS
DotOS Team. @Ganesh Varma and @Kuber Sharma.
https://github.com/DotOS
https://dotos.github.io/download.html
https://www.getdroidtips.com/dotos/
Although this particular review based on the new DotOS, the previous version is equally powerful as this one. DotOS is a highly advanced and refined custom ROM which make use of your phone’s capability and supports features more than what you would earlier use the phone. This is a detailed review of all the aspects of the new ROM that we found exciting and that is something you will feel soon. Most importantly, it touted as one of the best ROM of 2018 with features that are scalable and futuristic.
DroidOnTime - is a custom Android firmware. It was launched with an aim to provide Unique user interface and Optimum performance that too keeping in mind the balance between performance and battery life. dotOS is based on Google's Android Open Source Project with Hand-picked goodies, innovative ideas and creative things which are added in the rom to enhance user experience.

** Nusantara Project. Nusantara Project = CorvusOS
https://nusantaraproject.my.id
https://github.com/Nusantara-ROM
@Genkzsz, @Mocarafee, @Rafiester, @Nicklas373.
Nusantara Wings - Кастомизация+. Анимированные субменю. Громкость-яркость как на MIUI.









Какие вообще бывают особенные прошивки:

** MIUI
Надстройка. Кастомизация. Mi (Mint) Launcher. Локализация частично полная. 
официально поддерживаемых устройств: 286. Основа: CM, AOSP.
Разрабатывается фирмой Xiaomi.
Много фишек перекочевало из iOS, TouchWiz, UX (LG), HTC Sense, но есть и свои собственные. Полезных функций настолько много, что их описание - тема отдельной статьи. Скрытые настройки. Редезайн Интерфейса.

** FlymeOS
Надстройка. Локализация частично полная. 
официально поддерживаемых устройств: 73 (2016). Основа: CM.
Разрабатывается фирмой Meizu.
Интерфейс по-настоящему оригинален. Абсолютно все стандартные приложения из Android заменены на приложения собственной разработки, а остальные значительно доработаны. В панели уведомлений есть быстрые переключатели, которые появляются над уведомлениями. Раздел "Энергопотребление" переименован в "Управление питанием" и намного более удобен и информативен, кнопка "Режимы сети" позволяет включить режимы "Только 3G", "Только 2G".
Всё быстро, плавно. В прошивку встроен интересный механизм управления разрешениями. Он позволяет ограничить значительно больше параметров, чем A6.

** OxygenOS
Надстройка. Кастомизация. Плавность (красивые анимации). OnePlus Launcher, OnePlus H2 Launcher. Жесты (оригинальные). Локализация частично полная. 
Разрабатывается фирмой OnePlus.
Много фишек перекочевало из iOS. Интерфейс Pixel. Стандартный интерфейс, все особенности "под капотом".

** MaruOS
Оригинальная прошивка, которая при подключении смартфона к монитору делает из него полноценный десктоп.

** Multirom, Dual Boot, dual boot patcher, efi droid
2+ прошивок на одном телефоне одновременно twrp + multirom.zip. Не все прошивки поддерживают мультизагузку.
Никто не занимался его оптимизацией. У нас и так всё криво работает.

** Прошивки на основе Linux
PureOS, Ubuntu Touch, 

! Правильно удаляйте/замораживайте системные/пользовательские приложения:
Удалить данные и кеш - потом заморозить приложение (сбросятся настройки приложения, пользовательские данные)
Удалить данные и кеш - потом удалить приложение (сбросятся настройки приложения, пользовательские данные)
на A9, A10 проблемы нету, это было на ранних версиях Android.

отключить фаервол, отключить антивирус на ПК, зайти под Админом
отключить фаервол, отключить антивирус на теле

Доставать SIM карту и карту памяти microSD аккуратно. При выключенном экране?, при выключенном теле. Сгореть сама SIM (маловероятно), сгореть контроллер SIM в теле (уже вероятность выше). Лично у меня никогда ничего не сгорало, SIM 4G нового поколения.
В некоторых прошивках есть функционал: Хранилище-извлечь карту памяти. Безопасное извлечение.








** USB Отладка (USB Debugging)
режим работы при подключении тела к ПК через USB кабель с помощью ADB. Тело в обычном включённом состоянии. Обязательно надо включать этот режим облегчает работу на ПК с телом.
** ADB (Android Debug Bridge)
Это дебаг-интерфейс при включённом аппарате. Позволяет достучаться до shell, лога и нативных процессов, чтобы прикрепить к ним дебаггер. Больше в ADB функционала нет.
порт USB 2.0 на материнке (желательно), кабель нормальный (фирменный), если самопальный - обращать внимание на: длина, сечение, экранирование
micro USB - мобильный телефон
micro USB 3.0 - 
mini USB - мобильный телефон, плеер, цифровой фотоаппарат, КПК
A-type - ПК
B-type - принтер, сканер
C-type micro USB - мобильный телефон, новое поколение Type-C (перевернуть разъём USB-C кабеля. Некоторые экземпляры работают на передачу данных только в определённом положении. "симметричный, но не совсем")
https://4pda.ru/forum/index.php?showtopic=383300
- Скачать Google platform-tools (adb/fastboot/systrace) и распаковать содержимое в папку, портабельно: c:\adb\ : adb.exe, AdbWinApi.dll, AdbWinUsbApi.dll, fastboot.exe - минимальный комплект для работы adb и fastboot под учёткой Админ
platform-tools.Windows требует установленную актуальную версию .NET Framework? - не проверено
platform-tools_28.0.2+ требует актуальные версии Microsoft Visual C++ для ОС Windows? - не проверено
для работы adb и fastboot в минимальной конфигурации больше ничего не надо
https://4pda.ru/forum/index.php?s=&showtopic=907017&view=findpost&p=87853533
https://developer.android.com/studio/releases/platform-tools
https://4pda.ru/forum/index.php?act=findpost&pid=84549504&anchor=Spoil-84549504-3 или со своей темы прошивки
Platform-tools (adb/fastboot) r.23.1.0 last WXP
Platform-tools (adb/fastboot) r.30.0.1 W7
- Скачать Google adb драйвера и распаковать содержимое в папку, портабельно: c:\adb_driver\ : WdfCoInstaller01009.dll, winusbcoinstaller2.dll, WUDFUpdate_01009.dll - минимальный комплект драйверов для установки вручную для работы adb под учёткой Админ
устанавливаем драйвера при подключённом телефоне
https://4pda.ru/forum/index.php?act=findpost&pid=84549504&anchor=Spoil-84549504-2 или со своей темы прошивки
- В данном ПО MiFlashUnlock есть драйвера ADB для устройств (WXP, W7, W10)
- В данном ПО MiFlash есть драйвера ADB для устройств (WXP, W7, W10)
- Отключить проверку цифровой подписи драйверов под учёткой Админ (W7, W10)
==== На W7:
Консольный способ:
cmd
bcdedit.exe /set loadoptions DDISABLE_INTEGRITY_CHECKS # Отключить проверку цифровой подписи, W7+
bcdedit.exe /set TESTSIGNING ON
reboot # Перезагружаем ПК
Установить adb драйвера при подключённом теле
bcdedit.exe /set loadoptions ENABLE_INTEGRITY_CHECKS # Включить проверку цифровой подписи, W7+
bcdedit.exe /set TESTSIGNING OFF
reboot # Перезагружаем ПК

Загрузиться в безопасном режиме
bcdedit.exe /set nointegritychecks on # Отключить проверку подписи навсегда
bcdedit.exe /set nointegritychecks off # Включить проверку подписи
Первый способ:
gpedit.msc
Конфигурация пользователя - Административные шаблоны - Система - Установка драйвера - Цифровая подпись драйверов устройств - Отключено - Перезагрузка - установить драйвера - Перезагрузка
Другой способ:
Во время загрузки системы, нажимаем F8 и попадаем в меню выбора параметров загрузки. Здесь выбираем "Отключение обязательной проверки подписи драйверов" и жмём Enter. Это действие загрузит W7 в специальном режиме без проверки подписи драйверов, вы можете установить любые драйвера. После перезапуска защита снова включится, установленные драйвера будут работать, новые неподписанные драйвера устанавливаться не будут.
==== На W8/8.1/10:
Win+I и зажимая клавишу Shift, выбираем Выключение - Перезагрузка - страница параметров выключения - Диагностика - Дополнительные параметры - Параметры загрузки (Настройка параметров загрузки Windows) - Перезагрузить - страница параметров загрузки - Отключить обязательную проверку подписи драйверов F7 - установить драйвера - Перезагрузка
https://4pda.ru/forum/index.php?showtopic=927964&view=findpost&p=78537129 # или со своей темы прошивки
https://androidp1.ru/otklyuchenie-proverki-tsifrovoy-podpisi-drayverov-windows-10-8-1-8-7/ # или со своей темы прошивки
==== На W7/W8/8.1/10:
- Переменные среды. Панель управления - Система - Дополнительные параметры системы - Переменные среды.
Добавить утилиты в переменные среды. Можно добавить только для текущего пользователя или для всех пользователей на ПК: выбрать переменную Path в верхнем или нижнем списке. Добавляем для всех пользователей Path=...;c:\adb\;...
- Включить Отладка по USB:
Настройки-Поиск-Поиск по словам "Режим разработчика"-Отладка по USB-ВКЛ
Настройки-Система-Для разработчиков-...
Настройки-Расширенные настройки-Для разработчиков-...
если найти не можете, значит никогда этим разделом меню не пользовались, скрыто по умолчанию, нужно разблокировать: (по-разному)
Настройки-О телефоне-тапаем 10 раз по строчке "Версия MIUI". В нижней части экрана, должна появиться надпись "Вы стали разработчиком"-повторить поиск
- В папке с файлами adb зажимаем Shift и по нажатию правой кнопки мыши выбираем Открыть командную строку или Windows PowerShell (зависит от ОС).
- В PowerShell в начале команд, дописывать "./" (без кавычек). Чтобы получилось "./fastboot ...". И так со всеми командами далее. PowerShell требует немного другой синтаксис для запуска локальных исполняемых файлов.

Плагин для Total Commander (TC) totalcmd\Plugins\WFX\ADB\ADBPlugin.wfx
С помощью данного плагина можно ковырять system прямо на ПК (тело в рекавери или в обычном режиме): массовая пакетная установка apk, бекап итп.
Большие файлы (>1MB) заранее скинуть на тело, на карту памяти, напрямую в data скопировать не получается (баг плагина, зависит от версии).

** ADB SHELL
режим терминала, командная оболочка (как напр. командная оболочка bash Linux) для выполнения любых команд Android shell.

** RECOVERY
рекавери режим восстановления (сокращённое название кастомное рекавери TWRP). Обособленный раздел, вынесенный отдельно, не влияет на начальную загрузку тела, поэтому его можно подгружать как специальную среду для отладки, для восстановления, для прошивки. Режим прошивки, не имеет отношения к fastboot, к USB Отладке. Напоминает BIOS, DOS, LiveCD на ПК.
На некоторых моделях тел нет раздела /recovery, поэтому его подгружают в /boot. После - возвращают /boot назад.
Настройки /sdcard/TWRP/.twrps_wzsx150 /recovery/root/etc/recovery.fstab
В этом режиме: сброс устройства к заводским настройкам, прошивка, обновление прошивки, создание резервной копии разделов (бекап), получение root прав, вайп разделов, удаление данных.
Прошивается через fastboot: скрипт twrp-installer.bat.
Прошивается через recovery: recovery через recovery (в некоторых случаях так прошивать нельзя, в инструкциях оговорено).
выключить тело - зажать кн. Питание и Громкость+ держим до вибро - отпустить кн. Питание - держать до появления splashscreenlogo, держать пока не загрузится рекавери - отпустить кн. Громкость+ - подключить USB кабель
перезагрузить тело - на перезагрузке зажать кн. Громкость+ держать пока не загрузится рекавери - отпустить кнопку - подключить USB кабель.
Удобно заходить через расширенные опции перезагрузки: OTA "3 точки"-Настройки-перезагрузка в recovery.
На кастомах расширенная перезагрузка: простая перезагрузка, в recovery, в fastboot, перезагрузка UI (перезагрузка системный интерфейс, когда меняешь какую-то настройку в настройках, она некоторое время применяется, потом просто прекращает работать или зависает, помогает UI перезагрузка), мягкая перезагрузка (?), 


** FASTBOOT ** фастбут режим низкоуровневой прошивки. Специальный режим прошивки, не имеет отношения к twrp, к USB Отладке. Софтовый программатор (для накопителей eMMC) и образ (для накопителей UFS). Влияет на загрузку тела. Альтернатива режиму восстановления.
В этом режиме: прошивка, очистка разделов и разблокировка загрузчика устройства, прошивается всё boot.img, recovery.img, прошивка.
выключить тело - зажать кн. Питание и Громкость- держим до вибро - отпустить кн. Питание - держим до появления "зайца с андроидом" - отпустить кн. Громкость- - подключить USB кабель.
перезагрузить тело - на перезагрузке зажать кн. Громкость- держим до появления "зайца с андроидом" - отпустить кнопку - подключить USB кабель.

Шанс получить кирпич при перепрошивке через fastboot меньше чем через TWRP, при условии стабильно работающего ПК, бесперебойного электроснабжения в розетке, надёжного контакта в USB разъёме ПК+тело.
Прерванная прошивка через ПК - 100% кирпич.
Прошивать через twrp безопаснее. Без разницы прошиваете через twrp или через fastboot.
Прошивки для fastboot отличаются от прошивок для recovery: больше по размеру, прошивает больше разделов, вероятность восстановления тела больше.

** EDL
аварийный порт восстановления. Тело выключено (или отключён шлейф батареи). Специальный режим прошивки, когда уже ничего не поможет. Применяется для раскирпичивания, для обычной нормальной прошивки - использовать recovery/fastboot.

** FOTA OTA Firmware Over The Air
прошивка "через 3 точки", "по воздуху". Режим обновления или полной прошивки тела в обычном, включённом состоянии с сохранением пользовательских данных.
Прошивается прошивка для recovery .zip скачанная с оф. сайта при включённом теле с сохранением пользовательских данных.
Обновление частичное: delta новые файлы, обновления, исправления, дополнения
Обновление полное: full полностью обновить прошивку (советуют обновлять прошивку всегда только полностью)
/system/build.prop
ro.product.locale.language=ru
ro.product.locale.region=RU , для Украины =UA
persist.sys.timezone=Europe/Moscow , для Украины =Europe/Ukraine
ro.miui.region=RU , для Украины =UA
ro.product.locale=en=GB
ro.product.locale=ru=RU для России
ro.product.locale=uа=UA для Украины
Понижение версии прошивки, равно как и переход с Ru на Global, China и обратно через "три точки" OTA невозможны! прошиваемая дб новее.

Файловые системы Андроид:
На теле с ОС Андроид (Linux) могут стоять разные ФС одновременно на разных разделах 
ext2, ext3, ext4fs (стоит на Redmi 6), emmc (дамп, образ), F2FS (специально для flash памяти, отличие незначительное), vfat (внешняя карта памяти), 
microSD:
сделать SD карту внутренней:
Если отформатировать в системе Adoptable Storage. При первом использовании запрос хотите ли использовать ли её как внутреннее хранилище, или как переносное. Надо будет выбрать "внутреннее". При этом износ SD карты повысится и нежелательно будет там хранить важные данные по причине повышенного риска отказа карты в работе. Можно зашифровать карту (ещё больший риск потери данных). Постоянные проблемы с данным форматированием памяти.
SD карта внешняя:
Используется как обычное файл-хранилище.
При форматировании внешней microSD на ПК делайте всегда полный формат, не быстрый. до 32Gb - FAT32, >32Gb - ext2, ext3, ext4.
Файл до 4Gb - FAT32, файл >4Gb - exFAT. Файлы >4Gb лучше не создавать.

** Redmi 6 Перевод файловой системы в F2FS ** работает на стоке и на кастомах. В принципе делать не надо.
Для вендоров MIUI 10.4.4.0+
- Скачать TWRP с поддержкой F2FS
Redmi 6A https://4pda.ru/forum/index.php?s=&showtopic=912972&view=findpost&p=93246875
Redmi 6  https://4pda.ru/forum/index.php?s=&showtopic=907017&view=findpost&p=93280492
- Установить. Загрузить TWRP
- Установить архив (нужно прошивать снова при прошивке вендора) f2fs-vendor.zip
- Wipe-Advanced Wipe-Data-Change File System-F2FS (Стирает данные)
- Wipe-Advanced Wipe-Cache-Change File System-F2FS
- Установить Cherry Kernel (Обязательно) https://cherrykernel.github.io
При установке какой либо прошивки ядро слетает и его нужно установить обратно




.zip для twrp - архив .zip - прошивать .zip из twrp - содержит: разное папки-файлы: META-INF, system_root, vendor, etc.
.img для twrp для fastboot - образ .img - прошивать .img из twrp из fastboot - содержит: дамп раздела, полностью копию всего раздела, с информацией и пустым пространством заполненным нулями (zero), как пример образ RAW диска.
Иногда не полностью - вырезают пустое пространство заполненное нулями - очистить/отформатировать раздел, прошить .img из twrp из fastboot.
.win для twrp - бекап twrp, м.б. два варианта в зависимости от файловой системы раздела:
- .ext4.win - архив .win = архив .tar - прошивать .win - содержит: папки-файлы
- .emmc.win - дамп .win = образ .img - прошивать .win - содержит: дамп раздела
.tgz для fastboot - архив .tar со сжатием gz, разархивировать 1 раз .tgz .txz = .tar-gz, разархивировать 2 раз .tar (TC, WinZip, Unzip) до папки с файлами - прошивать папку с файлами. Содержит: папку images с файлами образами .img и установочные скрипты flash_all.bat
Проверить архив можно HaoZip, 7zip, UniExtract, RAR, 

Кастомные прошивки ставятся ТОЛЬКО:
разблокированный загрузчик
- в twrp через архив .zip, образ .img
- в fastboot через образ .img

Стоковые прошивки ставятся:
заблокированный загрузчик
- OTA через .zip (лучше полная версия)
- XiaoMiTool V2 https://4pda.ru/forum/index.php?showtopic=949619&view=findpost&p=86902456
разблокированный загрузчик
- twrp через архив .zip (лучше полная версия)
- fastboot через MiFlash и распакованную 2 раза прошивку с образами .img
- fastboot через fastboot.exe и распакованную 2 раза прошивку с образами .img и скрипт flash_all.bat

варианты скриптов:
** clean all **: flash_all.bat - прошить с удалением всех данных, без блокировки загрузчика (выбираем во всех случаях). Если у вас китайская версия устройства и прошиваете глобальную прошивку.
** save user data **: flash_all_except_data.bat, flash_all_except_storage.bat - прошить без очистки пользовательских данных /data, с сохранением всех данных на устройстве, без блокировки загрузчика. Только обновление прошивки.
** clean all and lock **: flash_all_lock.bat, flash_all_lock_crc.bat - прошить с удалением всех данных на устройстве, с блокировкой загрузчика и шифрованием памяти (только если приспичило заблокировать загрузчик). Прошивка только своего региона. Китайцы только на китайской прошивке.

Если при прошивке в MiFlash появляется проблема на выполнении flash system, нужно выполнить этот пункт и всё что идет за ним из скрипта flash_all.bat вручную:
- ждём немного времени (5 мин) чтоб убедиться, что дальше прогресс не пойдёт
- закрываем MiFlash
- зажимаем кн. Питания пока не погаснет экран
- как только экран погас сразу отпускаем кн. Питания и нажимаем кн. Громкость-, телефон загрузится в fastboot (если этого не сделать, то после закрытия MiFlash ваш fastboot не увидит устройство)
- открываем читаем flash_all.bat
- в папке images в командной строке в ручном режиме начиная с flash system продолжаем производить все по-следующие команды




** ADB Android Debug Bridge
Если есть проблемы с установкой настройкой ADB:
- что то делаете не так
- баг прошивки
- не удалять самому драйвера %SystemRoot%\SYSTEM32, %SystemRoot%\SYSTEM32\drivers\
- прописать adb, fastboot как системные переменные
- удалить старые серые записи драйверов для устройств (только если ничего не помогает в крайнем случае) и повторно установить драйвера
Переменные среды пользователя Admin
DEVMGR_SHOW_NONPRESENT_DEVICES = 1
Диспетчер устройств-Вид-Показать скрытые устройства

Когда тело в TWRP, в диспетчере устройств W7+ тело определяется как Google Nexus ADB Interface. Если удалить устройство и после этого подсоединить телефон к ПК, автоматом встают драйвера Google Nexus ADB Interface.
Если самому обновить драйвера вручную - предлагаются несколько вариантов и при выборе "Составное чего-то там" (без цифровой подписи) ПК установил правильный Android Composite ADB Interface, в результате чего тело видно на ПК в TWRP.
До этого, пока напрямую выбирал установку Android Composite ADB Interface с подписью (ибо под прошивкой именно так определяется), ПК его устанавливал, но по-прежнему не видел тело на ПК.

c:\adb\
c:\adb_driver\

режимы подключения тела к ПК ДУ:

%SingleAdbInterface%        = "Android ADB Interface"                    - это простой режим ADB Single   adb sideload? charge_only?
%SingleMdbInterface%        = "Android MDB Interface Xiaomi"
%CompositeAdbInterface%     = "Android Composite ADB Interface"          - это USB Отладка устройство ADB
%CompositeMdbInterface%     = "Android Composite MDB Interface Xiaomi"   - это USB Отладка
%CompositeLdbInterface%     = "Android Composite LDB Interface Lenovo"   - это USB Отладка
%CompositePCLinkInterface%  = "Android Composite PC Link Interface Asus" - это USB Отладка
%SingleBootLoaderInterface% = "Android Bootloader Interface"             - это фастбут
разработчики заморочились по-называли по-разному, как называется не важно главное чтоб стояли драйвера, их все можно назвать %CompositeAdbInterface%


R6
выключен      USB\VID_2717&PID_20FF
(Устройства HID: USB Device)
USB Отладка   USB\VID_2717&PID_FF48&MI_00 это Google 11.0.0.0 28.08.2014 может просто удалить &MI_00 чтоб было одинаково
              USB\VID_2717&PID_FF48&MI_01 это Xiaomi 16.0.0.0 03.11.2016
(ADB Interface | Android Composite ADB Interface)
MTP           USB\VID_2717&PID_FF40&MI_??
USB-модем     USB\VID_2717&PID_FF80&MI_00
(Сетевые платы: Windows Mobile-based Internet Sharing Device)
recoveryMTP+  USB\VID_2717&PID_FF48&MI_00
recoveryMTP-  USB\VID_18D1&PID_4EE7
fastboot      USB\VID_18D1&PID_D00D


после ковыряний в разделe /proinfo у тела R6 сбросились все драйвера, на все устройства

android_winusb.inf | ADB DRIVERS
[Google.NTx86]
; Xiaomi Redmi 6A
%CompositeAdbInterface%     = USB_Install, USB\VID_2717&PID_FF48&MI_01
%CompositeAdbInterface%     = USB_Install, USB\VID_2717&PID_FF18&MI_01
%CompositeAdbInterface%     = USB_Install, USB\VID_2717&PID_FF88&MI_02
; Xiaomi Redmi 6
%CompositeAdbInterface%     = USB_Install, USB\VID_2717&PID_202A&MI_00
%CompositeAdbInterface%     = USB_Install, USB\VID_2717&PID_2026&MI_01
%CompositeAdbInterface%     = USB_Install, USB\VID_2717&PID_2026&MI_00
%CompositeAdbInterface%     = USB_Install, USB\VID_2717&PID_2028&MI_02
%SingleBootLoaderInterface% = USB_Install, USB\VID_18D1&PID_D00D

wpdmtp.inf | MTP
[Generic.NTx86]
; Xiaomi Redmi 6A
%GenericMTP.DeviceDesc%=MTP, USB\VID_2717&PID_FF48&MI_00
%GenericMTP.DeviceDesc%=MTP, USB\VID_2717&PID_FF40
; Xiaomi Redmi 6
%GenericMTP.DeviceDesc%=MTP, USB\VID_2717&PID_202A&MI_00
%GenericMTP.DeviceDesc%=MTP, USB\VID_2717&PID_2026&MI_00

tetherxp.inf | Android USB Ethernet/RNDIS | USB-модем
осталось работать 

usbser.sys 5.1.2600.6442 (xpsp_sp3_qfe.130829-0416) mdmcpq.inf | Windows Modem Setup File | старый модем какой-то

usb2ser.sys cdc-acm.inf 3.0.1504.0 | USB Modem/Serial Device Driver
[DeviceList]
; Xiaomi Redmi 6
%VCOM%=DriverInstall, USB\VID_2717&PID_202A&MI_01
%VCOM%=DriverInstall, USB\VID_2717&PID_202A&MI_03
%ETS%=DriverInstall, USB\VID_2717&PID_2026&MI_02
%ELT%=DriverInstall, USB\VID_2717&PID_2026&MI_04

MEDIATEK            = "MediaTek Inc."
GADGET              = "Android Gadget VCOM Driver"
SERVICE             = "USB RS-232 Emulation Driver"
VCOM_BOOTROM        = "MediaTek USB Port"
VCOM_PRELOADER      = "MediaTek PreLoader USB VCOM (Android)"
VCOM_DA        	    = "MediaTek DA USB VCOM (Android)"
VCOM                = "MediaTek USB VCOM (Android)"
MODEM               = "MediaTek Modem Port"
ELT                 = "MediaTek ELT Port"
ETS                 = "MediaTek ETS Port"
AT                  = "MediaTek AT Port"
INST_DISK_NAME      = "CD Disk"



MIDI function
не работает

MediaTek USB CDC drivers MTK_USB_All_v1.0.8.zip Latest
Драйвер эмуляции виртуального последовательного порта USB.
Протокол эмуляции последовательного канала связи поверх USB. Драйвер представляет Win32-совместимый COM-порт, и дополнительно некоторые уникальные возможности, такие как поддержка Plug&Play-совместимого процесса энумерации. Это позволяет избежать путаницы с нумерацией COM-портов и повышает удобство использования. 

Драйвер работает с устройствами, которые совместимы со стандартом CDC (Communication Device Class), подкласс ACM (Abstract Control Model).
CDC/ACM - совместимый протокол. В устройстве USB должна быть реализована поддержка подкласса ACM, определенного в стандарте USB CDC.
CDC - это всего лишь .inf файл с описанием порта и подключением стандартного виндового usbser драйвера. Этот драйвер в стандартных виндах пользуется только модемами, поэтому и нет некоего универсального драйвера под CDC.
USB CDC - composite Universal Serial Bus device class.

Device Manager-Action-Add Legacy Hardware-Install the Hardware that I manually Select from a list (advanced)-show all devices-Disk-Locate Android_Gadget_CDC_driver.inf Android CDC Driver-Install this driver software anyway






ОС Android - модифицированный Linux. Собственная реализация Google виртуальной машины Java, apk=JAR=application/java-archive-data, разрабатывается соответственно Google. Андроид изначально создавался как платформа для цифровых камер.
Блоки - это и есть разделы: Системные разделы, cистемные папки, которые после уже монтируются и отображаются в системе в привычном виде /system, /data итд. Представляют собой разделы как на Windows: /C, /D, /E, /F, только файловая система не NTFS, а своя: ext2, ext3, ext4. Есть Скрытые разделы. Есть точки монтирования. Есть символические ссылки (симлинки ярлыки-ссылки) на разделы. Есть специальные метки разделов.





Wallpaper Saver (dk.alroe.apps.WallpaperSaverFree) сохранить обои вшитые в прошивку, применить новые-потом применить старые
/data/data/com.android.providers.contacts/databases/contacts2.db Контакты contacts2.db
/data/data/com.android.providers.contacts/databases/ Журнал вызовов calllog.db, calllog.db-shm, calllog.db-wal
/data/data/com.android.messaging/databases/ SMS СМС bugle_db, bugle_db-shm, bugle_db-wal
/data/data/com.android.providers.telephony/databases/mmssms.db SMS СМС
/data/com.android.providers.calendar/databases/calendar.db Календарь-заметки
/data/com.sec.android.provider.logsprovider/databases/logs.db Журнал событий Android
/data/system/users/0/accounts.db Данные владельца устройства показывают информацию которую указывал в настройках владелец, как пример аккаунт Google, имя, фамилия, если были указаны. Информация на разных устройствах будет разная
/data/data/com.android.browser/databases/browser2.db История браузера посещённых сайтов или сс
/data/data/com.android.chrome/app_chrome/Default/History
/data/data/com.android.chrome/app_chrome/Default/Archived History Chrome История браузера
/data/data/com.android.chrome/app_chrome/Default/Login Data Chrome Пароли
/data/data/org.mozilla.firefox/files/mozilla Firefox
/data/data/com.facebook.katana/databases/threads_db2
/data/data/com.facebook.orca/databases/threads_db2 Facebook Сообщения
/data/data/com.whatsapp/databases/wa.db WhatsApp Контакты
/data/data/com.whatsapp/databases/msgstore.db WhatsApp Звонки
/data/data/com.whatsapp/databases/msgstore.db WhatsApp Сообщения
/data/misc/wifi/wpa_supplicant.conf Данные о подключении WiFi, конфигурационный файл
/data/data/com.skype.raider/files//main.db Skype Сообщения Звонки
/data/data/com.viber.voip/databases/viber_data Viber Звонки
/data/data/com.viber.voip/databases/viber_messages Viber Сообщения
/data/data/org.telegram.messenger/files/cache4.db Telegram

/data/ 21.4Gb
/data/adb/
/data/adb/magisk/
/data/adb/modules/.core/
/data/adb/modules/hosts/system/etc/
/data/adb/modules/
/data/adb/post-fs-data.d/ папка для скриптов
/data/adb/service.d/ папка для скриптов
/data/anr/
/data/app/ пользовательские приложения .apk
/data/app/com.termux-PKzUbRKJO0qI8rfC2-xxx=/
/data/app/com.topjohnwu.magisk-xxx=/
/data/app/org.fdroid.fdroid-xxx=/
/data/backup/
/data/dalvik-cache/
/data/dalvik-cache/arm/system@priv-app@Contacts@Contacts.apk@classes.art
/data/dalvik-cache/arm/system@priv-app@Contacts@Contacts.apk@classes.dex
/data/dalvik-cache/arm/system@priv-app@Contacts@Contacts.apk@classes.vdex
/data/dalvik-cache/arm/system@priv-app@ContactsProvider@ContactsProvider.apk@classes.dex
/data/dalvik-cache/arm/system@priv-app@ContactsProvider@ContactsProvider.apk@classes.vdex
/data/dalvik-cache/arm/system@priv-app@Dialer@Dialer.apk@classes.art
/data/dalvik-cache/arm/system@priv-app@Dialer@Dialer.apk@classes.dex
/data/dalvik-cache/arm/system@priv-app@Dialer@Dialer.apk@classes.vdex
/data/data/ настройки, данные, аккаунты, сейвы от игр, всех приложений
/data/data/com.android.contacts/
/data/data/com.android.dialer/
/data/data/com.android.providers.downloads/
/data/data/com.android.providers.downloads.ui/
/data/data/[apk]/files/.Fabric аналитика
/data/drm/
data/lineageos_updates/ обновление LineageOS скачивается сюда
/data/local/
/data/media/
/data/misc/
/data/misc/adb/adb_keys ключ инициализации отладки по usb
/data/misc_ce/
/data/property/
/data/resource-cache/
/data/system/
/data/system/dropbox/ аналитика, установить разрешение 0000 - chmod 0000 /data/system/dropbox/ если нет проблемных приложений, которым нужно сбрасывать лог с ошибками. Перед воспроизведением ошибки предварительно эту папку очистить (чтобы не искать долго лог краша)
/data/system/theme/font_previews/com.custom.fonts/Calibri/Calibri Regular.ttf кастомные шрифты интерфейса UI
/data/system/users/0/ разные настройки системы
/data/system/users/0/package-restrictions.xml Запись отключённых SRAP и всего идёт сюда. Забекапить перед отключением: packages.list, packages.xml, package-restrictions.xml
/data/system/packages.list 
/data/system/packages.xml 
/data/system_ce/
/data/system_de/
/data/tombstones/
/data/user/
/data/user_de/
/data/vendor/

/system_root/ 3.9Gb
/system_root/odm/
/system_root/sbin/
/system_root/sys/
/system_root/sys/class/power_supply/battery/input_suspend системный файл контроля зарядки батареи
/system_root/sys/fs/pstore Логи крашей программ
/system_root/sys/module/lowmemorykiller/parameters/minfree модуль Автоматическое освобождение памяти, конфиг, значения порогов в 4-кбайтных блоках
/system_root/system/ системные папки и файлы с данными
/system_root/system/app/ системные приложения .apk
/system_root/system/app-bak/ системные приложения .apk удаление-бекап
/system_root/system/bin/ исполняемые файлы, ссылки на исполняемые файлы, запускающиеся при загрузке, прочие файлы
/system_root/system/etc/ конфигурационные файлы, используемые при загрузке ОС, в процессе работы приложений
/system_root/system/etc/init.d/ папка для скриптов
/system_root/system/etc/hosts hosts файл
/system_root/system/etc/prop.default настройки системы дополнительные по умолчанию
/system_root/system/priv-app/ системные приложения .apk
/system_root/system/priv-app-bak/ системные приложения .apk удаление-бекап
/system_root/system/product/app/ системные приложения .apk
/system_root/system/product/app-bak/ системные приложения .apk удаление-бекап
/system_root/system/product/priv-app/ системные приложения .apk
/system_root/system/product/priv-app-bak/ системные приложения .apk удаление-бекап
/system_root/system/fonts/ системные шрифты
/system_root/system/framework/ файлы, отвечающие за интерфейс устройства, шторка, экран блокировки, иконки
/system_root/system/lib/ библиотеки приложений
/system_root/system/lib64/ библиотеки приложений
/system_root/system/media/
/system_root/system/media/audio/alarms/ системные звуки
/system_root/system/media/audio/notifications/ системные звуки
/system_root/system/media/audio/ringtones/ системные звуки
/system_root/system/media/audio/ui/ системные звуки
/system_root/system/media/bootanimation.zip бутанимация
/system_root/system/xbin/ бинарные файлы (например, файл su отвечает за выдачу прав суперпользователя при запросе)
/system_root/system/build.prop настройки системы
/system_root/system/recovery-from-boot.p отвечает за восстановление recovery
/system_root/init
/system_root/init.rc
/system_root/init.environ.rc
/system_root/init.usb.rc
/system_root/init.usb.configfs.rc
/system_root/init.zygote32.rc
/system_root/init.zygote64_32.rc
/system_root/ueventd.rc

/dev/ 918Mb
/dev/block/ все блоки лежат тут
/dev/block/by-name/ блоки стандартные названия
/mnt/ папки для временно монтируемых файловых систем
/proc/ все детали Android системы, включая ядро, процессы, и параметры конфигурации
/sbin/ исполняемые файлы, для управления ОС
/sys/ реальная конфигурация ОС на текущий момент
/sys/devices/system/cpu/cpu0 папки для первого, второго, ... ядра
/vendor/ 991Mb
/vendor/app/
/vendor/build.prop настройки вендора
/vendor/default.prop настройки вендора дополнительные по умолчанию








> Внутренняя память: (встроенная)
> на Redmi 6 некоторые разделы совмещёны с другими разделами.
> boot - boot.emmc.win - загрузочное ядро ОС (kernel, zImage, zlimage), отвечает за загрузку и работу системы> модифицированное ядро, патченое ядро, кастомное ядро. Прошивается boot.img в раздел boot.
> bootloader - bootloader.emmc.win, bootloader2.emmc.win - загрузчик.
> vbmeta - специальный раздел для A10 Q, содержит цифровые подписи разделов (boot, recovery, system, vendor, dtbo, ?) для запрета загрузчику запуска чего-либо стороннего (например кастомного ядра, кастомного рекавери, кастомной прошивки) и всевозможных проверок целостности. Раздел для Android Verified Boot 1.1.0 (2.0), который проверяет целостность процесса загрузки.
> cache - раздел для хранения временных данных приложений (кеш, остатки от программ, мусор итд, сюда обычно скачиваются обновления), wipe cache необходимо делать при обновлении прошивки или гаппсов (если там есть что-то).
> dalvik ART cache - оптимизированные dex файлы для каждого приложения. Файлы создадутся заново после их удаления после загрузки системы, wipe dalvik cache необходимо делать при обновлении прошивки или гаппсов.
> cust - cust.ext4.win - содержится информация о регионах, партнёрские приложения типа яндекса, word, mi форум пр.
> cust image - emmc - образ cust байт-в-байт.
> data (exclude storage исключив раздел пользователя, пользовательских данных) - data.ext4.win - бекап data (A9), содержится информация о установленных приложениях.
> system - system_root.ext4.win - бекап system (A9), бекап прошивки, раздел содержит непосредственно все файлы ОС Android кроме ядра и ramdisk, установленная прошивка.
> system image - emmc - образ system.img байт-в-байт, не рекомендуется бекапить, а тем более восстанавливать, бутлуп зачастую.
> persist - persist.ext4.win - отвечает за различные датчики устройства, за камеру, имеет отношение к Mi аккаунту.
> recovery - recovery.emmc.win - рекавери, режим загрузчика устройства для восстановления.
> vendor - vendor.ext4.win - драйвера железа в теле.
> vendor image - emmc - образ vendor байт-в-байт.
> EFS - IMEI, MAC-адреса, SN устройства (в основном бекапится один раз и навсегда), на устройствах Samsung.
> modem - модем (связь).
> splash - загрузочное лого.
> firmware - общее название для каких-то OEM разделов. Содержит загрузчик и его компоненты, сплэш, модем др. Т.н. фирмварь.
> misc - содержит общие настройки: способ включения и выключения устройства. Настройки могут включать идентификационный номер принадлежности устройства к определённому региону или оператору, настройки USB и другие аппаратные настройки.
> userdata Рабочий каталог пользователя: Internal Storage
/storage/self/primary настоящее расположение Рабочего каталога
/data/media/0 настоящее расположение Рабочего каталога
/storage/emulated/0 эмулированное расположение Рабочего каталога, "виртуальная" папка
/sdcard вообще непонятно что это за расположение Рабочего каталога, общий симлинк
В ОС Android без разницы, это вот так и работает.
userdata - раздел пользовательского хранилища для установки пользовательских приложений и хранения пользовательских данных, настройки системы (обычно не включает в себя внутреннюю память), это то что видите в проводнике файлов по умолчанию.
Эмулированный раздел пользовательских данных, выполняет функцию карты памяти, на разных устройствах имеет разный адрес (точку монтирования) sdcard, sdcard0, sdcard1, sd-ext др.
>
> Внешняя память:
> /external_sd - внешняя карта памяти
> Внешний раздел пользовательских данных, выполняет функцию внешней карты памяти, на разных устройствах имеет разный адрес (точку монтирования).
> Можно использовать как:
> - внутренняя расширяемая память тела (скорость чтения-записи)
> - внешняя память тела, как обычная карта памяти, файлохранилище.
>
> Разделы не относящиеся к ОС Android:
> загрузчик, таблица файловой системы др. Прочие разделы.

Подпись ядра. Подпись прошивки:
test, test-keys, eng - тестовая прошивка
userdebug - прошивка для пользователей с возможностью дебага
user - прошивка для пользователей
release - релизная версия прошивки, не бета




** PROJECT TREBLE + VNDK vendor native developer kit
поддерживается с А8+ (но не всеми девайсами). Чтобы прошить GSI тело д. поддерживать и Treble и VNDK.
проверить поддержку Treble + VNDK: Treble Check (только Treble), Treble Info (Treble + VNDK)
https://4pda.ru/forum/index.php?showtopic=892755
https://4pda.ru/forum/index.php?showtopic=892755&view=findpost&p=66127195
ARMv6, v7, v8, v9 семейство специальных 32-64-битных мобильных процессоров фирмы Acorn ARM Limited: Advanced RISC Machine усовершенствованная RISC-машина, иногда Acorn RISC Machine, производится по лицензии другими фирмами.

Treble = GSI - обособленная кастомная прошивка, которая предназначена ДЛЯ ВСЕХ девайсов с поддержкой Project Treble (А8+).
Non-Treble = Unofficial-Treble = Non-GSI = Unofficial-GSI - адаптированная кастомная прошивка, собрано ПОД КОНКРЕТНЫЙ девайс - это всё одно и то же, и м.б. по-разному: system + vendor два отдельных раздела или один общий раздел. Главное отличие - собрано ПОД КОНКРЕТНЫЙ девайс.

Project Treble - это новая структура ОС Android, при которой низкоуровневые драйверы сохраняются в специальном разделе /vendor. А остальная часть ОС в системном образе GSI. Так как все устройства разные, /vendor у каждого свой разный, а вот GSI на всех один. Это значительно упрощает разработку глобальных проектов сразу на несколько устройств, так как оптимизацией прошивки занимается сама компания устройства, а разработчику необходимо лишь собрать стабильный билд GSI образ. Всё прекрасно в теории, на практике производители всё так же зашивают драйвера в систему, из-за чего после прошивки GSI, появляются баги от мелких, до серьёзных (не работает сеть, камера).

Прошивки в зависимости от структуры разделов устройства: A-only, A/B, SAR. На XDA для каждой прошивки есть свои версии образа. Какая на устройстве структура разделов, полный список доступных GSI можно найти на 4PDA или на XDA.
** "ТРУ" A-ONLY
Всё обычно, как на Android 4.4 Kit-Kat. Система - это привычный большинству /system. build.prop = /system/build.prop. Все привычные директории, файлы и закономерности. Основа и первоначальный вид системы. A/B прошивки не подходят.
** "ТРУ" A/B
Google рекомендует использовать функцию бесшовных обновлений системы A+B (с этим есть некоторые проблемы).
Структура РАЗДЕЛОВ предназначается для обновления "на лету" и "без потерь". Подразумевает наличие ДВУХ системных разделов /system_a и /system_b. Работаете в /system_a, обновляется /system_b обновление скачивается и полностью устанавливается в фоне на неактивный слот. После перезагрузки штатной или в период неактивности тела, по времени это просто включение устройства:
- если обнова не установится - тело переключится на предыдущий слот (не обновлённый раздел) запустится и восстановит поврежденные данные.
- если обнова установится - неактивный слот обновится в фоне, если прошивка поддерживает трансляцию обновлений.
Фишкой этой структуры разделов стала структура каталогов, при которой обычное для пользователя содержимое директории /system (build.prop, media, priv-app) стало на уровень глубже - /system/system. Система = /system/system. build.prop = /system/system/build.prop. Все привычные директории, файлы и закономерности применяются уже к /system/system. Тут хочу выделить три основных момента:
1. Именно отсюда пошла дурная мода структуру директорий обзывать структурой разделов.
2. Прошивки до сих пор подписывают (и будут!) A/B не потому что они для телефонов с /system_a и /system_b, а потому что структура директорий подобна, как у телефонов A/B.
3. A/B прошивки подходят.
Внимание! Ещё одна вещь, о которой следует помнить, заключается в т.ч. ROM (кастом) всегда устанавливается в другой слот. Это означает, что если вы сейчас находитесь в слоте B, ROM будет установлен (нужно устанавливать) в слот A, и наоборот. С этим состоит некоторая сложность.
RR OTA, LOS OTA автоматически загружает ROM-ZIP и устанавливает его в неактивный слот, что избавляет от необходимости перезагружаться в twrp. Однако есть несколько моментов:
- После установки OTA НЕ НАЖИМАЙТЕ Reboot. Вместо этого перейдите в Magisk Manager и установите модуль под названием TWRP A/B Retention Script (раздел Downloads).
- главное меню Менеджера-Установить-Установить в неактивный слот (после OTA).
- После завершения процесса установки вы можете перезагрузиться. Вы должны повторять этот процесс каждый раз, когда получаете OTA, если хотите сохранить Magisk и TWRP в своей недавно обновлённой системе.
- в TWRP есть опция TWRP-Reboot-Slot A/Slot B
** "НЕ ТРУ" A-ONLY или A/B - SAR (system as root)
Структура разделов A-only, структура директорий как A/B.
Redmi 6/6A/7A/8A = SAR a64-ab
Redmi 7/8 = arm64_ab
1. Система находится в субдиректории (как у A/B), но это не обязательно /system/system, может быть и /system_root/system.
2. Может встречаться как на телефонах с "тру" A/B, так и на остальных.
3. A/B прошивки подходят.
4. Структура разделов (блоков) A-only. Структура директорий A/B.
5. build.prop = /system/system/build.prop или /system_root/system/build.prop.
   Система = /system или чё-то-там/system.
На момент написания статьи вариантом определения, какую прошивку устанавливать, предложу:
A-only - если корень системного раздела не содержит файл init.rc и    содержит файл build.prop.
A/B    - если корень системного раздела    содержит файл init.rc и не содержит файл build.prop.
Внимание! Смотреть через TWRP или в разобранном образе системного раздела, поверх которого будет прошиваться GSI.
Ещё упрощаю задачу:
Прошиваем патч system_root-checker.zip и смотрим, какие прошивки Ваши. Не поняли - сделали скрин и показали знающим!

отличия A6, A7, A8, A9: 2.5 новые функции, которые подавляющему большинству пользователей собственно и не нужно. Маркетинг.

A2.3 SDK API ?? Gingerbread
A4.1 SDK API 16 
A4.2 SDK API 17 
A4.4 SDK API 19 KitKat
> из другого источника:
> Magisk не поддерживает A4.4. ASystem Mode only.
> Xposed не поддерживает среду исполнения ART в A4.4.x KitKat и при установке автоматически меняет её на Dalvik. Xposed для A5+ также не работает на KitKat: смена среды исполнения актуальна ТОЛЬКО для A4.4. Xposed для A5+ не работает на A4.4 с его ART.

A5.0 SDK API 21 Lollipop
A5.1 SDK API 22 Lollipop
A6.0 SDK API 23 Marshmallow
A7.0 SDK API 24 Nougat
A7.1 SDK API 25 Nougat
A8.0 SDK API 26 Oreo

A8.1 SDK API 27 Oreo
> Redmi 6: arm-a 10.3.3, 10.3.6, 10.3.8 (имеет свои баги?) + deodex, 
> 9.6.19.0.OCGMIFD fastboot - кирпич
> Самая стабильная прошивка из MIUI это последние на A8.1.
> Для требовальных игр лучше всего сток A8.1-A9, fps выше, fps не падает даже при нагревании телефона, батарею не жрёт сильно, но вылетает
> MIUI 9, =<MIUI 10.2.X проблемы с энергосбережением, саморазряд ночью. Исправлено в =>MIUI 10.3+
> последняя MIUI 10 лучше всего, но потребляет больше ресурсов (сравнительно). Лучше оставаться на MIUI 10.
> Любой GSI ROM A8 с поддержкой только ARM_A встанет на наше устройство.
> На A8.1 только MIUI стабильная. А на вендоре от A9 все Non-GSI A9 стабильные.
> GSI A8.1 очень не стабильно работают. Нормальных кастомов нет. Плохо работают.
> Redmi 6A: arm-a 10.3.6, 10.3.8 (имеет свои баги?) + deodex, 
https://4pda.ru/forum/index.php?showtopic=912972&view=findpost&p=92282005

A9.0 SDK API 28 Pie
> Redmi 6: a64-ab 10.4.4 (bugs), 11.0.4, 
> последняя MIUI 10 лучше всего, но потребляет больше ресурсов (сравнительно).
> последняя MIUI 11 лучше всего, но потребляет больше ресурсов (сравнительно). Лучше оставаться на MIUI 10.
> non-GSI A9, GSI A9 все очень стабильно работают, летают. Вендор (смена вендора) ничего не решает.
> Все последние non-GSI очень стабильные и имеют только один баг - VoLTE.
> Redmi 6A: a64-ab 10.4.4 (bugs), 11.0.8, 
> Redmi 8A: a64-ab
> 10.3.3 (норм EU, норм MI) для кастомов, 11.0.1-india всё стабильно из всех 11-х, 11.0.11 для кастомов?, 
> 2Gb + GCam6.1+ = 10.3.3 EU x64
> 4Gb = 11.0.11
> Камера омни не работает с вендором 11.0.11
> GSI лучше ставить на вендоры A9
> страдает от нехватки памяти
> Redmi 7A:
> fastboot MIUI 10.2.5.0 (для GSI использовать только 10.2.5. У неё вендор лучше всего дружит с кастомами)
> Redmi 8:
> рабочих GSI A9 всего 2-3 шт.
> с помощью Kernel Adiutor и Lolz Kernel можно немного увеличить время работы от батареи.

A10  SDK API 29 Q
> Redmi 6: a64-ab 10.4.4 (bugs), 11.0.4, 
> GSI норм, но присутсвуют одни и те же баги на всех прошивках
> последние вендоры в целом плохо работают
> Redmi 6A: a64-ab 10.4.4 (bugs), 11.0.8, 
> последние вендоры в целом плохо работают

A11  SDK API 30 R
> GSI A11 бутлуп, бета, тест







Device Name  Codename         Architecture + Image Type      AnTT
Redmi6       cereus    HM6    A8.1 arm-a. A9+ a64-ab         снят с произвва 76k
Redmi6a      cactus    HM6a   A8.1 arm-a. A9+ a64-ab         снят с произвва <76k
Redmi7       onc              arm64-ab                       снят с произвва лучше чем Redmi5,6,8, 270ppi
Redmi7a      pine             a64-ab                         снят с произвва 86k
Redmi8       olive     HM8    arm64-ab                       снят с произвва HavocOS
Redmi8a      olivelite HM8a   a64-ab                         снят с произвва 88k лучше всего, HavocOS, есть Портрет съёмка, зарядка Quick Charge QC 18Вт, эта зарядка не нужна и так быстро заряжает, видны пиксели - всё норм,
Support from OEM = all yes

(arm, arm64, binder)-(A, A/B) : arm-a, arm-ab, arm64-a, arm64-ab, a64-a, a64-ab
treble_arm_a     ARM 32-bit, A-only                         32A    arm-a
treble_arm_b     ARM 32-bit, AB                             32B    arm-ab
treble_a64_a     ARM 32-bit with 64-bit binder, A-only      A64A   a64-a
treble_a64_b     ARM 32-bit with 64-bit binder, AB          A64B   a64-ab
treble_arm64_a   ARM 64-bit, A-only                         64A    arm64-a
treble_arm64_b   ARM 64-bit, AB                             64B    arm64-ab





** BACKUP RESTORE Бекап Восстановление
бекап MIUI - бутлуп на надписи "Mi", проблема из-за шифрования data
Перед созданием бекапа удалить пароли экрана блокировки, иначе после восстановления, система не примет его
Если уже запрашивает пароль и не принимает, можете воспользоваться патчем по удалению - Delete_Pass_After_Backup.zip
бекап в TWRP работает на кастомах (может даже на всех) и не работает на родном MIUI (проблема с MIUI 11 из-за зашифровки даты)
Бекап можно сделать через twrp, прошаренная утилита по бекапу, считает/проверяет хеш
Бекап можно сделать через adb push/pull
Бекап можно сделать тупо скопировать блоки в рут-менеджере /dev/block/
НИКОГДА НЕ ВОССТАНАВЛИВАЙТЕ РАЗДЕЛ ПРОШИВКИ (FIRMWARE) в TWRP иначе вы потеряете IMEI
Не копируйте обычным способом и тем более не пытайтесь восстановить разделы System и Userdata. Используйте для этого TWRP-бекап.
Бекап первоочередное, перед различными манипуляциями с телом.
Восстановление из Бекапа в 2 этапа: сначала разделы, потом кеши (если делаете бекап кеша). После восстановления разделов перезагрузить тело.

> бекап EFS разделов (обязательно): однократно, один раз, не привязано к прошивке
> MTK      Redmi 6/6A  бекап EFS IMEI: nvram + nvdata + nvcfg + persist
> Qualcomm Redmi 8A    бекап EFS IMEI: modem, modemst1, modemst2 + persist + fsc + fsg
> (см. Приложение в конце)

Некоторые разделы объединены и называются по-другому.
nvram - бекап imei на MTK. /nvram/md/NVRAM/NVD_IMEI/MP0B_001
EFS   - бекап imei на Qualcomm.
modem - это bluetooth, dsp, modem.
modemst1, modemst2 - это настройки SIM1/SIM2 (условно).
fsc, fsg - важные разделы.
fsg - это как раз, бекап EFS.
persist - содержит параметры различного оборудования, датчики приближения пр. Иногда случается, что при затирании этого раздела не могут установить прошивки. Раздел записывается на заводе, при установке прошивки не затрагивается. Т.е. если слетел persist, то ни одна прошивка не поможет (в правильном понимании). Надо восстанавливать отдельно.
Это OEM-разделы и записаны один раз на заводе. При обычной прошивке эти разделы не затрагиваются.

> бекап OEM разделов (не обязательно):
> Redmi 6: boot. bootloader2. bootloader. cust. devinfo. logo. nvcfg. nvdata. nvram. persist. proinfo. protect_f. protect_s. recovery. tee1. tee2. vendor.

> бекап прошивки (не обязательно): boot. system. vendor. data (exclude storage).

> на некоторых устройствах пока не обновишь firmware до определённой версии, не прошъёшся (не для Redmi 6)
> firmware Redmi 6:
> lk.img. logo.bin. md1img.img. odmdtbo.img. preloader.img. preloader_emmc.img. preloader_ufs.img. scatter.txt. scp.img. spmfw.img. sspm.img. tee.img. type.txt. vbmeta.img.

> Redmi 6 удаление-бекап пользовательских, системных приложений:
> /system/app/ -> /system/app-bak/
> /system/priv-app/ -> /system/priv-app-bak/
> в twrp перенести все приложения, которые удаляем в /-bak/. Из системы они пропадают. Тем самым на всякий случай резервируем их у себя, и всё удалённое в кучке. Если всё нормально через месяц использования аппарата, папку /app-bak/ можно очистить. Случится бутлуп - переношу то приложение, которое его вызвало обратно. Очистить далвик-кеш весь или только кеш удалённых приложений.

** Сменить IMEI
https://4pda.ru/forum/index.php?act=findpost&pid=35587929&anchor=Spoil-35587929-1
Забекапить свои EFS imei.
Нет подтверждённого случая смены imei, только восстановление imei из своего бекапа.
Использовать файлы из одного бекапа, не смешивать с разных бекапов.
При слёте, затирании, удалении, модифицировании - сеть не будет работать. Восстановить получиться только через сделанный бекап заранее.
Если получиться сменить imei кривой прошивкой, imei будут изменённые, а сети не будет.

Начиная с Redmi Note 5 на Куалкомах Qualcomm не прописать оба чужие imei, можно сделать только первый imei ноль, второй нужный. Но симки будут работать обе.

Для процессоров МТК, у нас шифрованные файлы где прописаны imei в nvram ещё никто не расшифровал. А поскольку нормального рута с полным доступом к system нет, заменить imei при загрузке или во время работы системы не выйдет.

Если нет оригинальной security зоны, которая зашифрована, оба imei не востановить, только второй, и телефон становится односимочным, исключение если оператор не проверяет imei, как в некоторых регионах, будет такая сим работать и в первом слоте.

Без imei будет работать только yota.

Как вариант
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=104155753
- мануал https://4pda.ru/forum/index.php?showtopic=798932&view=findpost&p=80647115
- прошить сервисную прошивку https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=103617692
- по этому методу https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=103559971
- восстановить только второй imei https://youtu.be/B7gnEwXbWQA (9:10)
(Способ проверен - рабочий)

инструкции по MauiMETA
https://4pda.ru/forum/index.php?showtopic=678449&view=findpost&p=41671213&anchor=Spoil-41671213-3













Usage on Windows
Skip steps 1-5 after first usage:
- Install python(select "Add Python X.X to PATH")
- Install libusb-win32
- Lunch filter wizard, click next
- Connect powered off phone with volume+ button, you should see new serial device in the list. Select it and click install
- Install pyusb, pyserial, json5 with command:
python -m pip install pyusb pyserial json5
Successfully installed json5-0.9.5 pyserial-3.5 pyusb-1.1.1
- Run this command and connect your powered off phone with volume+ button, you should get "Protection disabled" at the end
python main.py
- After that, without disconnecting phone, run SP Flash Tool







** Комплект программ на ПК для прошивки MTK R6/6A:
https://4pda.ru/forum/index.php?showtopic=912972&view=findpost&p=78832921
xiaomi-mt6765 платформа устройства Redmi 6/6A
SDK Platform Tools | 23.1 (WXP) | 29.0.1 (W7+) | 
Драйверы ADB: ADB Driver Lite v1.17 (WXP)
Драйвер MTK: Windows+10_MTK+VCOM+USB+Preloader+Drivers.zip (совместимость с W7)
Добавит следующие драйверы в ОС
- MediaTek DA USB VCOM Port
- MediaTek PreLoader USB VCOM Port – для прошивки устройства MTK
- MTK USB DEBUG Port
- MTK USB Modem Port
- MTK USB port – для переноса Preloader на устройство (и восстановления в случае плохой или поврежденной микропрограммы)
Теперь, когда вы подключите выключенное MTK устройство к ПК по USB, устройство будет опознано MediaTek Preloader USB VCOM Port или MTK USB port, если устройство - кирпич или имеет плохую/поврежденную микропрограмму. SP Flash Tool будет иметь возможность загрузить прошивку на ваше устройство через эти интерфейсы.
Подключайте устройство только после нажатия на кнопку Download в SPFT, поскольку коммуникационный интерфейс будет активен в течение всего 2 секунд, если данные не будут посланы.
https://4pda.ru/forum/index.php?s=&showtopic=469340&view=findpost&p=46439587
MiFlash: (WXP?, WVista?, W7+) | 2018.05.28 | 2018.05.18 | 2017.04.25 | 2016.08.30 | 2015.10.28
MiFlash последних версий работает не корректно (R9A)
MiFlash представляет fastboot GUI для скрипта flash_all.bat.
В свойствах MiFlash выставляем совместимость с W7, Админ.
Перед прошивкой. Проверить что шьём Clean all или Save user data, а не Flash & lock.
https://www.xiaomiflash.com/download
2017.4.25 https://4pda.ru/forum/index.php?act=findpost&pid=79330855&anchor=Spoil-79330855-7
MiFlash Pro: (WXP?, WVista?, W7+) | 
Добавлено много не нужных дополнительных наворотов. Скачивание официальной прошивки.
https://4pda.ru/forum/index.php?showtopic=889822
Альтернативный метод прошивки через fastboot и adb без ПК
https://4pda.ru/forum/index.php?showtopic=838678&view=findpost&p=72982671
SP Flash Tool: (WXP?, WVista?, W7+) | 5.1444.00.000 (WXP+) | 5.1604.00 (проверенная многократно использованная версия W7x64) | 5.1844.00.000 (WXP+) | 
https://4pda.ru/forum/index.php?showtopic=469340
Mi Unlock: ru-3.3.525.23 (WXP) | en-3.5.1108.44 (WXP)
http://en.miui.com/unlock




** EDL 9008 mode Test Point TestPoint Тест Поинт Тестпоинт
EDL режим emergency download mode аварийный порт восстановления.
EDL на Redmi 6 (МТК) его нет и не было никогда, здесь Bootrom (аналог EDL), альтернатива это зажатая кн. Громкость+.
SmartPhone Flash Tool (SPFT):
Восстановить тело можно через EDL режим, нужен СЦ с сервисным аккаунтом, платно.
https://4pda.ru/forum/index.php?showtopic=469340
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=92190034
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=88313262
http://www.uo5oq.com/index.php?do=usercp&go=nck&select=request&productid=336
SPFT железно выручает при окирпичивании аппаратов, но не смотря на это - ни прошить, ни забекапить тело программой не получиться. Это возможно только с использованием сервисного аккаунта Xiaomi. При подключении аппарата к ПК и ожидающему SPFT, ничего не происходит - SPFT его не видит. Но если подключать с зажатой кн. Громкость+, SPFT тут же обнаруживает тело и требует ввести данные сервисного аккаунта.

Минимальная версия прошивальщика для аппаратов на платформе MT67xx
SP_Flash_Tool_exe_Windows_v5.1444.00.000.rar прошивальщики ниже этой версии не рекомендуются.
SP_Flash_Tool_5.1844.00.000 поддерживает WXP.

SPFT:
- прошивка в специальном режиме EDL в выключенном состоянии.
- на Redmi 6 бесполезен без авторизованного сервисного аккаунта.
- SPFT не смотрит на статус загрузчика, можно шить с залоченым бутом, прошивая прошивку своего региона.
- не прошивайте в режиме "Format All + Download"! Этим вы сотрёте свой nvram который содержит кроме IMEI, MAC, BT-адреса, ещё с три десятка заводских калибровок.
- не шейте файл preloader без крайней необходимости и НЕ включайте форматирование.
- шить preloader и dsp_bl нужно только в случае подъёма кирпича! Во всех остальных штатных обновлениях и перепрошивках НИ В КОЕМ СЛУЧАЕ не ставьте во SP Flash Tool эти галочки и НЕ включайте форматирование (если preloader будет отличаться хоть на байт (не оригинальный), поломается загрузка, вот тогда его и нужно шить).
- если COM-Port появляется на 1 сек в ДУ - preloader целый
- если COM-Port появляется на 5 сек в ДУ - preloader битый

Напрямую через SPFT Redmi 6 не прошивается:
SPFT специальная версия + DA-agent + Auth-file (для подъёма кирпичей и других сервисных действий) + сервисный аккаунт.

Если неправильно сделать какие-то манипуляции с телом не по инструкции, можно попасть в различные ситуации:
- bootloop бесконечная перезагрузка на бутанимации с возможностью зайти в рекавери или бесконечная перезагрузка в рекавери в фастбут.
- soft brick лёгкое окирпичивание.
bootloop и soft brick не являются чем-то страшным и можно исправить прошивкой в MiFlash полной версией прошивки для фастбут.
- hard brick жёсткое окирпичивание, кирпич.

** софт-брик (софт-кирпич)
The system has been destroyed
https://4pda.ru/forum/index.php?showtopic=912972&view=findpost&p=77849575
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=77874528
При загрузке появляется сообщение на MIUI, стоковое recovery
Восстановить софт-брик, попробовать:
- скачиваем последнюю! версию прошивки для recovery.
- заходим в режим стокового recovery.
- выбираем кн. Громкости пункт Connect with MiAssistant.
- подключаем тело к ПК.
- MiFlashPro, выбираем recovery, выбираем своё устройство, выбираем скачанную прошивку, нажимаем Flash.

** хард-брик (кирпич)
На Redmi 6/6A кирпич - это
Не реагирует абсолютно ни на что, ни на какие комбинации клавиш. Экран чёрный, вообще ничего не показывает не доходит до бутанимациии даже при подключении зарядного устройства не загорается индикатор зарядки. Без возможности зайти в рекавери, без возможности зайти в фастбут, постоянно вибрирует с паузами, будет вибрировать до полной разрядки АКБ.
На современных устройствах получить кирпич крайне тяжело. Это тяжёлый случай, как раз и нужен для этой цели EDL и SPFT с соответствующими драйверами на устройство и авторизованный сервисный аккаунт.

попробовать Восстановить кирпич: не во всех случаях помогает
Официальный способ поднятия виброкирпичей для жителей России
==== Отнести в СЦ по гарантии (в СЦ где есть сервисный аккаунт), если есть гарантия на тело
==== Отнести в АСЦ DNS (~800руб)
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=99881293
Что говорить: пришло обновление на телефон, обновил, телефон перезагрузился и теперь не включается (не говорить ни-ни ни про twrp, ни про рут итп). Узнать что было с телом не смогут при перепрошивке всё сотрётся, что будет с загрузчиком - ?.
СЦ: https://mobile.mi.com/ru/service/repair/
==== Удалённый сервисный аккаунт (через интернет)
- контакты на форуме
- в интернете
==== Инструкция по прошивке с помощью программы SPFT в картинках (пример)
https://4pda.ru/forum/index.php?showtopic=599456&view=findpost&p=65695187
Проверка подключения тела в режиме Bootrom
- Установить Драйвера DriverInstaller_(COM-Port).
- Подключить тело в выключенном состоянии к ПК (Админ) в порт от материнки через оригинальный USB кабель. Держать кн. Гр+.
- Тело д. определиться как COM-Port в ДУ, не будет включаться, не будет вибрировать.
Если у вас кирпич, сразу можно понять, если вибрирует - не определился, если не вибрирует - всё отлично, подключён как COM-Port.
Прошивка тела в режиме EDL (Bootrom)
- Отключить тело.
- Настроить SPFT для прошивки.
- Запустить процесс прошивки в SPFT.
- Подключить тело. Держать кн. Гр+.
- Авторизация сервисного аккаунта (интернет).
- Начинается процесс прошивки (сток MIUI глобальная для фастбут или любая другая)
- Отключить тело после окончания прошивки. Зажать кн. Питание.
1 способ: тело цепляется при зажатой кн. Громкость+ и подключении к ПК в выключенном состоянии. Чтобы оно задержалось в ДУ нужно предварительно запустить SPFT в режим прошивки (похоже на прошивку BIOS ПК, ТВ-тюнера, др.)
2 способ: отключить АКБ. держать кн. Громкость+. подключить к ПК (то же самое что и 1 способ, отключённая АКБ никак не влияет на определение устройства в EDL)
==== Метод с отключением шлейфа АКБ через фастбут: (это не EDL режим, это фастбут режим)
- Вскрыть тело (не забыть вытащить лотки). Начинать от лотков по кругу медиатором или точёной картой, задняя крышка на защёлках.
- Открутить 3 болта экрана над шлейфами батареи и кнопок (верхняя крышка).
- Отключить оба шлейфа вдоль АКБ. Не оторвать шлейфы. Обесточить тело на 30-40 сек (10-15 мин).
- Нажать кн. Питание на 2-3 сек, разрядить тело (разрядить конденсаторы).
- Подключить шлейфы. Не собирать. Зайти в фастбут.
если не зашло1:
- Пробовать с десяток раз
если не зашло2:
- не подключая один шлейф который для АКБ, подсоединить тело к ПК на несколько сек должен загореться светодиод. Далее, с пункта Подключить шлейфы. Зайти в фастбут.
если зашло:
- Прошить стоковую прошивку для фастбут или
- Прошить twrp A8.1, A9 A10, от прошивки которая стояла. Прошить boot (на всякий случай). потом Прошить Бекап в twrp.
==== Прошивка MTK без сервисного аккаунта через SPFT
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=103559971 by Megafon929
https://4pda.ru/forum/index.php?showtopic=912972&view=findpost&p=104634322 by wa2not

Qualcomm с замыканием контактов Тест Поинт: (также)
- Отсоединить шлейф АКБ от платы.
- Замкнуть контакты Тест Поинт (скриншот где находятся контакты, скрепка, пинцет).
- Держать контакты замкнутыми, вставить USB кабель в тело.
Аппарат переводится в режим EDL, экран при этом остаётся выключенным.
- На ПК открываем ДУ. В разделе "порты COM и LTP" должно появиться новое устройство, "Qualcomm HS-USB QDLoader 9008". Если определилось как 9008 порт, убираем руку с контактов.
- Прошивка тела.
- Дожидаемся успешного окончания прошивки.
- Отключаем кабель от тела.
- Подключаем шлейф АКБ обратно.
- Зажимаем кн. Питание до вибрации.
При следующем запуске экран д. загореться и ОС д. запуститься.


! -> не работает на Redmi 6
FireHose
прошивка через EDL без авторизованного сервисного аккаунта
https://4pda.ru/forum/index.php?showtopic=949619&view=findpost&p=97266451
Redmi 8A https://4pda.ru/forum/index.php?showtopic=976547&view=findpost&p=103186922
, там патченый preloader нужен
вариант восстановления кирпича с заблокированным загрузчиком и без необходимости в спец. аккаунте для прошивки через тестпоинт
Xiaomi Mi Pad 4/Plus
https://4pda.ru/forum/index.php?showtopic=911266&view=findpost&p=79768757
Процесс прошивки начинается с файла prog_emmc_firehose_Sdm660_ddr.elf после него идёт запрос на авторизацию в спец Ми аккаунте с разрешением для прошивки через тестпоинт.
На вьетнамке этот запрос игнорируется и продолжается процесс прошивки.
Но при заблокированном загрузчике вьетнамка работать не будет, поэтому берём файл prog_emmc_firehose_Sdm660_ddr.elf от вьетнамки, забрасываем в папку images распакованной глобалки и шьём такую глобалку через тестпоинт.
Я использовал прошивку 9.6.8.0.ODJCNFD, возможно сработает и на других версиях, но я не стал рисковать.
Файл prog_emmc_firehose_Sdm660_ddr.elf взял от вьетнамки, но думаю может подойдёт и от девелоперки, хотя не факт.
prog_emmc_firehose_Sdm660_ddr.zip 495,81KB
Такой вариант скорее всего подойдёт и для других устройств Xiaomi.
Когда будете копипастить инфу на другие ветки то позаботьтесь найти аналог файла prog_emmc_firehose_Sdm660_ddr.elf для других устройств сами.
Также полагаю если поковырять и сравнить файлы prog_emmc_firehose_Sdm660_ddr.elf от прошивок для других устройств, то можно выморить оттуда запрос на авторизацию в спец аккаунте.
! -> не работает на Redmi 6







** MAGISK
MagiskSU Root: Stable, Beta, Canary.
https://github.com/topjohnwu/Magisk/releases/
A4.2+ MagiskSU and Magisk Modules - Only
A4.4+ All core features available
A6.0+ Guaranteed MagiskHide support
A7.0+ Full MagiskHide protection
A9.0+ Magisk Manager stealth mode

[WIP] Canary builds - work in progress, cutting edge builds for those adventurous. Canary Magisk Manager. Canary Channel.
Официальные, экспериментальные сборки Canary канала обновлений на основе последних внесённых изменений (коммитов) в исходный код Magisk. Содержат последние актуальные исправления, ошибки, проблемы, баги. Устанавливайте если вы заинтересованы в использовании, тестировании, не боитесь возможных проблем и готовы к их решению.
Устанавливайте Canary сборки начисто, с удалением предыдущей версии Magisk посредством деинсталлятора.
Canary Magisk + Magisk Manager + uninstaller = один файл:
- если необходимо установить apk - установите apk.
- если необходимо прошить Magisk в TWRP - изменить расширение .apk - .zip - прошить.
- если необходимо удалить Magisk через uninstaller в TWRP - переименовать файл uninstall.zip - прошить.
Release Canary https://raw.githubusercontent.com/topjohnwu/magisk_files/canary/release.json
https://github.com/topjohnwu/magisk_files/tree/canary?files=1
Debug   Canary https://raw.githubusercontent.com/topjohnwu/magisk_files/canary/debug.json

systemless приложение администратор Root прав безситемно
Проходить проверку SafetyNet нужно для NFS, Google Pay, др. Pay. Если нет NFS, ни на что не влияет.
Никогда не обновляйте сервисы Google Play вручную, пока не появится обновление Magisk, которое обходит обновлённую сеть SafetyNet.
Redmi6  A8.1 Magisk 18.0 Stable
Redmi6  A9   Magisk 19.3, 20.4 Stable. boot патченый для Magisk 19.3, на этот boot можно ставить Magisk 19.3 и 20.4. boot можно пропатчить самому
Redmi6  A10  Magisk 20.4 Stable
Redmi6  A11  Magisk 21.4 Stable или Canary или патченый Magisk под определённую версию прошивки

Redmi8A A11  Magisk 21.4 Stable + fix: MAGISK-MOUNT-FIX.zip, Fix+Magisk+Android+11+(GSI).zip

Magisk 22.0+ ставить начисто, не обновлять через менеджер.

ПРОПАТЧИТЬ ОБРАЗ ВРУЧНУЮ boot.img

Не полноценный рут, слетает рут (перезагрузка помогает), слетают изменения сделанные в Андроиде после перезагрузки (не слетают в TWRP), проверенная и рабочая версия, выше не ставить.

Чтобы применились изменения: ковырять system в twrp, использовать удобный файловый менеджер.
На Redmi 6/6A рут не полноценный из-за нашей armv7-a архитектуры, с которой Magisk через пень колоду работает. Поэтому система и все разделы кроме data можно редактировать только из TWRP или модулями Magisk.

Приложения для рута:
addonSU: su(arm) встроенный родной для LOS модуль в папке extras. Удаляется прошивкой в twrp деинсталлятора. https://download.lineageos.org/extras
phh-SuperUser: A4.0+ Phhusson. Приложение для управления доступом суперпользователя в GSI прошивках со встроенным рутом. Достаточно просто установить приложение и можно пользоваться. Установить архив через TWRP, потом приложение на запущенном теле. Рут получен.
SuperUser: foss.
MagiskSU: foss создан согласно новым реалиям Android. Патчит boot. Удаляется прошивкой в twrp деинсталлятора.
SuperSU: разработка прекращена (2016г), куплен китайцами. На A8+ не работает. Удаляется из своих настроек.
KingRoot: эксплоит для особо тяжёлых случаев, через Отладка по USB и ПК. Может установить рут до A5.
Kingo Android Root: системный рут, на современных устройствах нужен внесистемный (патч загрузчика). Может установить рут до A5.

- на A8.1 A9 только Magisk
- при установке MagiskSU устанавливается приложение Magisk Manager, или самостоятельно его установить Magisk Manager.apk как приложение, потом в twrp - прошить Magisk.zip. Проверить рут любым приложением которое требует рут (Root Explorer)
- не вмешивается в системный раздел /system (systemless)
- запускать скрипты на различных этапах монтирования и подменять файлы (например, build.prop) ещё до монтирования раздела /data
- скрывает рут/разблокированный бутлоадер/permissive-режим SELinux от приложений, игр, почты, банков (Сбербанк, ПриватБанк, Pokemon GO, Android Pay)
- не скрывает рут у некоторых приложений
- контролирует выдачу рут прав приложениям - Magisk Manager установка/обзор/настройка
- коллекция дополнительных модулей, без обычных патчей для twrp: расширить функциональность Android, данные модули не повредят системные файлы, работа происходит без модификации системного раздела
- специальный модуль recovery mode mm для рекавери, если что-то пошло не так. Модули Magisk напрямую не трогают раздел system как это делают патчи для twrp, а делают линки для раздела /system и что ещё плюс - это, что после обновления прошивки со встроенным Magisk нет необходимости заново устанавливать модули (бывает по-разному).

Начиная с 20.1+ нужен для A10, не слетает рут после перезагрузки и добавлена какая-то там новая система скрытия для A9.
Лучше ставить рут, слетать twrp не будет и по другим причинам.

Некоторые приложения, допустим "Дія", используют известную недоработку Magisk (утечка монтирования).
Скрыть от них рут не получиться. Пофиксить это невозможно - ставить моды приложений.

Обновить Magisk: если из Magisk Manager не удалось:
- избавляетесь от стороннего рута (если он имеется). Если SuperSU, проще всего прошить архив со скриптом удаления
- удалить старый Magisk, twrp Magisk-uninstaller.zip
- восстановить стоковый boot (boot или переустановка всей прошивки начисто)
- вайп кеш и далвик-кеш (если надо)
- прошить патченый boot (если надо)
- прошить новый Magisk в twrp
- установить новый Magisk Manager в систеие (если надо)
Удалить Magisk:
- прошить в twrp Magisk-uninstaller.zip
- вернуть бекап boot: /data/stock_boot_<sha1>.img.gz
- удалить /data/adb/magisk, data/magisk_backup/, /data/busybox?, /cache/magisk, (если осталось)

SmaliPatcher-0.0.6.7-fOmey@XDA.zip создать уникальный патч для отдельно взятой ОС Андроид
ПК требования: W7+, 3GB+, .NET Framework 4.7.1+, Java, A6.0+, 


! -> не работает на Redmi 6 Cherry Kernel - бутлуп на бутанимации
https://4pda.ru/forum/index.php?showtopic=774072&view=findpost&p=91068157
https://4pda.ru/forum/index.php?showtopic=932147&view=findpost&p=82184908
На A9 узнать битность boot.img или recovery.img
открыть в WinHex в самом начале
boot.emmc.Backup.win WinHex поиск build
bootopt=64S3,32S1,32S1 - SAR, a64_ab
bootopt=64S3,32N2,64N2 - 
Последняя цифра значения bootopt= - показывает битность
На A9 если последняя цифра 64 - рутируется без проблем, если 32 - с рутированием возникают траблы
bootopt=64S3,32S1,32S1 buildvariant=user androidboot.selinux=permissive - это обычные патчи для запуска A9 на МТК.
- Устанавливаем Magisk Manager
- Проверяем boot.emmc.win WinHex поиск: build
bootopt=64S3,32S1,32S1
- Патчим образ boot.img (из стоковой прошивки)
- Патченый образ распаковываем (.zip), ядро открываем в HEX-редакторе
- Ищем     hex 736B69705F696E697472616D6673 (единичный экземпляр)
- Заменяем hex 77616E745F696E697472616D6673
736B6970 skip
77616E74 want
- Сохраняем изменение и запаковываем образ
- Прошиваем образ в /boot. Радуемся руту
! -> не работает на Redmi 6 Cherry Kernel - бутлуп на бутанимации
! -> не работает на старших моделях Redmi 7, 8, 9, 
  -> кое-кто говорит что работает на стоке Redmi 6 стоковое ядро


если не применяет рут, политика рута приложений, править:
/data/adb/magisk.db

Версия Magisk поддерживаемая модулями:
/data/adb/modules/../module.prop
- minMagisk=15000
- minMagisk=17000

Переключение режима SELinux Permissive
1 способ: прошить в twrp Permissiver_vX.zip
2 способ: добавить androidboot.selinux=permissive в бут
3 способ:
MagiskSU
создать файл: permissive.sh 755
#!/system/bin/sh
echo 0 > /sys/fs/selinux/enforce
положить в
/sbin/.core/img/.core/post-fs-data.d # или
/magisk/.core/service.d
Перезагрузка
4 способ: в системе
setenforce 0 # терминал, после перезагрузки сбросится




MODULES Magisk
https://github.com/Magisk-Modules-Repo/
Скачанные - /Download. Установленные - /data/adb/modules. Загруженные - /sbin/.magisk/modules.

- отключить модуль глючный, TWRP /data/adb/modules/ создать пустой файл disable в подпапке
- удалить модуль, просто папку модуля TWRP /data/adb/modules/ удалить (по-разному)

Magisk Manager for Recovery Mode mm
https://4pda.ru/forum/index.php?showtopic=915158&st=0#entry76265618
https://github.com/Magisk-Modules-Repo/mm
Установить через Magisk Manager или TWRP как обычный модуль Magisk
- отключить/включить/удалить модуль, даже при бутлупе
- Управление данными Magisk
- Изменение настроек Magisk (с использованием текстового редактора vi)
- Автоматически исправить magisk.img (e2fsck -fy)
- Список установленных модулей
- Изменить размер файла magisk.img
- Включить auto_mount
twrp-terminal:
mm # или
/data/media/mm # или
sh /sdcard/mm # в новых версиях mm или
*/mm # в новых версиях mm
uninstall.sh # удаление mm

Magisk Manager Recovery Tool как AromaFM
https://github.com/amarullz/AROMA-Installer
https://github.com/Pzqqt/Magisk_Manager_Recovery_Tool
https://4pda.ru/forum/index.php?showtopic=915158&st=20#entry81113962
Установить прошить zip в twrp
Удобный инструмент аналог mm для настройки Magisk в TWRP
- отключить/включить/удалить модуль, даже при бутлупе
- настроить рут итд
- Only supported arm & arm64 architecture. Not supported x86 & x64 architecture.
- Will get stuck at Recovery for some device. This bug Aroma Installer binary file and I can not fix it.
- Known unsupported devices: Xiaomi8, Xiaomi8SE, Xiaomi9, XiaomiMix2S, XiaomiMix3, Oneplus6.

** ! просто разные модули, какие есть, многие устарели, многие не подходят на Redmi 6

Battery Charge Limit
https://4pda.ru/forum/index.php?showtopic=980639&view=findpost&p=101822481
Модуль для Magisk, чтобы ставить лимит зарядки на процентах.
Audio Compatibility Patch
https://4pda.ru/forum/index.php?showtopic=915158&view=findpost&p=100787161
Модуль исправляет музыкальные и потоковые приложения (Spotify, Pandora и т. Д.), которые не обрабатывают звуковые эффекты для различных приложений эквалайзера, путем изменения политики звука. Теперь с исправлением usb_policy и средством удаления notification_helper.
Nuked позволяет пачкой отключить аналитику, трекеры и прочий мусор. Работает через терминал su -c NUKED
ExSDCard Access Enabler - доступ к карте памяти. Работает на A10.
T-Engine Thermal V5 - не модуль но что то похожее
1Controller - 1 Module to support all Controllers - .kl Dualshock 4/3, Xbox 360/One/S, Elite Controller, Nacon RPC, Switch Pro. Нативная поддержка геймпадов
Известные проблемы:
Высокая задержка у DualShock 4 с Bluetooth (похоже проблема в самом контроллере).
Не работает на устройствах с MIUI 10.
https://4pda.ru/forum/index.php?showtopic=915158&view=findpost&p=97806628
YouTube Vanced - Magisk Repo - YouTube [Ad]Vanced a modded version YouTube
Wifi Bonding (Qcom) - Doubles your wifi bandwith by modifying WCNSS_qcom_cfg.ini
Viper4Android FX - audio enhancing
Unlock 90FPS V2 QC - real performance
TouchX - increase touch
T1 Thermals - thermals for devices using SD845 soc
Supercharger For 18watt Charger - increase chargering upto 3k ma/18W
POCO VOLUME OC - increase volume levels
NetworkTweak - help get better internet connectivity, low ping
KFMark Enabler - A module can enable KFMark when device start
D8G - kernel manager
D8G Remover - remove all config D8G Kernel if your device installed another Kernel
Adreno 600 Series OpenGL ana Vulkan Drivers - systemless OpenGL V@464.0-rev2 and Vulkan 1.1.128 drivers for sd845 - посмотреть что это
Unlock Smooth Extreme - посмотреть что это
JThermod - Thermal Mod for Lavneder - посмотреть что это

Запись звонков:
1. Call Recorder - SKVALEX, платная 10$.
Запись звонков с линии A9, A10.
https://github.com/Magisk-Modules-Repo/callrecorder-skvalex
https://4pda.ru/forum/index.php?showtopic=915158&view=findpost&p=94862475
https://skvalex.org/help/best-practices?hl=ru&source=ps&style=dark
Xiaomi MIUI:
- Включите уведомление в Настройках > Интерфейс и внешний вид. Приложения без уведомления считаются системой Android как не важные, поэтому Call Recorder может быть остановлен.
- Убедитесь, что другие приложения не ведут запись во время звонка (голосовые помощники, другие программы для записи, навигационные приложения).
- Отключите оптимизацию батареи для приложения в Настройках системы, разрешите автозапуск итд. См. информацию по вашему устройству ниже.
- Установите замок на программу в последних запущенных приложениях. Установите "Без ограничений" в приложении экономии батареи. Разрешите авто-запуск. Выдайте все разрешения.
Call Recorder Unlock - license
This is just a license file which converts a trial version of Call Recorder into a full version.
Call_Recorder_-_SKVALEX-2.1.0_(3.3.9)(28).zip. Приложение интегрировано в модуль. Работает.
Call_Recorder_-_SKVALEX-2.1.0_(3.4.0)(29).zip. Приложение интегрировано в модуль. Работает.
Call_Recorder_-_SKVALEX-2.1.0_(3.4.2).zip. Приложение интегрировано в модуль. Работает.
2. Call Recorder F-droid: Axets_Call_Recorder-v1.0.1-f-droid.zip. Приложение интегрировано в модуль. Работает.
3. True Phone: True Phone.apk приложение. hbdialer-magisk-1.zip модуль. Работает.

Tweakbox by Camerado Magisk20.4 MIUI A8.1-11
https://4pda.ru/forum/index.php?showtopic=915158&view=findpost&p=97091564
Небольшой кастомизируемый под собственные нужды модуль, изменять параметры можно прям внутри архива, сохраняя оригинальную кодировку файлов customize.sh и system.prop.

Busybox for Android NDK 1.31.1 Static busybox binary for all Android architectures built with NDK
https://github.com/Magisk-Modules-Repo/busybox-ndk
https://4pda.ru/forum/index.php?showtopic=915158&view=findpost&p=96296145

CPL модулей Magisk для увеличения жизни батареи LKT и Universal GMS Doze

PetNoires SafetySpoofer + HARDWARE OFF - фикс SafetyNet
MagiskHide Props Config - pass SafetyNet CTS Profile check
SafetyNet-Fix
universal-safetynet-fix

App Systemizer (Terminal Emulator) сделать приложение системным
После установки и перезагрузки нужно запустить терминал
$ su
$ systemize
$ 1
После этого появится список всех приложений по номерам. Пишем номер нужного нам, enter, выбираем 1 или 2 (куда хотим ставить программу - в system/app или system/priv-app) и перезагружаемся. Приложение теперь с привилегиями системного.
У нас раздел system динамически монтируется, потому туда добавить или удалить ничего нельзя. Этот модуль другими путями даёт привилегии системного. Если у приложения нет кнопки удалить, значит оно уже системное, хоть и не находится в разделе system.

Adguard DNS Use Adguard DNS servers instead ISP
Nano for Android NDK Static ARM nano binary for Android built with the NDK
Swift Installer Module Generated By Swift Installer
Text-Mod
Debloater (Terminal Emulator) Debloat your device Systemless-ly. With choices for debloating in Terminal Emulator for every device. Модуль для удаления системных приложений, с возможностью восстанавления. Работает через эмулятор терминала. Просто введите команду debloat и выберите приложения, которые хотите удалить.
Emojis эмодзи iOS 13.2 заменяют эмодзи Google. Смотрятся красиво.
Rboard Themes темы для Gboard в стиле клавиатур разных девайсов (Samsung GraceUX)
ViperFX (V4A) Глобальный эквалайзер? улучшайзер звука. Огромное количество настроек кастомизации.
VIPER4Android FX, VIPER4Android FX Legacy, VIPER4Android XHiFi
ViperFX будет работать только на A8.1 или на стоке MIUI A9, на кастомах A9 не работает или ломает что-то или отваливается что-то.

Ainur JamesDSP reformed audio engine based of AOSP and OmniROM DSPManager enhanced features and tuning
качественный глобальный эквалайзер
Audio Modification Library AudModLib is a framework that allows the seamless integration of multiple audio mods in Magisk.

AdBlock

Exo 2 Font 2.0.5
GoogleSansMOD2 Font GoogleSansMOD2 Systemless Font
Move Certificates
systemize
FakeGapps для конкретной API версии android
YouTube Vanced black themed - Magisk Repo








** XPOSED EDXPOSED foss
для A9 A10 - EdXposed
Поскольку для A9+ из-за особенностей новой системы удалось создать только суррогат Xposed - EdXposed, работающий по иным, нежели ранее, механизмам и потому с крайне ограниченным числом модулей, разработка новых модулей сильно сбавила темпы. С повышением версий Android время Xposed уходит.
Системная программа-перехватчик для изменения настроек прошивок и приложений без их декомпиляции на лету.
Xposed представляет собой модифицированную версию app_process, которая при запуске первым делом загружает в память специальный Java-класс - перехватчик, а лишь после него - оригинальный Java-класс (т.е. Xposed при установке заменяет app_process своим, а оригинальный переименовывает в app_process.orig; после удаления Xposed её app_process удаляется, а оригинальный возвращается на свое место). Перехватчик выступает в качестве посредника для любых вызовов Java-методов, инициированных оригинальным классом, и, в случае необходимости, перенаправляет их классу-обработчику. Последний как раз и занимается тем, что изменяет поведение системы.
С помощью Xposed можно устанавливать и удалять модификации Android как обычные приложения, без необходимости прошивать, копировать в системный раздел, и без какого-либо риска. Не нужно декомпилировать, изменять ресурсы вручную, компилировать, подписывать; модификации будут работать на разных типах прошивок, одексированных и деодексированных, можно устанавливать несколько модификаций вместе (если только они не конфликтуют между собой), модификации легко отключаются без перепрошивки. Полная свобода действий, и этот фреймворк полностью опенсорсный.
Для MIUI: если официальный Xposed не работает - модифицированный Xposed. На некоторых MIUI фреймворк не работает ни в каком виде.
odex, deodex - не требуется.
Если Magisk предоставляет модули для модификации базовой системы, то Xposed предоставляет модули для модификации и патчинга на лету самого Android.
Если Installer (edXposedManager) не предлагает вам фреймворк для вашего девайса, просто найдите и установите его самостоятельно.
С кастомными прошивками на базе AOSP - Xposed не конфликтует.
Иногда установленный фреймворк упорно сообщает, что он неактивен ("The latest version of Xposed is currently not active"/"Последняя версия Xposed в настоящее время не активна"), но по факту всё-таки начинает работать после перезагрузки (при этом сообщение о его неактивности может оставаться). Ставьте разные модули и проверяйте, прежде чем делать вывод о его неработоспособности. Если так и не заработал, пробуйте альтернативные сборки.

Sandhook - более новее, YAHFA - старее. Что кому более нравится - то и выбирайте. Я сразу поставил Sandhook - пока проблем нет.
Там механизмы взаимодействия с системой разные. Yahfa вроде как постарше, sandhook поновее и алгоритм немного изменен.
На некоторых устройствах SandHook вызывает bootloop, а Yahfa при этом нормально работает.

Установка EdXposed LP (для A9, A10)
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=95413621
https://4pda.ru/forum/index.php?showtopic=425052&view=findpost&p=81226127
R6A https://4pda.ru/forum/index.php?showtopic=927600&view=findpost&p=86740292
- Скачать актуальные версии Magisk, Magisk Manager Recovery Tool (mm), EdXposedManager, Riru Core 19+ (v21.3), EdXposed
- Сделать нандроид-бэкап
- Установить Magisk
- Установить Magisk Manager Recovery Tool (mm), модуль Magisk. Он нужен для отключения Xposed в случае бутлупа
- Установить Riru Core v19+ и первую версию EdXposed в twrp (лучше) или в Magisk Мanager (хуже или если не устанавливается, если бутлуп - вторую версию)
- Перезагрузить в систему
- Установить EdXposed Manager (юзать его вместо инсталлера от dvAndroid и прочих)
- Перезагрузить в twrp
- twrp wipe Cache, Dalvik Cache
- Перезагрузить в систему, загрузка м.б. 15 мин.
- Скачать/установить LP
- В EdXposedManager во вкладке "Установленные модули" поставить галочку на LP.
Автоматически поставятся первые два патча в меню "Патчи Андроида". Третий патч поставится через модуль Magisk. Третий патч можно не ставить.
- в LP_9.3.3 (проверялось) присутствует встроенный модуль Magisk (v20.0+) для применения первых двух патчей, т.ч. EdXposed можно не ставить
- Перезагрузить
https://github.com/RikkaApps/Riru/releases/download/v21.3/magisk-riru-v21.3.zip | не выше v21.3/v0.4.6.4-SandHook | v19.7/v0.4.6.3-YAHFA запара с более новыми корами и самим Xposed, а эти работают)
https://github.com/ElderDrivers/EdXposed/releases/download/v0.4.6.2/EdXposed-SandHook-v0.4.6.2.4529.-release.zip
https://github.com/ElderDrivers/EdXposed/releases/download/v0.4.6.2/EdXposed-YAHFA-v0.4.6.2.4529.-release.zip
https://github.com/ElderDrivers/EdXposedManager/releases/download/v4.5.7.0.0/EdXposedManager-4.5.7-45700-org.meowcat.edxposed.manager-release.apk


MODULES Xposed
модули работают в специальной среде Xposed Framework
XPOSED Disabler

**! просто разные модули, какие есть, многие устарели, многие не подходят на Redmi 6
Единственное применение Xposed: Патчи Андроида LP, Greenify, XprivacyLua, FakeGapps?, GravityBox

Riru - LSPosed v0.5.4.0

CustoMIUIzer - Модификация функциональности MIUI, набор модов для MIUI.

GravityBox Pie Q Модификация прошивки для любого устройства с ЧИСТЫМ A4.1+.
Концепция GB превратить устройства на MTK со стоковыми прошивками во что-то близкое к устройствам с функциональными кастомными прошивками.
Кастомизация стока, как на кастомных прошивках

Fonter для xposed - заменить шрифт/цвет в отдельном приложении https://repo.xposed.info/module/git.hub.font
sudo hide - скрыть GG от игры
BootManager - 
No WakeLock - 
Disable Sensors - 
Sensor Disabler - Xposed-модуль, позволяет отключать изменять значения для всех имеющихся в устройстве датчиков 
отключение logcat
App Settings - раздельной настройки плотности экрана (DPI), увеличить значки панели кнопок в приложении
XHaloFloatingWindow - отдельное плавающее окно приложения

EAGLE Security - защита от прослушивания в виде определения ложных базовых станций и блокировки доступа приложений к камере и микрофону (закрытый исходный код)
Camera Block - временно блок доступ (лишние действия)
Mic Block - временно блок доступ (лишние действия)

XPrivacy, XPrivacyLua Pro
@XPrivacy | Препятствует утечке персональных данных
XprivacyLua лучше. ставить для защиты данных
Сам по себе XPrivacyLua ничего не защищает, защищают правила в нём, причем правила комплексные и правильно созданные. Разработчик XPrivacyLua не собирается эти правила развивать. Поэтому XPrivacyLua не может считаться заменой для абсолютного большинства пользователей.





** LOGCAT
Терминал на теле
su
logcat -v long > /sdcard/logcat.log
logcat -v long *:W*:S > /sdcard/logcat.txt
Громкость- и кнопку С на клавиатуре
Остановить log

cmd на ПК
adb logcat > logcat.txt
logcat -v long > /sdcard/logcat.log
logcat -v long *:W*:S > /sdcard/logcat.txt
CTRL+C

V - Verbose (lowest priority)
D - Debug
I - Info (default priority)
W - Warning
E - Error
F - Fatal
S - Silent (highest priority, on which nothing is ever printed)

Получение logcat отдельного приложения:
adb shell "logcat | grep <PID>" # 1 способ
adb shell "logcat | grep "`pgrep <имя пакета>`"" # 2 способ Без использования PID

adb shell pgrep <имя пакета>
adb shell logcat | grep <число предыдущей команды> # Без использования PID (работает)

терминал (без использования adb shell):
logcat | grep "`pgrep <имя пакета>`" # 1 способ
logcat | grep -E "`pgrep <имя пакета> | tr \"\\n\" '|' | head -c -1`" # 2 способ При возникновении ошибок типа "No such file or directory"





** РАЗБЛОКИРОВАТЬ ЗАГРУЗЧИК:
MIFLASH_UNLOCK (WXP+) только через ПК
Проверить тело:
https://www.mi.com/global/verify#/en/tab/imei
Найти свой телефон на сайте/
Статус привязки устройства к аккаунту, и номер телефона к которому идёт привязка. Если sim карта с вами можете восстановить пароль по нему.
https://i.mi.com
https://i.mi.com/find/device/activationlock#/status
https://en.miui.com/unlock
Мi Cloud
https://us.i.mi.com

С 2018г региональное разделение на уровне загрузчика: тело китаец, разблокировка на китайской прошивке, тело глобал - на глобал прошивке. Не блокируйте загрузчик вообще, а если блокируете - на той же версии прошивки, на которой разблокировали, иначе - кирпич

Разблокировку загрузчика можно делать на любой версии MIUI: глобал, стабл, девелопер, конкретнее смотреть в своей теме.
Разблокировку загрузчика можно делать (запросить) даже когда тело ещё не на руках, а "в пути".
? Разблокировка загрузчика на новом теле только "из коробки": не получиться, надо ждать (недели две), там встроенный таймер, в меню разработчика не будет опции связать тело и mi аккаунт.
Создать mi аккаунт или использовать уже имеющийся https://account.xiaomi.com/pass/serviceLogin?&_locale=ru_RU
Если через тело не получается, Создать через ПК - Зайти в аккаунт на теле, Зайти в аккаунт на ПК.
Оставить в теле 1 sim карту в 1-м слоте (2-ю лишнюю вытянуть), которую будем привязывать, включить мобильный интернет через sim, откл wi-fi. На счету есть деньги.
После привязки тела к аккаунту sim можно будет достать/сменить, тело оставить включённым, синхронизация и wi-fi без разницы, главное не выходить из аккаунта на теле. Неизвестно как сервера Xiaomi отслеживают активность устройства: вкл-откл wi-fi на день и проверить в MiFlashUnlock как изменился счётчик времени, должен уменьшаться.
Связать тело с mi аккаунтом: Режим разработчика-Статус Mi Unlock-связать с sim картой на теле-Не выходить из аккаунта в течение ?? дней ожидания, просто не нажимать "Выйти из аккаунта".
Есть вероятность не ждать 30 дней (м.б. это рандом): Зайти в аккаунт-Зайти в Security заполнить инфу: изменить имя на удобочитаемое, установить картинку, sim карта д.б. активирована, если не получается через тело, пробовать через ПК.
Чем новее модель тела тем дольше ждать.

ОПЕРАЦИИ ПРЕДВАРИТЕЛЬНЫЕ:
Отключить встроенный файервол, антивирус на теле, на ПК (под Админом)
Включить GPS
Отключить всю защиту/безопасность: блокировка паролем, граф. ключём, отпечаток, по лицу - это сейчас не понадобится, в дальнейшем при прошивке надо будет
Настройки-Расширенные настройки-Конфиденциальность-Найти устройство-вкл
Настройки-Все приложения-Сообщения-Очистить Все данные-Предоставить все разрешения
Настройки-Все приложения-Mi аккаунт-Предоставить все разрешения
Настройки-Все приложения-Mi аккаунт-Mi Cloud-включить синхронизацию, можно не включать отдельные пункты синхронизации (помогло)
Настройки-Все приложения-Xiaomi Service Framework-Предоставить все разрешения
Настройки-Системные приложения-Сообщения-Mi сообщения-включить на 1 sim карте - происходит отправка платного sms без никаких предупреждений (помогло)
Настройки-Системные приложения-Сервис активации Xiaomi sim-Очистить Все данные-Предоставить все разрешения
Настройки-sim карты и мобильные сети-Интернет в роуминге ставим "Всегда"-повторить запрос sim-активации (при ошибке активации), потом можно будет Интернет в роуминге отключить

ОШИБКА: не удалось активировать sim карту, sim карта не активирована, ошибка активации sim карты, похожее
Попробовать проделать выше перечисленные предварительные операции
Попробовать перезагрузить тело
Попробовать выйти из аккаунта и зайти: в момент входа идёт проверка тела и активация sim карты и походу отправка платного sms, мобильный интернет от sim карты
попробовать переключить на английскую локализацию
Если ничего не помогает, на крайний случай: сброс к заводским настройкам, создать новый mi аккаунт с другой sim картой (привязать к другой sim-отвязать-привязать к родной sim, это если надо и если критична sim)

FRP
Для разработчиков-Разблокировка OEM-Отключает FRP.
OEM заводская разблокировка - Открывает или закрывает доступ к загрузчику, дополнительная мера безопасности. Это не разблокировка загрузчика.
При включённом пункте Отключает FRP после сброса настроек на заводские, не будет просить учётные записи Google и Mi (если не включён поиск устройства).




> Разблокировать загрузчик bootloader. Представляет собой разблокировку в fastboot через ПК через Windows данными, которые получаем через интернет с серверов Xiaomi.
> Загрузчик официально разблокируется только после подключения к интернет, отправляется инициализационный код на сервера Xiaomi, и без этой инициализации разблокировка не возможна, т.к. блокировщик зашифрован. Аппарат залочен и для его разлочивания нужно "ПРОСТО!" подключение к интернет.
> Разблокировка загрузчика форматирует раздел userdata. Сброс к заводским настройкам.
> Для этого нужно: привязать тело (sim) к mi аккаунту.
> Не официальной разблокировки - нет (для разных моделей по разному).
> Войти в существующий или зарегистрировать создать новый mi аккаунт через ПК (или через тело): подтвердить почту, смнеить ID на имя, установить картинку, проклацать менюшки-пункты. Сейчас разрешение на разблокировку есть автоматом у каждого аккаунта.
> До  входа в mi аккаунт на теле: можно пользоваться любым интернетом: wi-fi, итд. Нужно: проделать выше перечисленные предварительные операции, чтоб нарерняка с первого раза активировать sim.
> При входе в mi аккаунт на теле: на sim карте должны быть деньги, включён мобильный интернет через sim, откючёно AVP, FW, wi-fi, происходит отправка платного sms без никаких предупреждений.
> если ОШИБОК нет: sim карта активирована: Настройки-mi аккаунт-Привязанные устройства-тело-sim карта-определился привязанный номер. Тогда Настройки-Режим разработчика-Статус Mi Unlock-связать mi аккаунт и sim карту на теле
> если ОШИБКИ есть: смотреть в шторке что за ошибка, в каком приложении происходит. Всё равно Настройки-Режим разработчика-Статус Mi Unlock-связать с mi аккаунтом и sim картой на теле (счётчик тикает от начала привязки). Решать проблему с ошибкой
> Режим разработчика-Отладка по USB-вкл (советуют, что надо включить)
> тело в fastboot, на ПК необходим интеренет (не от разблокируемого тела)
> miflash_unlock_en: ОШИБОК нет: время-ждать-не выходить из аккаунта на теле
> miflash_unlock_en: ОШИБКИ есть: error code, решать проблему по коду ошибки
> Разблокировка: ожидать-таймер закончился-все 3 галочки зелёные-Unlock-перезагрузка-не спешить вытягивать USB кабель-Все данные сотрутся (как сброс к заводским настройкам).
> Для активации mi аккаунта на sim карте должны быть деньги, отправка платного(ных) sms за границу и мобильный интернет ~1-5MB, это нужно конкретно для активации SIM.
> Начиная с MIUI 9 при загрузке тела на бутанимации внизу будет "открытый замочек" и надпись unlock (загрузчик разблокирован). Убрать/скрыть "открытый замочек" никак нельзя.
> С помощью 1 mi аккаунта, можно разблокировать 1 тело в 1 календарный месяц, т.е. с 1 числа каждого месяца можно разблокировать следующее тело.

> Отвязать mi аккаунт от девайса без удаления самого аккаунта с оффсайта:
> После Разблокировки нужно отвязать mi аккаунт от девайса.
> Настройки-Мi аккаунт-Мi Cloud отключаем всю синхронизацию, все переключатели и важно отключить Поиск девайса, при котором начнётся верификация и запросит номер телефона на котором был заведён mi аккаунт или можно ввести ID mi аккаунта (найдёте его при входе в mi аккаунт на офф сайте, обычно числа) или емайл на котором возможно был заведён аккаунт, далее идёт проверка - есть ли такой аккаунт, вводим пароль и выдаётся капча, тело будет выведено из поиска. Далее вернуться в mi аккаунт и нажать Выйти из mi аккаунт. Будет три выбора, всё не помню, второй строчкой будет УДАЛИТЬ С ДЕВАЙСА. Выбрать его и возможно, ещё раз будет прохождение верификации.
> Всё, mi аккаунт будет отвязан от девайса, но сам mi аккаунт будет на оффсайте существовать и всегда заново можно его задействовать при необходимости на этом теле или на любом другом. Для mi fit и с интернета запросто подхватывает mi аккаунт (работает), и другое тело также. Ну и есть возможность привязать этот свободный mi аккаунт к другому телу.
> Телефон можно или сбросить к заводским настройкам, или продать, или вернуть в магазин.
> Как раз после сброса к заводским настройкам и будет видно, отвязано устройство или нет - появится запрос на ввод пароля mi аккаунта.
> Блокировку нельзя пропустить.
> Отвязать только официально через сайт.

> Заблокировать загрузчик:
> "Китайские" модели телефонов могут иметь заблокированный загрузчик, только с китайской прошивкой.
> "Китайский" телефон с глобальной (или русской или др.) прошивкой, нельзя блокировать загрузчик.
> Блокировка загрузчика возможна только на официальной прошивке и родном сток рекавери - полный сток.
> Прошивка для fastboot MIUI 10/11: MIUI 10.3.1.0RU, 11.0.3.0. MiFlash: clean all and lock. Или скрипт flash_all_lock.bat.

Как отвязать телефон от mi аккаунта:
На теле в Мi Cloud отключаем всю синхронизацию и отключаем поиск телефона. Выход из аккаунта через 2-й пункт: УДАЛИТЬ С ДЕВАЙСА.
Заходим в Мi Cloud us.i.mi.com. Видим всё что сохранено. Свои телефоны и данные (у меня один привязан к этому акку). Там же хранятся синхронизированные данные, ими тоже можно управлять.

Kyivstar +380672021111 SMS Центр UA
1 тело Redmi6     2 укро.руб. 0 дней. Сразу разблокировалось.
2 тело Redmi6a    ? укро.руб. ? дней. ?
3 тело Redmi8a  >13 укро.руб. 7 дней. Осталось 7->3->0дней. (не активировалась sim после всех манипуляций, Mi Cloud-вкл, активация прошла).
4 тело Redmi8     ? укро.руб. ? дней. ?
При активации не понятно когда снимаются деньги и за что, сколько sms штук отправляется, если интересно звонить оператору и интересоваться.
На номере д.б. активирована отправка sms за границу.

https://c.mi.com/thread-837263-1-0.html
https://c.mi.com/thread-2277400-1-1.html
c:\miflash_unlock_ru_3.3\miflash_unlock.exe - рабочая версия проверено
c:\miflash_unlock_en_3.5\miflash_unlock.exe - рабочая версия проверено



** Заблокировать потерянный телефон
Заблокировать Стереть данные через ПК на потерянном телефоне.
https://4pda.ru/forum/index.php?showtopic=895128&view=findpost&p=104760784
- Телефон привязан к Mi аккаунту, стоит MIUI прошивка с не вырезанными сервисами
- Зайти в Mi аккаунт i.mi.com
- Найти устройство
- Варианты: Звук (звонок на телефон), режим утери (заблокирует телефон), стереть все данные.












ЗАГРУЗЧИК ARB
на Redmi 6 - ARB нет
Механизм, запрещающий откат на более ранние версии ПО. Это касается как прошивок, так и девайсов на чистом Android. Нарушив такую систему, пользователь столкнётся с мгновенным "окирпичиванием" девайса. Например, вы приобрели Redmi Note 5, на котором официально установлена оболочка MIUI 10. Но она не устроила вас по каким-то причинам, и было принято решение откатиться на MIUI 8, 9. Как итог - нерабочий девайс, реанимировать которой можно только в сервисном центре Mi. Сразу обратите внимание, что антиоткат присутствует далеко не на всех смартфонах Xiaomi. Ограничение вводиться для индийских и китайских моделей, но иногда в список попадают глобальные мобильные устройства.
Загрузчик ARB (Anti-RollBack) - так называемый механизм антиотката, касающийся загрузчика, его версии, и введён прежде всего для безопасности.
При повышении версии загрузчика, вы не сможете устанавливать прошивки с загрузчиком, версией ниже. Но в рамках одного загрузчика можно ставить любые прошивки, хоть на повышение, хоть на понижение! Даунгрейд касается только версии ARB, а не прошивки!
Чем грозит понижение версии загрузчика? -> кирпич.
Восстановить через EDL режим, авторизованный аккаунт, платно.




Проверить adb, fastboot:
adb --version       # работает ли вообще ADB и поддерживается ОС
fastboot --version  # работает ли вообще fastboot и поддерживается ОС

Проверить соединение с ПК:
adb devices
* daemon not running. starting it now on port 5037 *
* daemon started successfully *
23ade03c7d26    recovery   # дб отклик, список подключённых устройств, желательно 1 устройство, или
List of devices attached   # дб отклик, список подключённых устройств д. прописаться в c:\Documents and Settings\User\.android\adb_usb.ini
и
fastboot devices
23ade03c7d26    fastboot   # дб отклик, список подключённых устройств, желательно 1 устройство

Проверить всё:
fastboot getvar all

Проверить статус загрузчика:
fastboot oem device-info   # Qualcomm Snapdragon
(bootloader)    Device tampered: false
(bootloader)    Device unlocked: false
(bootloader)    Device critical unlocked: false
(bootloader)    Charger screen enabled: false
(bootloader)    Display panel: OKAY [  0.016s]
или
fastboot getvar unlocked   # MTK (Redmi 6/6A)
Device unlocked: false (заблокирован, неразблокирован), true yes (разблокирован)
! не надёжно: несколько раз нажать MIUI-Настройки-О телефоне-Версия ядра-Инженерное меню-Информация о версии (AutoTest)-verifiedbootstate: orange (разблокирован)

Проверить статус загрузчика ARB:
fastboot getvar anti
anti: 3 # у вас старая версия загрузчика, можете делать откат без опасений
anti: 4 # у вас обновлённый загрузчик с антиоткатом, дело плохо. У вас тот самый Anti Rollback.
Если отсутствует индекс(цифра) загрузчика ARB, то вашей модели ARB не касается!

Проверить статус SELinux:
Enforcing - принудительный
Режим по умолчанию. При выборе этого режима все действия, которые каким-то образом нарушают текущую политику безопасности, будут блокироваться, а попытка нарушения будет зафиксирована в журнале.
Permissive - разрешающий
В случае использования этого режима, информация о всех действиях, которые нарушают текущую политику безопасности, будут зафиксированы в журнале, но сами действия не будут заблокированы.
twrp-Advanced-Terminal:
su
getenforce
/system/bin/getenforce
/sbin/getenforce
setenforce 0 # busybox отключить SELinux, до перезагрузки
В ответ терминал напишет текущий статус SELinux, например Permissive

Проверить кодовое имя и регион устройства Xiaomi:
fastboot getvar product
cereus_ru = Russia
cereus_id = Indonesia
cereus_in = India
cereus_cn = China
cereus_eea = European
cereus = China / Global

Проверить поддержку Treble:
play.market (apkpure, apkmirror): Treble Info, Treble Check
или
adb shell getprop ro.treble.enabled






Установка кастомной прошивки

Какая прошивка самая стабильная, дольше держит заряд, меньше нагревается:
Лучшая прошивка будет та, что лучше проявит себя именно на Вашем смартфоне, а по сути они все одинаковы, +/- так сказать.
Если почитать пару страниц после релиза очередной прошивки, то приходишь к выводу, что все они всё лучше и лучше.
Однако после следующего релиза становится ясным, что предпоследняя была как все и не такая как последняя, и так всю дорогу. Чистой воды субъектив.
Все зависит от манеры использования телефона, у всех задачи разные, конкретного ответа на эти вопросы вам никто не даст. Посмотрите в подписях у долгожителей форума, или попробуйте самостоятельно тестировать прошивку 2-3 дня.

Ни в коем случае НЕ БЛОКИРУЙТЕ загрузчик, если у вас:
китайская версия телефона и установлена глобальная прошивка.
глобальная версия телефона и установлена китайская прошивка.
модифицированы разделы system, vendor, boot, recovery.
установлена кастомная/локализованная прошивка.
Перед тем как нажать кнопку "flash" в программе MiFlash, убедитесь что выбрано "clean all", а не "clean all and lock".
Установив TWRP + ROOT, официально по OTA - НЕ ОБНОВИТЕСЬ!

Redmi 6 с бутом 11.0.2 не работает рут
Redmi 6 + arm64 = нет и не будет, нет драйверов, нет исходников для прошивок
Никаких оптимизаций под MTK на кастомах толком нет
Локализаторы в общем не любят MTK
заблокированный загрузчик -> кирпич
китайская версия телефона с глобальной (или др.) прошивкой, заблокированный загрузчик -> кирпич
китайская версия телефона с глобальной прошивкой и с заблокированным загрузчиком - продавец на AliExpress: смарт вскрыт и вручную изменён id основной платы на глобальную, но подозреваю, что обвязка радио части на китайце отличается и смарт пытался работать с ней как с глобалкой, и из за этого происходит бред со связью
китайская версия телефона 4/64, как с ним по поводу прошивки и связи (Украина)? - китаец пашет без каких либо нареканий но загрузчик нужно сразу разблокировать (Band (Полоса) 3 (1800 МГц), Band 7 (2600 МГц), Band 8 (900 МГц), если Укртелеком то 5 и 20)
последняя официальная прошивка для fastboot MIUI 9.6.19.0 OCGMIFD -> кирпич
Mi-Globe -> 
MiRoom -> 
MinimalMIUI -> 
MIUIPro -> платная локализованная авторская прошивка, неудачная сборка прошивки, баги
XiaomiEU -> локализованная прошивка China ROM, обычная прошивка, добавлен русский язык, удалён мусор/реклама, добавлено несколько патчей. почти 100% кирпич: какие прошивки работают:
10.0.1.0_xiaomi.eu, 8.8.23_xiaomi.eu, 8.8.16_xiaomi.eu_androidfilehost.com, 8.6.28_xiaomi.eu_androidfilehost.com, 
https://sourceforge.net/projects/xiaomi-eu-multilang-miui-roms/files/xiaomi.eu/MIUI-STABLE-RELEASES/
MIUI 9 -> кирпич: 50/50 у кого есть, у кого нет. Не ставить полно багов
апгрейд A8 на A9 на A10 получится
даунгрейд A10 на A9 на A8 получится
даунгрейд A8 на A7 не получится
если блокируете загрузчик - на той же версии прошивки, на которой разблокировали, иначе -> кирпич
если блокируете загрузчик - прошиваете прошивку в fastboot (MiFlash) или flash_all_lock.bat своего региона
если стоит TWRP и Magisk, нельзя устанавливать обновления через ОТА -> бутлуп. Полную прошивку накатывать через или fastboot (лучше), или recovery
OrangeFox TWRP mod - можно устанавливать ОТА обновления (для Redmi 6/6A ?)
фиксация TTL есть в  стоковом ядре
фиксация TTL есть в кастомном ядре Cherry Kernel


https://www.kimovil.com/en/ подробное описание моделей тела в зависимости от региона выпуска
https://uberdeal.ru/10150-telefon-xiaomi-redmi-6-harakteristiki-obzor подробное описание характеристик и подробное описание что обозначают эти самые характеристики
https://xiaomishka.ru/xiaomi-codename-list codename кодовые имена смартфонов Xiaomi

https://c.miui.com
https://c.mi.com/miuidownload/detail?device=1700349 Latest MIUI последняя прошивка
https://www.mi.com/global/verify#/en/tab/imei проверить imei тела

https://xiaomifirmwareupdater.com/miui/cereus прошивки MIUI + Latest
https://xiaomifirmwareupdater.com/firmware/cereus
https://xiaomifirmwareupdater.com/vendor/cereus

https://mirom.ezbox.idv.tw/en/phone/cereus/roms-global-stable отозванные прошивки (Rolled back) отображаются
https://mirom.ezbox.idv.tw/en/phone/olivelite/roms-global-stable/
https://mirom.ezbox.idv.tw/en/phone/olivelite/roms-cn-stable/
https://mirom.ezbox.idv.tw/en/phone/olivelite/roms-in-stable/
https://mirom.ezbox.idv.tw/en/phone/olivelite/roms-eea-stable/
https://mirom.ezbox.idv.tw/en/phone/olivelite/roms-id-stable/
https://mirom.ezbox.idv.tw/en/phone/olivelite/roms-ru-stable/
https://xiaomifirmwareupdater.com/archive/miui/cereus         отозванные прошивки (Rolled back) никак не отображаются
https://xiaomifirmwareupdater.com/archive/miui/cactus
https://xiaomifirmwareupdater.com/archive/miui/olivelite
https://xiaomifirmwareupdater.com/archive/miui/dandelion
https://xiaomifirmwareupdater.com/archive/firmware/cereus
https://xiaomifirmwareupdater.com/archive/firmware/cactus
https://xiaomifirmwareupdater.com/archive/firmware/olive
https://xiaomifirmwareupdater.com/archive/firmware/olivelite
https://xiaomifirmwareupdater.com/archive/firmware/dandelion
https://xiaomifirmwareupdater.com/archive/vendor/cereus
https://xiaomifirmwareupdater.com/archive/vendor/olivelite
статистика использования мобильной платформы https://www.david-smith.org/iosversionstats/
обзоры
https://www.notebookcheck-ru.com
https://www.notebookcheck.net/Mediatek-Helio-P22-MT6762-SoC.354771.0.html
Part number(s), S-Spec: MediaTek Helio P22 Specs https://gadgetversus.com/processor/mediatek-mt6762d-helio-p22-specs/
https://www.gsmarena.com/
https://m.gsmarena.com/xiaomi_redmi_6-9237.php # review
https://m.gsmarena.com/xiaomi_redmi_6a-9217.php # review
https://www.mediatek.com/products/smartphones/mediatek-helio-p22
https://www.mediatek.com/products/smartphones/mediatek-helio-g25
Исходники:
platform https://github.com/xiaomi-mt6765/android_kernel_xiaomi_mt6765
device-tree https://github.com/xiaomi-mt6765/android_device_xiaomi_cereus
device-tree https://github.com/xiaomi-mt6765/android_device_xiaomi_cactus
kernel_O https://github.com/MiCode/Xiaomi_Kernel_OpenSource/tree/cactus-o-oss
kernel_P https://github.com/MiCode/Xiaomi_Kernel_OpenSource/tree/cactus-p-oss
vendor (libs) https://github.com/xiaomi-mt6765/proprietary_vendor_xiaomi
kernel_P https://github.com/MiCode/Xiaomi_Kernel_OpenSource/tree/olive-p-oss olive + olivelite
kernel_Q https://github.com/MiCode/Xiaomi_Kernel_OpenSource/tree/olive-q-oss olive + olivelite
kernel_Q https://github.com/MiCode/Xiaomi_Kernel_OpenSource/tree/dandelion-q-oss
kernel_R https://github.com/MiCode/Xiaomi_Kernel_OpenSource/tree/venus-r-oss


Global Stable (MI)
Russia Stable (RU)
China Stable (CN)
EEA (EU)
India (IN)
Indonesia (ID)












Установка кастомной прошивки
на теле стоит
| сток Redmi 6 3/32 | Android 8.1 O11019 | MIUI Global Стабильная 10.0.6.0 OCGMIFH | Версия ядра 4.9.77+ |




** A8.1
MIUI_10.0.6.0 сток глобальная стабильная
TWRP-3.3.0-0423-REDMI6-CN-wzsx150.img 22.4MB MD5: 10BA92031265BF7F2522FD750772F7B6
отключено шифрование /data
MTP не работает, использовать альтернативу adb pull/push
http://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=85045517
https://forum.xda-developers.com/redmi-6/development/share-3-3-0-twrp-redmi-6-custom-recovery-t3926225
Magisk-v18.0(18000).zip Stable 3.9MB MD5: A5F6FEBCE9A8D47BF8E76C9C1D043CED

** A9 ** A9-A10(Q) это "примерно" одно и то же
MIUI_10.4.4.0 сток глобальная стабильная. Последние релизы версий, TWRP, остальное - брать с шапки темы
https://xiaomifirmwareupdater.com/miui/cereus/
Redmi 6 Global Stable MIUI 10.4.4.0 PCGMIXM A9 fastboot 2019-09-27 2.0GB MD5: d8716e22a38544f8f8dc0b89e874f5c0
https://bigota.d.miui.com/V10.4.4.0.PCGMIXM/cereus_global_images_V10.4.4.0.PCGMIXM_20190927.0000.00_9.0_global_d8716e22a3.tgz
Redmi 6 Global Stable MIUI 10.4.4.0 PCGMIXM A9 recovery 2019-09-30 1.3GB MD5: 99304098F72C26CFFAAF942540E1407C
https://bigota.d.miui.com/V10.4.4.0.PCGMIXM/miui_HM6Global_V10.4.4.0.PCGMIXM_99304098f7_9.0.zip

boot_10.4.4.0_R6_mgsk_193.img 8.9MB MD5: 32E40383C3323E6667461E1E391C7A91
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=87853533
Magisk-v20.4.zip Stable 5.6MB MD5: 9503FC692E03D60CB8897FF2753C193F
Magisk-v19.3.zip Stable 5MB MD5: FD988114F753A4C530839A2B28F052C1
https://github.com/topjohnwu/Magisk/releases/
TWRP 3.5.0_9.0 Official
пароль на TWRP https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=89194178
/sdcard/TWRP/theme/ui.zip

TWRP 3.4.0-2 Official
использовать Альтернативный патч дешифровки /data A9. Обычный патч по какой-то причине не работает на OF и TWRP Official - DDE_by_MegaFon929.zip
только для вендоров A9. Прошивать его тоже нужно только на A9
поддержка F2FS
установка специальная из-за размера файла
установка через fastboot:
https://dl.twrp.me/cereus/
https://twrp.me/xiaomi/xiaomiredmi6.html
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=98095856
TWRP-3.3.1 F2FS Mod
Модификация TWRP 3.3.1 для работы с F2FS
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=93280492
TWRP-3.3.1-0602-REDMI6-CN-wzsx150.img 64MB MD5: BC4C312401318EF2A3D98B08FAD5A953
лучшая версия twrp 
порт TWRP A8.1
собран командой LR.Team на базе: 10.3.2.0@OCGMIXM
подходит для прошивки A9+
не подходит для прошивки <A9, <10.4.2.0, бутлуп, The system has been destroyed
отключено шифрование /data. Полностью
MTP должно работать
не дешифрует /data на китайских телефонах (China ROM)
В MIUI 11 (11.0.1.0+) изменили алгоритмы шифрования, поэтому нужно расшифровывать /data
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=91616740
https://4pda.ru/forum/dl/post/18137561/recovery-TWRP-3.3.1-0602-REDMI6-CN-wzsx150.img
OF OrangeFox Recovery
==== OF OrangeFox Unofficial новое 07.12.2020
стабильный релиз на базе TWRP: 3.4.0
на новом дереве устройства. Багов нет. тестируйте.
работает: Изменение Splash скрина (это первая версия, где это работает), AromaFM, Блокировка Recovery, Темы, Magisk Manager, Установка предлагаемой версии Magisk, Фонарик, Удаление пароля в системе, 
не работает: Управление приложениями
установка через fastboot:
OrangeFox-Unofficial-cereus.zip
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=102330816
==== OF R10.0_3-Stable Official старое
не закончено
поддерживает OTA
немного багованая версия
OrangeFox не дружит полноценно с f2fs, как было замечено опытом нескольких человек
установка через fastboot: (т.к. можно окирпичить тело, размер не стандартный не соответствует разделу)
fastboot erase recovery
fastboot flash recovery recovery.img
fastboot oem reboot-recovery
https://orangefox.download/en/device/cereus
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=94783584
==== PBRP 3.0.0 Official PitchBlack Recovery Project
только для вендоров A9
поддержка F2FS
данное Recovery базируется на TWRP 3.4.0 и на моё дерево устройства. Это значит, что будет работать всё так же, как и в TWRP Official
установка через fastboot:
https://pitchblackrecovery.com/cereus/
https://github.com/PitchBlackRecoveryProject/android_device_xiaomi_cereus-pbrp/releases/
https://sourceforge.net/projects/pbrp/files/cereus/
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=101216664
SkyHawk Recovery Project
устарело не рекомендуется к установке
Red Wolf Recovery -
Сборник recovery
https://androidfilehost.com/?a=show&w=files&flid=318170

Cherry Kernel vendor A9 10.4.4.0+ A64-AB-only
Кастомное ядро с улучшенной производительностью
Ядро собранное на исходниках Xiaomi с патчами Cherry Kernel
CherryKernel-Ionized-cereus.zip 11MB MD5: 6E54F59DBE418A003C4BF976791E33CB
https://cherrykernel.github.io/
https://github.com/CherryKernel/CherryKernelReleases/releases/download/stable/CherryKernel-Ionized-cereus.zip

twrp 3.5.0 с поддержкой динамических разделов, fastbootd и прочим для устройств вышедших на андройд 10 из коробки


GApps:
GApps смотреть в mR6.txt там подробнее
примерно как выглядят (GMS Google Mobile Services Сервисы Google для мобильных устройств)
Vanilla = -treble_a64_bvN.img.xz -a64-ab.img.xz
  GApps = -treble_a64_bgN.img.xz -a64-ab-GApps.img.xz
Pico  Google Package Installer, Google Play Services (полностью функциональные сервисы со всеми зондами внутри)
Nano  Google Package Installer, Google Play Services, Device Health Services, Google App (Search), Google Markup
Micro Google Package Installer, Google Play services, Device Health Services, Google App (Search), Gmail, Google Calendar, Google Pixel Launcher, Google Text-to-Speech, Google Wallpapers, Pixel Icons, Pixel Launcher (Faceunlock, FaceID работает)

OpenGApps ARM32-9-PICO сервисы Google. Open только сборочные скрипты установочных пакетов
https://opengapps.org
open_gapps-arm-9.0-pico-20191017.zip 91.7MB MD5: E6D38081E7F8D9E1413C470942F34D2E
https://sourceforge.net/projects/opengapps/files/arm/20191017/open_gapps-arm-9.0-pico-20191017.zip/download
open_gapps-arm-9.0-pico-20191123.zip 96.5MB
https://sourceforge.net/projects/opengapps/files/arm/20191123/open_gapps-arm-9.0-pico-20191123.zip/download
BiTGApps (есть аддоны) ARM-9 оптимизированный пакет gapps, оптимизированные версии, оптимизация расхода аккумулятора, низкое энергопотребление, минимальный размер 70-80-90MB
имеет все минимальные приложения Google, чтобы обеспечить полную функциональность Google сервисов
https://bitgapps.github.io
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=94888275
https://4pda.ru/forum/index.php?showtopic=970791
BiTGApps-arm-10.0.0-R4_signed.zip
BiTGApps-arm-9.0.0-R4_signed.zip
BiTGApps-arm-9.0.0-v0.2_signed.zip
NikGApps
https://sourceforge.net/projects/nikgapps/files/Releases/
FlameGApps если gapps выше не ставятся эти д. встать
https://sourceforge.net/projects/flamegapps/files/
mindthegapps

LineageOS for microG
https://lineage.microg.org
https://microg.org/fdroid/repo
https://downloads.nanolx.org/NanoDroid/Beta/
форк LOS с предустановленными/отдельно установленным NanoDroid gapps 5MB
microG осуществляет signature spoofing, т.е. "обманывает" приложения полагающиеся на Google, это специальные прошивки с предустановленным microG или установленные отдельно
Signature Spoofing
https://github.com/microg/android_packages_apps_GmsCore/wiki/Signature-Spoofing




** Обозначение кода стабильная прошивка:
** Обозначение кода девелоперская/бета прошивка:
** Обозначение кода GSI прошивка:
Обозначение кода стабильная прошивка:
MIUI 10.2.6.0 OCBMIXM
10 - версия MIUI. Остальные цифры, версия прошивки
O - версия Android (Oreo/A8 A8.1, Pie/A9, Q/A10)
CB - код модели смартфона (CB=Redmi 6A)
MI - тип прошивки (MI - глобальная, RU - российская, CN - китайская)
XM - статус блокировки SIM-карты (XM - разблок., VF - Vodafone, OR - Orange. Раньше обозначал код версии прошивки)
Обозначение кода девелоперская/бета прошивка:
MIUI 9.1.24
9 - год (2019)
1 - месяц (январь)
24 - день
Обозначение кода GSI прошивка:
ARCH_xyZ:
ARCH: arm, a64(arm32_binder64), arm64
x:
a - a-only
b - a/b
y:
v - vanilla (gapps нет)
g - gapps (встроены gapps)
o - gapps-go (встроены gapps-go)
f - floss (встроены free open source приложения вместо gapps)
Z:
N - без phh-superuser (без рута)
S - с phh-superuser (интегрирован phh-superuser)
arm64_avN: ARM64 A-only vanilla без gapps без рута







** Описание GSI, non-GSI прошивок:
GSI, non-GSI смотреть в mR6.txt там подробнее
https://4pda.ru/forum/index.php?showtopic=892755
Всё упирается в совместимость GSI и конкретного вендора - нет никакой 100% гарантии. Даже кастомные прошивки, заточенные вроде бы под конкретный девайс, порой намного глючнее GSI. Даже сам phh писал, что его AOSP спонтанно ребутается на некоторых Samsung-ах с exynos.
В любом случае, тестировать надо сначала без магиска (если без него стартует), и без сильных изменений системы. Так выше вероятность выявить причины сбоев, даже если они не решаются в виду проблем с вендором. Плюс не стоит забывать про баги в самом коде прошивки. Иногда включение какой-то кастомной опции в прошивке приводит к проблеме, и будет достаточно отключить её.
Зеркало всех актуальных прошивок:
https://myst33d.github.io/xiaomi-mt6765
Сборники прошивок. Прошивки прямиком из Индонезия. Индусы просто клепают порты:
non-GSI @nrudesu
RevengeOS-3.2 Q. crDroidAndroid-10.0 Q. potato-10 Q. Havoc-OS-v3.7 Q. ZenX-OS-v1.8 Q. Corvus_v8.0 Q. Xtended-XQ-v12.0 Q. AncientOS-CIVILIZATION-v3.9 Q. AncientOS-weeaboify-v3.9. RROS-Q-8.5.7 Q. Nitrogen-OS-10 Q. PE-10.0 PE+-10.0 Q. Bliss-v12.10 Q. AEX-v7.3-20200821 Q. EvolutionX_4.7-10.0 Q. ShapeShiftOS_Blaziken-1.2.1-10.0 Q. 
cereus https://sourceforge.net/projects/nrudesu-rom/files/cereus/
cactus https://sourceforge.net/projects/nrudesu-rom/files/cactus/
https://www.pling.com/u/nrudesu/
non-GSI @kokofriud
Arrow-v10.0 Q. MokeeOS-100.0 Q. DotOS-P-v666 A9. AIM-System-V4.1-Lucid Q. Hornbill-1.0-Jackfruit-10.0 Q. Gzosp-10.Stable.2.0 Q. MalluOS_Flavour-1.3-@Chicken Official Q LOS-based Made in Kerala.
cereus https://sourceforge.net/projects/godongteloprojects/files/cereus/
cactus https://sourceforge.net/projects/godongteloprojects/files/cactus/
non-GSI @kokofriud+freinds
BootleggersROM-Queue4-5.2 UNSHISHUFIED? Q. ColtOS-v6.5Euphoria Q. 
https://sourceforge.net/projects/kokofriudnfreinds/files/
non-GSI StagOS 10.0.7 Q. 
https://sourceforge.net/projects/azfasa15-boleds/files/



How to create an overlay?
https://github.com/phhusson/treble_experimentations/wiki/How-to-create-an-overlay%3F#wiki-pages-box
Официалы сидят тут:
AOSP. BlissROMs. CAOS. DescendantX. GoogleGSI. HavocOS.
https://github.com/phhusson/treble_experimentations/wiki/Generic-System-Image-(GSI)-list
https://4pda.ru/forum/index.php?showtopic=892755&st=0#entry71222655
GSI @phhusson AOSP A8.1 v25 v32. AOSP A9 v101 v123. AOSP A10 Q v200 v222. AOSP A11 R v300. 
https://github.com/phhusson/treble_experimentations/releases/
GSI @4pda.ru LOS LineageOS 17.1 A10 через fastboot без Magisk
https://4pda.ru/forum/index.php?showtopic=950105&st=1840#entry94329780
https://4pda.ru/forum/index.php?showtopic=912972&st=20380#entry93251112
GSI @skulshady HavocOS Official HavocOS-v2.6 v2.9-a64-aonly-Final A9. HavocOS-v3.4 v3.8 v3.12-Final Q. HavocOS-v4.1 v300.m R.
https://sourceforge.net/projects/havoc-os/files/a64-ab/
non-GSI @andrraarp Nusantara Project Official v1.1-Final Q. v2.5.1 R test. 
cereus cactus https://www.pling.com/u/andrraarp/
non-GSI @alanndz, @kry9ton, @najahi KomodoOS 2.0 Official v2.7 v2.9.2 Q. 
https://sourceforge.net/projects/komodos-rom/files/cereus/
GSI HavocOS-v3.11_gapps Q. PE+-v10.0. ZenX-v1.10_gapps. RR-v8.6.4_vanilla.
https://sourceforge.net/projects/androidgsi/files/
non-GSI @AdlinKousei
Havoc-OS-v4.1-20210219 R. BiancaProject-v1.3-16022021 R (LOS-based). exthm-10.0-20201225 520MB (LOS-based). FireHound-v4.7-20201224. HavocOS-v3.12-20201219. PE-9.0-20201208 748MB. HavocOS-v2.9-20201207 406MB. PE+-v10.0-20201205 820MB Q. FusionOS-1.3-10.0-20201204 462MB Q. BootleggersROM-Queue-5.3-Stable-20201203 552MB. Corvus_A10.5-Stable-02122020 613MB. Aospify-v1.2-20201201 417MB. Candy-10-Stable-20201130 545MB. PixysOS-v3.1.4-20201124 446.9 MB. AncientOS-CIVILIZATION-v4.0.1-Final-20201115-GApps 708MB. 
cereus https://sourceforge.net/projects/adlinkousei/files/cereus/ROMs/
cactus https://sourceforge.net/projects/adlinkousei/files/cactus/ROMs/

non-GSI @SamarV-121, @MegaFon929 LOS-v16.0-20200210 A9 400MB. LOS-v17.1-20200703 Q 438MB.
обновление сертификатов безопасности
https://samarv-121.github.io
https://github.com/SamarV-121/releases/tags
cereus https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=93804891
cactus https://4pda.ru/forum/index.php?showtopic=944463&view=findpost&p=93804868
https://github.com/xiaomi-mt6765/releases/releases/download/lineage-16.0-20191126-UNOFFICIAL-cereus/
GSI-unoff @andyyan by @Andy Yans LineageOS LOS 16 A9 UNOFFICIAL
https://sourceforge.net/projects/andyyan-gsi/files/lineage-16.x/lineage-16.0-20191017-UNOFFICIAL-treble_a64_bvN.img.xz 1Gb(распак).
GSI-unoff @andyyan by @Andy Yans LineageOS LOS 17.1 A10 UNOFFICIAL
https://sourceforge.net/projects/andyyan-gsi/files/lineage-17.x/lineage-17.1-20201114-UNOFFICIAL-treble_a64_bvS.img.xz 1Gb(распак).
GSI @eremitein by @zerovoid
CAOS based AOSP                 + phh Treble patches + /system/phh/secure Q v224-201029-360MB      . v300j R.
LOSQ based LOS       + Andy Yan & phh Treble patches + /system/phh/secure Q v224-201017-420MB v17.1.
crDRom based crDroid + Andy Yan & phh Treble patches + /system/phh/secure Q v224-201019-440MB v6.0+.
qiDroid based BootleggersROM    + phh Treble patches + /system/phh/secure Q v224-201021-440MB.
BLESS based BlissROM + Andy Yan & phh Treble patches + /system/phh/secure Q v224-201015-710MB.
bgZ-lite.img.xz bvZ-lite.img.xz R - Lite GSI Images - урезанные образы прошивок
Баги: за исключением фиксов, такие же, как на всех GSI Q, в некоторых случаях не работает трансляция на TV, звонки по BT не идут с некоторыми гарнитурами, не работает нормально офлайн зарядка на многих устройствах, проблемы с GPS итд.
GSI LOSQ нормальная, вроде как работают обновления по OTA
Платформа: LOS 17.1 (патчи от Andy Yan)
- тюниниг, исправлены опции, добавлены опции, 
- сертификацию проходит
- дополнительные фиксы для Mi A2 lite (никаких treble патчей после установки)
Внимание: прошивка полностью совместима с Treble-патчами, разница только в наличии файла /system/phh/secure. Если у вас LOS by Andy Yans запускается, а LOSQ - нет, то попробуйте удалить файл "secure".
https://github.com/eremitein/treble-patches/wiki/
https://sourceforge.net/projects/treblerom/files/
GSI @amber by @Igor~s @igors1974 
SuperiorOS-10-gsi. Bliss-v12.1-UNOFFICIAL 12.8-x Q 14.0. Syberia. ColtOS ColtOS-6.3 ColtOS-R-test. crDroid-v6.1 6.5 Q. LOS17.1. Optimized-LineageOS-17.1-amber-gsi. CesiumOS. StagOS 10.0.1 10.0.2. Omni. AEX. AICP. DureX-BETA. TitaniumOS. AOSiP AOSIP-11. MSM-Xtended v7 v8. ArrowOS. CandyRoms. PE+. PixelPlusUI-2.0. ion 2.5b 2.9a. AncientOS AncientOS-CIVILIZATION-v3.7 3.9 AncientOS-weeaboify-v4.0-Final. EvolutionX-4.20.2 4.4 4.6. Legion-v2.7. KomodoOS-2.5. Rebellion_OS-v1.9. ZenX-OS-v1.8 1.9. AOSP-11. RROS-Q. Nitrogen-10 Nitrogen-OS-11. 
https://amber-gsi.sourceforge.io/
https://sourceforge.net/projects/amber-gsi/files/
GSI @developerluke HavocOS-v3.2-A64AB Q. EvolutionX_4.0_A64AB Q.
https://sourceforge.net/projects/expressluke-gsis/files/
GSI EvolutionX Official EvolutionX-v4.1 v4.7-Final Q. EvolutionX-v5.1 R. Только под девайсы. GSI generic нет.
Баги: Менеджер шрифтов. Rootless Substratum (sysserv). 
https://sourceforge.net/projects/evolution-x/files/
GSI @EnesSastim PE PE+ A8.1. PE PE+ A9 2019-08-24-last. 
Баги: как и у AOSP A9. Обязательно патч сертификаций!
https://github.com/EnesSastim/Downloads/releases
non-GSI @Utkarsh AEX-v5.8 A8.1 352MB
Баги: устарела. Переходите на A9. Не работает разговорный динамик и USSD.
non-GSI @wulan17
AEX-v6.7-20200509-Final A9. AEX-v7.3-Final A10 Q. AEX-v8.0 A11 R. ZenX-OS 1.10 A10 Q. RR 8.6.3 Q. Floko-v2.0 454MB. Floko-v3.0 581MB. CesiumOS-v3.1 R.
cereus https://sourceforge.net/projects/wulan17/files/Cereus/
cactus https://sourceforge.net/projects/wulan17/files/Cactus/
https://www.pling.com/u/wulan17/
https://github.com/wulan17/builds/releases/ странная ссылка на билд прошивки это md5
https://wulan17.my.id
non-GSI @MegaFon929
https://4pda.ru/forum/index.php?showtopic=944463&view=findpost&p=104502142

стабильные на A8 AEX, AOSP. стабильные на A9 ArrowOS, AOSP, LOS, 
самые лёгкие @MegaFon929: AICP 14.0 A9, GZOSP A9, Validus A9
громкость рингтонов тихая A9 AEX, Bliss, CarbonRom, 






> команды для fastboot перезагрузка:
cmd # командная строка
adb # проверить работает adb
adb --version # проверить работает adb
adb devices # проверить подключено 1 устройство, драйвера adb установлены
adb reboot # перезагрузить в систему
adb reboot bootloader # перезагрузить в фастбут
adb reboot download # ? перезагрузить в ?
adb reboot edl # ? перезагрузить в edl разблокированный загрузчик
fastboot reboot # перезагрузить в систему
fastboot reboot oem # перезагрузить в систему
fastboot oem reboot-recovery # перезагрузить в рекавери
fastboot reboot-bootloader # перезагрузить в фастбут
fastboot reboot edl # ? перезагрузить в edl разблокированный загрузчик
fastboot oem edl # ? перевести тело в edl Qualcomm
fastboot erase recovery # стереть раздел recovery
fastboot --disable-verity --disable-verification flash vbmeta vbmeta.img # dm-verity. отключить проверки AVB (Android Verified Boot). Команда работает если platform-tools_28.0.0+ ИЛИ
fastboot flash vbmeta vbmeta-zero.img # dm-verity. отключить проверки AVB. Прошить патченое vbmeta-zero.img в раздел vbmeta (можно прошить через фастбут или через рекавери). После смены vbmeta сделать формат data
==== Замена vbmeta стоковый <-> патченый требует формата data, патченый требуется если не совпадают контрольные суммы разделов, а это
- установка кастомных прошивок (на R6/6A не надо, на R8A надо, на R9A надо)
- установка кастомных рекавери (не относится к официальным twrp и orangefox, с ними патченый vbmeta не нужен. Если Рекавери собрано из исходников не требует прошивки патченого vbmeta).
На стоке, не нужен патченый vbmeta.

fastboot getvar current-slot # "ТРУ" A/B определить активный слот (по умолчанию обычно A)
fastboot set_active a # "ТРУ" A/B установить активный слот A
fastboot set_active b # "ТРУ" A/B установить активный слот B
fastboot flash boot_a boot.img # "ТРУ" A/B прошить boot.img в слот boot_a
fastboot flash boot_b boot.img # "ТРУ" A/B прошить boot.img в слот boot_b




- если важно качественные снимки, кастомы не ставить. Снимки плохого качества. cam1api. Ставить сток.
- если важно полноценный рут, ковырять систему, патчить в LP apk, кастом на A8.1. но Присутствуют баги, смотреть в посте с прошивкой.
- если важно полноценная прошивка на повседневку, кастом на A9.  Присутствуют общие баги для A9 VoLTE.
- если важно полноценная прошивка на повседневку, кастом на A10. Присутствуют общие баги для A10 VoLTE и присутствуют баги с которыми можно мириться ради нового Андроида (дёргается глючит видео в ютубе, вк, кодеки сломаны).

вендор V11.0.5.0.PCGMIXM A9 глобал      1.5 GB 2020-09-22 - зеленит видео, баги, поломана
вендор V11.0.4.0.PCGMIXM A9 глобал норм 1.5 GB 2020-06-03 + последняя security patch May 2020
вендор V11.0.3.0.PCGMIXM A9 глобал норм 1.5 GB 2020-04-02 +
вендор V11.0.2.0.PCGMIXM A9 глобал норм 
вендор V11.0.1.0.PCGMIXM A9 глобал норм 
вендор V10.4.4.0.PCGMIXM A9 глобал норм +
вендор V10.4.3.0.PCGMIXM A9 глобал отозвана 
вендор V10.4.1.0.PCGMIXM A9 глобал отозвана 
вендор V10.3.6.0.OCGMIXM A8.1 глобал норм 

** ИНСТРУКЦИЯ ПО УСТАНОВКЕ КАСТОМНОЙ ПРОШИВКИ LineageOS 16.0 A9 non-GApps для Redmi 6A полностью аналогична Redmi 6
** ИНСТРУКЦИЯ ПО УСТАНОВКЕ КАСТОМНОЙ ПРОШИВКИ LineageOS 16.0 A9 non-GApps для Redmi 6 (пользовательская, неофициальная)
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=97457369 by MegaFon929
> ? <- ВНИМАНИЕ! это проблемный момент сам не знаю конкретно!
> ? проверить LinegeOS 16.0 A9 (Android 9) non-GApps A64_A/B non-GSI Unofficial-Treble Odex чистая операционная система без GApps на базе AOSP A9 с надстройкой в виде различных мелких улучшений и патчей. Автор: SamarV-121 + MegaFon929. Стабильная, проверенная. ROOT есть - Magisk. 
> БАГИ:
> - VoLTE: интернет по 4G есть, звонки по 4G нет. На Mediatek почти что невозможно завести VoLTE на кастомах.
> - Камера: снимки не чёткие, блеклые, высокая зернистость, шум, ничего нормально нет. Снимки снимает. Видео снимает. Звук записывает.
> - Будильник: в выключенном состоянии не будит/звонит.
> - Громкость голоса собеседника уже принятого звонка, нельзя увеличить-уменьшить (A9 нет бага, A10 есть баг).
> - Громкость рингтона во время входящего звонка, при его изменении, рингтон сразу становится беззвучным (A9 A10 есть баг).
> - (фикс) Громкость динамика: громкость достаточна, но хотелось бы ещё громче.
> - (фикс) Сканер отпечатка пальца: нажимаем сканер - что-то нажимается в рабочей системе.
> - рут: не полноценный рут, ковырять system в twrp. Рут - это twrp.
> - режим чтения. Работает.
> - 
>
> Кастомная прошивка: рекламы, аналитики, слежения, трекинга, гаппсов, багов, лагов прочей нечисти нет. Одинаковый интерфейс Material design. Тёмная/чёрная тема для всего интерфейса. Data расшифрована. Простота/лёгкость переустановки/обновления. Свой Маркет F-Droid. Чистая ОС. Бутлупов нет. Кирпичей нет.
>
> Для прошивки кастома проходим поэтапно не задерживаясь на определённой версии прошивки MIUI. В twrp-Advanced-File Manager зайти проверить: прошилась система, отформатировались данные, вайп (удалились) данные, удостовериться наверняка что выполнено. Пока находитесь в twrp проблем не будет. В основном проблемы при прошивке возникают в конце при перезагрузке в свеже-установленную прошивку.
> Устанавливаем через кастомное twrp (twrp-3.3.1 A9 с отключённым шифрованием), нужна внешняя карта памяти microSD на >=2Gb (возможно не обязательна).
> Если уже стоит MIUI_10.4.1.0+ A9 или MIUI_11.0.1.0+ A9 обновлять апгрейд (или даунгрейд) до MIUI_10.4.4.0 A9 не обязательно, главное чтобы стояла MIUI прошивка на A9 (вендор) - для кастомов на A9, на A10. Но желательно чтоб стояло обновлённое firmware (обновлённый вендор).
> MIUI_10.0.6.0 A8.1 -> fastboot прошить twrp 3.3.0 A8.1 -> Перезагрузить из fastboot в twrp -> Перезагрузить из twrp в twrp -> twrp прошить MIUI_10.4.4.0 A9 + twrp 3.3.1 A9 -> Перезагрузить из twrp в twrp -> twrp прошить любую кастомную прошивку из новых по инструкции + GApps (если надо) + patch_boot (если надо) + Magisk 19.3 A9 или Magisk 20.4 A10 (если надо) -> Перезагрузить из twrp в twrp -> Перезагрузить из twrp в system
> Зарядить тело до 100%. Использовать оригинальный USB-кабель, качество кабеля сильно влияет. Подключить в порт USB 2.0, в материнку (не в дополнительный разъём), извлечь лишние устройства из соседних разъёмов (напр. BT-свисток, модем)
> MIUI_10 A8.1 разблокировать загрузчик MiFlashUnlock, если не разблокировать - кирпич или не прошъётся, если разблокировать - сброс к заводским настройкам (hard reset), удалятся все данные с тела, в т.ч. пользовательские
> MIUI_10 A8.1 обычный запуск, при загрузке тела на бутанимации отображается "открытый замочек" и надпись unlock (загрузчик разблокирован)
>
> logcat на ПК:
> после прошивки прошивки перед загрузкой в новую систему получить logcat.txt на ПК: отладка при загрузке, например во время бутлупа.
adb logcat > logcat.txt
>
> Перед манипуляциями с прошивками с уже разблокированным загрузчиком:
> Делать бекап перед ЛЮБЫМ изменением прошивки: обязательно!
> - Сделать бекап OEM (заводских) разделов или через twrp, или через скрипт ADB
> - Сделать бекап контактов номеров телефонов (Contacts.vcf), журнал вызовов (Calls), SMS, MMS, напоминаний календаря (сохранить в текстовой форме, в картинках, в облаке, опция экспорт в настройках приложения), итп
> - Сделать бекап sdcard пользовательское хранилище (internal storage) видео, аудио, документы, текстовые файлы, фотографии итп
> - Сделать бекап пользовательских приложений (настроек приложений) ещё в рабочей системе (скрины настроек, экспорт в настройках)
>
> Сделать рекомендации на MIUI прошивке перед началом прошивки:
> - Получать рекомендации-выкл (просто откл. рекламу)
> - Настройки-поиск-поиск wi-fi-выкл (просто откл. поиск wi-fi)
> - Удалить данные лица, отпечатки пальцев, пароль/код/графический ключ на блокировку телефона
> - Выйти из аккаунтов синхронизации Google, итп:
> Настройки-Синхронизация-выбираем аккаунт-Ещё-Удалить аккаунт
> Настройки-Синхронизация-выбираем аккаунт-выбираем аккаунт-Ещё-Удалить аккаунт
> - Отвязать устройство от Mi аккаунта, нужен пароль от аккаунта (если привязан): отключить поиск устройства, Удалить аккаунт синхронизации Xiaomi Мi Cloud, Удалить Mi аккаунт с девайса
> - Режим разработчика-Статус Mi Unlock-Разблокирован
> - Режим разработчика-Отладка по USB-ВКЛ (советуют для самоуспокоения включить, подтвердить отладку для ПК. Проверить тем самым соединение и способность USB-кабеля передавать данные). Плюс сам ещё включил 2 пункта ниже связанных по смыслу с отладкой
> - Режим разработчика-Установка через USB-ВКЛ (можно не включать)
> - Режим разработчика-Отладка по USB (Настройки безопасности)-ВКЛ (можно не включать)
> - Режим разработчика-OEM разблокировка-ВКЛ (отключить FRP на стоке) (можно не включать)
>
> Прошивка кастомное рекавери A8.1 twrp
> тело в fastboot, через ПК с установленным ADB/FASTBOOT с установленными ADB драйверами под учёткой Админ в командной строке запущенной из папки ADB прошиваем A8.1 twrp recovery.img скриптом twrp-installer.bat
> команды скрипта twrp-installer.bat:
adb reboot bootloader # перезагрузить в фастбут (если тело ещё не в фастбут)
fastboot # проверить работает фастбут
fastboot --version # проверить работает фастбут
fastboot devices # проверить подключено 1 устройство, драйвера adb установлены
fastboot getvar unlocked # проверить разблокированный загрузчик MTK
fastboot oem device-info # проверить разблокированный загрузчик Qualcomm
fastboot boot recovery.img # загрузить рекавери не прошивая ничего в раздел recovery. Держать Громкость+ на перезагрузке до загрузки в рекавери. После перезагрузки будет всё без изменений
==== дальше идут команды которые уже влияют на раздел recovery. Не использовать пока twrp нормального не будет. Если twrp собрано должным образом, можно использовать
fastboot flash recovery recovery.img # прошить кастомное рекавери A8.1 twrp в раздел recovery
fastboot oem reboot-recovery # перезагрузить в рекавери ИЛИ
fastboot boot recovery.img # загрузить кастомное рекавери twrp которое только что прошили. Держать Громкость+ на перезагрузке до загрузки в рекавери
> после прошивки A8.1 recovery.img на начальной прошивке A8.1 Global Stable MIUI_10.0.6.0 и ввода последней команды на загрузку в рекавери, начнётся перезагрузка в twrp, загрузчик не поддерживает команду подгрузки sideload - как только пошла перезагрузка постоянно зажать Громкость+, тело провибрирует несколько раз до splashscreenlogo, держать пока не загрузится рекавери - отпустить Громкость+ (снять чехлы аксессуары итп с тела для удобства)
> если загрузка не началась - самому выключить тело, перезагрузить в recovery зажать кн. Питание и Громкость+ - после вибро отпустить Питание, Громкость+ держать пока не загрузится в twrp (может грузануться в систему, и начинать прийдётся сначала по новой прошивать recovery.img)
> twrp 1 способ просто Перезагрузить из twrp в twrp (чтоб не слетало на стоковое, если слетело на стоковое после загрузки в систему и повторной загрузки только уже в стоковое recovery, по новой прошить A8.1 recovery.img)
> twrp 2 способ Mount /System, /Vendor. twrp-Advanced-Sign Boot (чтоб не слетало на стоковое). Перезагрузить из twrp в twrp
> twrp 3 способ twrp-Advanced-Terminal переименовать/удалить файл system_root/system/recovery_fromboot.p (чтоб не слетало на стоковое). Перезагрузить из twrp в twrp
> twrp РУТ Mount /System, /Vendor (косяк twrp, нужно делать вручную, в новых релизах исправлено). Install patch_boot.img (не надо). Install Magisk-v18.0.zip (Magisk патчит boot сам)
> Если в twrp ошибки (красные строки): Install Magisk fail. Перезагрузить из twrp в twrp. Install Magisk по новой или другое повторно
> Т.к. структура разделов устройства Redmi 6/6A на A8.1 - ARM-A-only. Magisk может пропатчить boot сам
> twrp НЕТ РУТ ничего не надо делать
> twrp Перезагрузить из twrp в system
> MIUI_10 A8.1 кастомное twrp установлено
> MIUI_10 A8.1 обычный запуск, ставил РУТ должно установиться приложение Magisk Manager, подождать немного, если не установится попробовать перезагрузить
>
> Прошивка стоковой прошивки MIUI_10.0.6.0 A8.1 - MIUI_10.4.4.0 A9
> twrp wipe делаем пункт2
> 1. Для обновления прошивки:
> twrp wipe Dalvik Cache, Cache, (можно System, во избежания глюков)
> 2. Для всего остального:
> twrp wipe Dalvik Cache, Cache, System
> twrp wipe Format Data (yes). Перезагрузить из twrp в twrp, должна смонтироваться новая Data
>
> описание:
> Dalvik Cache=/data/dalvik-cache/, Cache=/data/cache/, Format Data (yes)=/all_data=/data+/sdcard(userdata), wipe Data (исключив internal data)=/data без /sdcard
> Factory Reset (Hard Reset)=wipe Swipe=wipe Dalvik Cache, Cache, Data - тело как с завода, как с упаковки
> wipe - удаляем/стираем данные в разделе (команда rm -r *)
> Format - форматируем данные в разделе, удаляются данные, сам раздел и стандартный пароль шифрования data (команда format)
> System и System_image - тот же /system только в виде образа, отображается обычно только в меню бэкапа/восстановления, используется для прошивки .img прошивок
> Зачем вайпать Dalvik Cache, Cache если они входят в Data?
> Это универсальная инструкция. Чтобы подходила для всех. Cache может быть отдельным разделом, а не симлинком на Data. Dalvik Cache при очистке Data можно и не выбирать, там не форматирование, а просто удаление, т.е. если папки нет или в ней пусто, то и удалять ничего не будет.
>
> прошить прошивку или через twrp:
> twrp Install A9 recovery MIUI_10.4.4.0.zip. Install A9 recovery.img. Перезагрузить из twrp в twrp.
> прошить прошивку или через fastboot:
> использовать прошивку A9 fastboot MIUI_10.4.4.0.tgz распакованная 2 раза
> fastboot 1 способ прошить прошивку через MiFlash - clean all без блокировки загрузчика ИЛИ прямо через скрипт flash_all.bat в папке с прошивкой скопировав туда файлы ADB/FASTBOOT без блокировки загрузчика. Удалить скрипт lock: flash_all_lock.bat, flash_all_lock.sh чтобы не провтыкать и не на тот скрипт нажать
> команды скрипта д. дойти до конца без ошибок (не тормошить, не выдёргивать кабель, обеспечить бесперебойное питание ПК, ждать ~5-15 мин)
> fastboot прошиваем A9 recovery.img
> команды скрипта twrp-installer.bat:
fastboot reboot-bootloader # перезагрузить из фастбут в фастбут (на всякий случай)
fastboot flash recovery recovery.img # прошить кастомное рекавери A9 twrp в раздел recovery
fastboot oem reboot-recovery # перезагрузить в рекавери
>
> прошивал прошивку MIUI_10.4.4.0 и twrp через twrp
> twrp 1 способ просто Перезагрузить из twrp в twrp (чтоб не слетало на стоковое, если слетело на стоковое после загрузки в систему и повторной загрузки только уже в стоковое recovery, по новой прошить A9 recovery.img)
> twrp 2 способ Advanced-Sign Boot (чтоб не слетало на стоковое). Перезагрузить из twrp в twrp
> twrp 3 способ twrp-Advanced-Terminal: переименовать/удалить файл system_root/system/recovery_fromboot.p (чтоб не слетало на стоковое). Перезагрузить из twrp в twrp
> twrp РУТ Install A9 patch_boot_10.4.4.0.img (надо). Install Magisk-v19.3.zip или Magisk-v20.4.zip (без разницы работают оба)
> Если в twrp ошибки (красные строки): Install Magisk fail. Перезагрузить из twrp в twrp. Install Magisk по новой или другое повторно
> Т.к. структура разделов устройства Redmi 6/6A на A9 - SAR (system as root) A64_AB - это значит что структура разделов A-only, структура директорий A/B. Под устройство подходят кастомные прошивки A64_AB. Magisk не может пропатчить boot сам. Надо пропатченый boot от своей версии глобальной прошивки MIUI (вендор). Патчится boot вручную или скачивается готовый под определённую версию MIUI
> twrp НЕТ РУТ ничего не надо делать
> twrp Перезагрузить из twrp в system
> MIUI_10 A9 установлена
> MIUI_10 A9 первичный запуск, первичная настройка, подождать некоторое время, допустим 5 мин до и после первичной настройки, система устаканится. Сразу отключить в шторке активные сервисы. В систему MIUI_10 можно не загружаться, если сразу же в twrp, будете прошивать кастом.
> MIUI_10 A9 ставил РУТ, первичную настройку системы прошёл
>
> MIUI_11 Если уже стоит MIUI_11:
> MIUI_11 Шифрует раздел /data. MIUI_10 - нет?. Если Вы ставите кастом, то форматирование раздела /data Format Data (yes) убирает шифрование, пока не загрузитесь в систему MIUI, раздел не зашифруется. Кастомы не шифруют раздел /data.
>
> Прошивка кастомной прошивки MIUI_10.4.4.0 A9 - LOS_16.0 A9
> twrp wipe делаем пункт2
> twrp wipe Dalvik Cache, Cache, System
> twrp wipe Format Data (yes). Перезагрузить из twrp в twrp, должна смонтироваться новая Data
> twrp Install DIS_FORCE_ENCRYPT_PIE.zip (принудительно отключить шифрование MIUI в twrp перед прошивкой кастомной прошивки)
> twrp wipe Format Data (yes). Перезагрузить из twrp в twrp, должна смонтироваться новая Data (неоднократно в инструкции говорится. Сделать подготовительный этап. Перед прошивкой кастома. Делать только первый раз при переходе со стока на кастом)
> twrp Install A9 LOS_16.0.zip (Если OS.zip шить в /System. Если OS.img шить в /System_Image или через fastboot). В прошивке уже есть свой boot
> twrp РУТ Install patch_boot.img (не надо). Install Magisk-v19.3.zip или Magisk-v20.4.zip (без разницы надо прошлое затрётся). Перезагрузить из twrp в twrp
> Если в twrp ошибки (красные строки): Install Magisk fail. Перезагрузить из twrp в twrp. Install Magisk по новой или другое повторно
> twrp НЕТ РУТ ничего не надо делать
> Патчи ставить до загрузки в систему (советуют, можно и после загрузки в систему):
> (фикс) twrp Install Certification+Patch_a64_ab.zip
> (фикс) twrp Install Permissiver_v4.zip
> (фикс) twrp Install Max_Volume_Speaker+Headset_Patch.zip
> (фикс) twrp Install Fingerprint_Scanner_Patch.zip
> (кастомное ядро) twrp Install A9 CherryKernel-Ionized-cereus.zip (если ставите, ставьте перед установкой Magisk)
> twrp Перезагрузить из twrp в twrp
> twrp wipe Dalvik Cache, Cache. Перезагрузить из twrp в system. Проверить изменения внесённые фиксом
> LOS установлена
>
> ? LOS первичный запуск, тело перезагрузится перед первичным запуском
> LOS первичный запуск, первичная настройка, подождать некоторое время, допустим 5 мин до и после первичной настройки, система устаканится. Сразу отключить в шторке активные сервисы
> LOS Перезагрузить из system в system (советуют)
> LOS ставил РУТ должно установиться приложение Magisk Manager, подождать немного, если не установится попробовать перезагрузить (список приложений свайп из самого низу и вверх)
> LOS обычный запуск, проверка работоспособности всех компонентов: вставить sim в sim1 позвонить, вставить sim в sim2 позвонить, wi-fi, точка доступа wi-fi, пароль точки доступа wi-fi, bluetooth, bluetooth наушники, обычные наушники, кнопки наушников, Камера1, Камера2, USB-модем, фонарик, Отладка по USB ВКЛ, ИК-порт (если есть), датчики, GPS, вкл. мобильный интернет проверить скорость с вкл. wi-fi и выкл. wi-fi (можно и по позже), etc
> LOS окончательная настройка интерфейса
>
> Прошивка/обновление с одного кастома на другой кастом LOS_16.0 A9 - AEX_6.7 A9
> Бекап ещё в рабочей системе @Migrate_3.1.1 (A9, A10), @Titanium Backup
> twrp wipe делаем пункт2
> Всё-таки лучше делать пункт2. Могут остаться баги прошлой прошивки, могут появиться новые от новой прошивки, наложатся друг на друга. Рандомный результат. Идеальный вариант - полная чистая установка. Прошивать поверху не рекомендуют. Прошить с нуля и всё - ок.
> twrp wipe Dalvik Cache, Cache, System, Data (исключив internal storage). Перезагрузить из twrp в twrp. Форматировать через Format Data (yes) не надо. Кастом не шифрует раздел /data
> twrp Install A9 AEX-v6.7.zip (в прошивке уже есть свой boot)
> (фикс) twrp Install AospExtended-v6.7-fix_ril_aex.zip
> twrp Install CherryKernel-Ionized-cereus.zip. Magisk-v20.4.zip. Перезагрузить из twrp в twrp
> Патчи ставить до загрузки в систему (советуют, можно и после загрузки в систему):
> (фикс) twrp Install Certification+Patch_a64_ab.zip (не обязательно)
> (фикс) twrp Install Permissiver_v4.zip (для A9  GSI, если бутлуп после прошивки GSI и для др. вещей, не обязательно)
> (фикс) twrp Install Permissiver_v5.zip (для A10 GSI, если бутлуп после прошивки GSI и для др. вещей, не обязательно)
> (фикс) twrp Install Max_Volume_Speaker+Headset_Patch.zip (не надо)
> (фикс) twrp Install Fingerprint_Scanner_Patch.zip (надо)
> (фикс) twrp Install magisk-riru-v21.3.zip. EdXposed-SandHook-v0.4.6.2-release.zip. Доустановить уже в рабочей системе @EdXposedManager-4.5.7-release.apk. Перезагрузить из system в system, загрузка м.б. ~15 мин. Проверить EdXposed Manager (не обязательно)
> twrp Перезагрузить из twrp в twrp
> twrp wipe Dalvik Cache, Cache. Перезагрузить из twrp в system. Проверить изменения внесённые фиксом
>
> AEX первичный запуск, анимация загрузки AEX. Подождать ~15 мин. Чтоб наверняка удостовериться, система не загружается
> AEX держать кн. Питание до перезагрузки
> AEX первичный запуск, анимация загрузки AEX. Подождать ~5 мин. Система должна загрузиться после перезагрузки, если не загружается:
> twrp 1 способ Install DIS_FORCE_ENCRYPT_PIE.zip. Перезагрузить из twrp в system
> twrp 2 способ wipe Format Data (yes). Перезагрузить из twrp в system
> AEX установлена
>



Инструкция одна для всех сяоми с небольшими нюансами под каждый аппарат в основном это разблокировка загрузчика и прошивка рекавери командой fastboot flash recovery recovery.img. Если тврп рекавери официальное то перезагрузка в него и прошивка magisk, если не официальное то ещё vbmeta патченый прошить нужно.

Wipe Format Data-Yes
Advanced RM Forceencrypt + Remove DMVerity Remove Forceencrypt
Wipe Format Data-Yes

vendor устанавливается только на предустановленную систему и дешифрованный раздел data
fastboot erase vendor
fastboot flash vendor vendor.img
fastboot -w
fastboot reboot

HavocOS 2.9 A9 ARM-A -> HavocOS 2.9 A9 A64-AB (R6A)
https://4pda.ru/forum/index.php?showtopic=944463&view=findpost&p=89175815
Понадобится: Прошивка A64-AB (подойдёт AOSP), Havoc A64-A, Magisk.
Установка:
Заходим в TWRP
Format data
Wipe Davlik, system, cache
Прошиваем образ Havoc в system image
Монтировать > system
Из проводника копируем system_root в /sdcard/
Переименовать system_root в system
Wipe system
Прошиваем прошивку a64-AB
Монтировать > system
Заходим в system_root
Удаляем папку system
Заходим в /sdcard/
Копируем system
Заходим в system_root и вставляем
Ставим ROOT
Ставим гаппсы (по желанию)
Дополнительно > отключить шифрование
Format data
Баги:
- Шифрование (не точно)
- Регулятор громкости во время звонка
- Редко вылетает system ui














DIS_FORCE_ENCRYPT_PIE.zip патчит /vendor, лезет в /vendor/etc/fstab.mt6765.
Magisk патчит /boot, находится в /data, /persist (не важно).
Certification+Patch+a64-ab.zip патчит /system/build.prop, /vendor/build.prop.
Permissiver_v4.zip A9  лезет в /boot, /vendor. SeLinux=Permissive.
Permissiver_v5.zip A10 лезет в /boot, /vendor. SeLinux=Permissive.
Max_Volume_Speaker+Headset_Patch.zip лезет в /vendor.
Fingerprint_Scanner_Patch.zip лезет в /system.
EdXposed лезет в ? , /persist (не важно).

ошибка "E:Unable to decrypt FBE device" в twrp в самом начале, перед прошивкой.
Это нормально, когда был сделан Format Data (yes), но система ещё ни разу не загружалась. Типа нечего расшифровывать пока что, ведь даже ключ ещё не создался, система ведь не грузилась ещё.

** ВОПРОС - ОТВЕТ by MegaFon929
- Редактировать систему
Только через TWRP. Редактирование системы через запущенное устройство не работает. Из этого сдедует, что не работают некоторые программы: Lucky Patcher, Root Explorer в режиме Root практически не имеет смысла
- Поставить Google Camera (для работы GC нужно чтобы работало GSF)
Никак. Нет и не будет, так как у нас MTK. Есть некоторые сборки, которые у нас запускаются, но смысла от них никакого нет
- Поставить MIUI Camera
Качество фото. Прошивка тут не при чём. Размер матрицы, а точнее одного пикселя определяет качество.
Отключить "улучшалки". Попробовать моды камеры с отключённым шумодавом. Google Camera Go ночной режим?
тест Camera2API: Camera2+Probe.apk, Camera2API_test.apk
MIUI-09-Camera-700.zip Magisk port Camera Mi A1 v7 https://4pda.ru/forum/index.php?showtopic=843632&view=findpost&p=83182146
- R6  - не устанавливается, не работает
MIUI-10-Camera-920.zip Magisk port Camera Mi A2 v9.3 https://4pda.ru/forum/index.php?showtopic=843632&view=findpost&p=83134850
- R6  - не устанавливается, не работает
MiuiCamera_universal_port_v0.03.apk https://4pda.ru/forum/index.php?showtopic=843632&view=findpost&p=79833518
- R6  - 
Google Camera Go
- R6  - 
порт с Mi2 Lite Magisk
- R6  - 
Mi_A2_Camera_app_port-v3.zip https://4pda.ru/forum/index.php?showtopic=944463&view=findpost&p=85310704
- R6  - 
MIUI_Camera_2.0 для кастомов A9, A10, A11 @Telegram
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=104551871
- R6  - говорят работает вроде
ANXCameraUnity_180.ImpoliteMediumIberiannase.zip - последняя A9
- R6  - Camera2API нет.  не устанавливается. не работает.
- R6A - Camera2API нет.  не устанавливается. не работает.
- R8A - Camera2API есть. устанавливается. работает. HDR. AI. Фильтры. Панорама (ошибка создания файла). Снимки нормального качества.
Какого-то супер качества по сравнению с другими камерами (R8A) на кастоме не увидел, Footej Camera снимает так же, com.android.camera2 (встроенная) снимает так же.
Footej Camera https://4pda.ru/forum/index.php?showtopic=747784
- R6  - Camera1API. работает. Снимки плохого качества.
- R6A - Camera1API. работает. Снимки плохого качества.
- R8A - Camera2API. работает. Снимки нормального качества.
Обзор фото-приложений Huawei Nova (разные приложения камер) https://4pda.ru/forum/index.php?showtopic=893278&view=findpost&p=76613821
- Запись экрана
Footej Camera
system/product/priv-app/OPScreenRecorder
https://4pda.ru/forum/index.php?showtopic=968996&view=findpost&p=96018281
- Поставить ViperFX
Нет, после установки перестают работать важные функции смартфона (входящие звонки, смс итд). Исключение: сток MIUI
- Поставить TWRP
лучшее A9 recovery-TWRP-3.3.1-0602-REDMI6-CN-wzsx150.img LR Team
- Какую прошивку лучше всего поставить
Все Non-GSI Android 9.0. Non-GSI хорошо работают только на A9
- Какие обязательные требования для установки прошивок
A9 MIUI 10.4.1.0 и выше. Версия после 10.4.1.0 не обязательна
- Поставить прошивку на ARM64
Никогда. Нет, так как MTK не выложили исходники ядра для mt6762m (Redmi 6A). Если и были бы, то никто бы из разработчиков не стал бы рисковать своим смартфоном и получать кирпич, который можно восстановить только при помощи сервисного аккаунта. Кстати да, ни у кого из разработчиков нет Redmi 6
- Какую установить прошивку GSI
Рекомендуется ставить образы A9 A64-AB. Рекомендуется ставить Non-GSI прошивку.
- Какую установить прошивку Non-GSI
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=97457369
Проблема с кодеками на Non-GSI A10.
Драйвера GPU PowerVR закрыты, и Vulkan не будет. Переносить/портировать драйвера на тело никто не будет.
https://www.imaginationtech.com/powervr-gpu/ge8320/
- Лучшая прошивка для игр
Покупка нового смартфона
- Когда почините VoLTE
Разрабочики стараются, но ничего не получается. К сожалению способа его починить не существует и вряд ли появится.
VoLTE - технология передачи голоса по сети LTE, основанная на IP Multimedia Subsystem. Позволяет предоставлять голосовые услуги и доставлять их как поток данных по LTE.
- Какие отличия VoLTE и LTE
LTE - стандарт мобильной высокоскоростной передачи данных. Высокоскоростной мобильный интернет, работает на нём.
VoLTE - только звонки, которые работают в LTE (сервисы IMS). Оператор д. поддерживать услугу VoLTE (вкл. в личном кабинете), в теле д.б. включена функция.
LTE 2MB
3G 300kB
- Внешний эквалайзер
Установка Viper4Android сток (R6) https://4pda.ru/forum/index.php?showtopic=994598&view=findpost&p=97799420
AML-v3.5. Viper4Android FX v2.7.1.6. 
Установка ViperFX Non-GSI (R6A) https://4pda.ru/forum/index.php?showtopic=944463&view=findpost&p=104011043
A9 AML-v2.4. ViPER4Android_FX_Legacy-v4.4(86). vendor_overlay.zip
Dolby Atmos.
Dolby Atmos там есть для всех андроидов, но нужно тестить.
Dolby Surround.
James DSP!
(R8A) Ainur JamesDSP. Audio Compatibility patch. Audio Modification Library.




















** ПАТЧИ ПОДХОДЯТ ДЛЯ LOS
Для деактивации патчей типа шифрование/DT2W/громкость_звонка требуется переустановка /vendor (прошить бекап в twrp, прошить firmware, прошить MIUI прошивку соответствующей версии)

Все фиксы для прошивок тут (R7A) https://4pda.ru/forum/index.php?showtopic=964578&view=findpost&p=93070476
GSI вылетают тяжеловесные игры (R7A) https://4pda.ru/forum/index.php?showtopic=964578&view=findpost&p=97732964
Фикс основных проблем GSI (R8) https://4pda.ru/forum/index.php?showtopic=978342&view=findpost&p=93224258

Патч для отключения защиты от записи во все разделы (R6A)
https://4pda.ru/forum/index.php?showtopic=912972&view=findpost&p=103619115
В раздел /proinfo в определённое место 350-357 (или 0000015E-00000165) записать "31232700" (без кавычек, atm_key)
- бекап /proinfo
- прошить патч отключения DISABLE_WP_MTK.zip, ENABLE_WP_MTK.zip
В теории, патч подходит для большинства устройств MTK, где есть защита от записи, т.к. используется стандартный ключ.

Не работают проводные наушники разъём под наушники (R9)
https://4pda.ru/forum/index.php?showtopic=1009464&view=findpost&p=102016959
setprop persist.sys.overlay.devinputjack true

Не работают проводные наушники (R7A)
- MT Manager
- system/framework/framework-res.apk копируем на внутреннюю память
- нажимаем apk-Открыть-resources.arsc-Редактор arsc-android-bool-bool
- поиск: config_useDevInputEventForAudioJack
- меняем значение "false" на "true"
- компилируем без подписи apk, заменяем в системе, перезагружаемся
Эта проблема только на RR. И не только от Игоря Igor~S (от ExpressLuke тоже).
И не решается она по одной простой причине: из-за того что оверлеи устройств не работают на этой прошивке. Система их тупо не видит.
Фикс наушников изначально вшит во все прошивки в виде отдельного оверлея, но только на RR не применяются абсолютно никакие оверлеи устройств и отдельные оверлеи-фиксы (наушники, навбар, автояркость, вырез, потребление батареи итд) - они просто отображаются в проводниках как отключенные.
Всё это есть в фиксе основных проблем, собранное в одну кучу и отлично работает абсолютно на всех прошивках, кроме RR.

Фикс звука BT наушников на 64бит (R7A)
Фикс выхода звука на внешний динамик при подключенных BT наушников. Нет звука рингтона.
https://4pda.ru/forum/index.php?showtopic=964578&view=findpost&p=98984371

ПРОПАТЧИТЬ ОБРАЗ ВРУЧНУЮ boot.img смотреть в mR6.txt там подробнее
https://4pda.ru/forum/index.php?showtopic=907017&view=findpost&p=87853533
автоматический патчер ядра, не привязан к версии Magisk
** онлайн1
взять готовый на форуме в теме прошивок
** онлайн2
https://patcher.yaalex.tk
https://patcher.yaalex.xyz
- вкл Include Magisk - в предыдущих релизах его включали. Будет добавлен init magisk в образ boot.img или нет, если добавляете Include Magisk прошивать Magisk.zip не обязательно, достаточно в системе поставить менеджер и запустив его согласиться с доп. настройкой.
- сайт Патчит только x32, для x64 нет необходимости патчить, можно из менеджера.
- проверить работает ли ресурс, спросить у автора это ещё рабочий метод перед применением, были баги, проверить на работоспособность.
** оффлайн1
- вытащить boot.img из прошивки которая на теле (для рекавери, для фастбут), перенести на тело boot.img.
- установить MagiskManager (стабильный, canary не нужен).
- менеджер-установка-пропатчить образ-boot.img.
- /sdcard/download/magisk_patched_boot.img
cmd
fastboot flash boot magisk_patched_boot.img
fastboot flash vbmeta patched_vbmeta.img # это если надо
- переустановка себя со случайным именем
** оффлайн2
patcher_SAR_W7+_new.7z

Фикс Громкости динамика, наушников. Увеличить громкость динамика, наушников. Ещё громче.
Max_Volume_Speaker+Headset_Patch.zip
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=94061923
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=93394392
Редактируем файл из архива PlaybackVolAna_AudioParam.xml по инструкции как на картинке:
Перемещаем отредактированный файл обратно в архив. Прошиваем архив в TWRP.
Вручную, то же самое:
/vendor/etc/audio_param/PlaybackVolAna_AudioParam.xml
Заменяем отредактированный файл в TWRP (TWRP файловый менеджер, AROMA Filemanager, totalcmd\ADBPlugin.wfx)
<ParamUnit param_id="0">
  <Param name="headset_pga" value="-1" /> 
  <Param name="speaker_pga" value="10" /> <---------- =0 Громкость динамика (мультимедия, уведомления)
  <Param name="receiver_pga" value="-1" /> 
  <Param name="amp" value="0,0,0,0,0,0,0,0,0,0" /> 
  </ParamUnit>
- <ParamUnit param_id="1">
  <Param name="headset_pga" value="12" /> <---------- =0 не надо трогать может была старая версия ПАТЧА
  <Param name="speaker_pga" value="10" /> <---------- =0 не надо трогать может была старая версия ПАТЧА
  <Param name="receiver_pga" value="-1" /> 
  <Param name="amp" value="0,0,0,0,0,0,0,0,0,0" /> 
  </ParamUnit>
- <ParamUnit param_id="3">
  <Param name="headset_pga" value="9" /> <----------- =0 Громкость наушников (звонок, будильник, уведомления)
  <Param name="speaker_pga" value="-1" /> 
  <Param name="receiver_pga" value="-1" /> 
  <Param name="amp" value="0,0,0,0,0,0,0,0,0,0" /> 
  </ParamUnit>
- <ParamUnit param_id="2">
  <Param name="headset_pga" value="-1" /> 
  <Param name="speaker_pga" value="4" /> <----------- =0 не надо трогать может была старая версия ПАТЧА
  <Param name="receiver_pga" value="8" /> 
  <Param name="amp" value="0,0,0,0,0,0,0,0,0,0" /> 
  </ParamUnit>
- <ParamUnit param_id="4">
  <Param name="headset_pga" value="6" /> <----------- =0 не надо трогать может была старая версия ПАТЧА
  <Param name="speaker_pga" value="-1" /> 
  <Param name="receiver_pga" value="-1" /> 
  <Param name="amp" value="0,0,0,0,0,0,0,0,0,0" /> 
  </ParamUnit>
- <ParamUnit param_id="5">
  <Param name="headset_pga" value="4" /> <----------- =0 Громкость наушников (мультимедия)
  <Param name="speaker_pga" value="-1" /> 
  <Param name="receiver_pga" value="-1" /> 
  <Param name="amp" value="0,0,0,0,0,0,0,0,0,0" /> 
  </ParamUnit>
- <ParamUnit param_id="6">
  <Param name="headset_pga" value="-1" /> 
  <Param name="speaker_pga" value="11" /> <----------- =0 Громкость динамика (звонок, будильник)
  <Param name="receiver_pga" value="-1" /> 
  <Param name="amp" value="0,0,0,0,0,0,0,0,0,0" /> 
  </ParamUnit>
=0  - максимальная громкость max (как 160 в инженер. меню на стоке)
=18 - минимальная  громкость min (как 88  в инженер. меню на стоке)

Фикс работы сканера отпечатка пальца. Отключить работу сканера при ненужном нажатии
Fingerprint_Scanner_Patch.zip
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=93291766
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=93342399
Прошить прикреплённый архив в TWRP. Бекапит Generic.kl и удаляет проблемные строчки
В зависимости от ревизии на Redmi 6 (6A) бывает два датчика, поэтому патч убирает две строки. На других девайсах он может не работать. При необходимости легко правится.
Вручную:
SysLog - types enable: Kernel Log (dmesg), Main Log (logcat), Scrub potentially personal information from the logs - зажать сканер отпечатка пальцем и держать до конца - Сохранить в файл logcat.log
или
MatLog - Запись лога 5-10 сек - зажать сканер отпечатка - Сохранить в файл logcat.log
logcat.log - Ctrl+F: error, finger, keyCode, scanCode
в самом конце лога будут строки с ошибкой keyCode, scanCode=304
/system_root/system/usr/keylayout/Generic.kl
закомментить кнопки 172, 304, на Redmi 6 бывают нескольких ревизий/производителей сканеров
# key 172 HOME
# key 304 BUTTON_A
Заменяем отредактированный файл Generic.kl 644 в TWRP (TWRP файловый менеджер, AROMA Filemanager, totalcmd\ADBPlugin.wfx)

Фикс нажатия кнопок наушников
при нажатии кнопок в наушниках выполняются левые действия
Generic.kl
С помощью keynumbertracker (com.beansoft.KeynumberTracker) определяем номера кнопок: у меня это были 257 и 258, сначала попробовал закомментить эти номера, но тогда кнопки просто не работают. Потом просто заменил первоначальные команды которые там были на VOLUME_UP и VOLUME_DOWN и тогда кнопки заработали


Delete_Pass_After_Backup.zip
Перед созданием бекапа надо удалять пароли экрана блокировки, иначе после восстановления, система бекап не примет.
Если после установки пароля/графического ключа его не принимает ОС при разблокировке - заходим в twrp и удаляем.
/data/system/:
gatekeeper.password.key
gatekeeper.pattern.key
locksettings.db
locksettings.db-shm
locksettings.db-wal
gatekeeper.gesture.key
gatekeeper.pin.key
password.key
access_control.key
gesture.key ?

Faceunlock.zip
Для работы Разблокировка по лицу на LOS, должны стоять гаппсы, вроде micro
Защита и местоположение-Агенты доверия-вкл-Smart Lock-вкл

Permissiver_v4.zip - переводит в режим selinux permissive разрешающий режим
Если прошивки не загружаются дальше анимации загрузки, перезагружаемся с помощью кнопок в рекавери и устанавливаем этот фикс.
Этот фикс достаточно установить всего лишь один раз. Он патчит только boot и vendor. И будет работать после переустановки/замены GSI.
A9  Permissiver_v4.zip
A10 Permissiver_v4.zip. Permissiver_v5.zip (попробовать)

Отключить шифрование data:
1-й: A9 патч DIS_FORCE_ENCRYPT_PIE.zip
2-й: патч Disable_Dm-Verity_ForceEncrypt-master.zip


- Если на A9 MIUI 11 зашифрован раздел Data (TWRP просит пароль). На MIUI 10 этого не наблюдается
twrp wipe Format Data (yes) - прошить 1-й патч-дешифратор - перезагрузка
Если 1-й не помог, попробовать 2-й, 3-й
- прошиваете патч для отключения шифрования - Format Data (yes) - перезагрузка - ставите прошивку
3-й: ставлю лося, магиск 19.3, зашифровывает. В twrp есть свой патч, в вкладке дополнительно, попробуйте
A? Dm-Verity - отключить проверку конфигурации и шифрования во время загрузки
A9 DIS_FORCE_ENCRYPT_PIE.zip 69791933BC1B5AAAB8919B16BE735816 - отключить шифрование
A? Disable_Dm-Verity_ForceEncrypt-master.zip D9105ED03CBE30EA9843412ED5863594
A9 A10 Disable_Dm-Verity_ForceEncrypt_10.20.2019.zip 361D8877940E7DCD8C717F352959695C
A10 Disable_Dm-Verity_ForceEncrypt_12.27.2019.zip 84028E1AAE1A31B6DF761357AFAE049A

Crypto_Key_Location: /dev/block/platform/bootdevice/by-name/metadata
Шифрует раздел /data только MIUI 11, MIUI 10 - нет?. Если стоит MIUI 11 и нужен этот раздел - дешифруете. Кастомные прошивки не шифруют /data. Смысла нет расшифровывать то, что не зашифровано.
Далее. Даже если стояла MIUI 11 и раздел /data был зашифрован, и Вы ставите кастом, то форматирование раздела Format Data (yes) убирает шифрование раздела.
Вывод: на кастомах расшифровка не нужна. Если повторно шьёте кастом, расшифровка не нужна (в редких случаях нужна).

Некоторые тонкости работы с зашифрованным /data
https://4pda.ru/forum/index.php?showtopic=964578&view=findpost&p=92938104

зашифрованная /data убирается переходом на F2FS. что такое F2FS
https://4pda.ru/forum/index.php?showtopic=881423&view=findpost&p=93019725
https://ru.m.wikipedia.org/wiki/F2FS

Установить gapps Install gapps:
LOS + gapps = LOS wiki: Install LOS. resize system partition. Install gapps pico. Install Certification+Patch.zip (a64-ab). Install boot. Install Magisk.
сразу же: Install LOS. Install Certification+Patch.zip (Надо Сертификация и правильное отображение устройства. Надо, если телефон в маркете не определится, то попробовать). Install Permissiver.zip (Надо, если бутлуп на бутанимации после установки гаппсов, то попробовать). Install Gapps.
если не сразу же: Factory reset. Install Gapps: pico или nano - выше глюки.
гаппсы нужно ставить сразу, не загружаясь в систему: прошили ROM, прошили pico, и только после этого первая перезагрузка в систему
гаппсы ставятся только pico, чтобы поставить выше, допустим, nano нужно изменять размер ФС system:
Mount system. Wipe - advanced wipe - system - change - resize partition
Если не ставятся pico - делать resize partition
Если не делается resize partition - перезагрузить в twrp - повторить resize partition
Удалить gapps unInstall gapps:
ставить чистую прошивку без gapps
GAPPS-Killer, Anti-Gapps
+
что делает патч
ro.build.product
ro.product.
+
twrp ошибка 70: нехватка свободного места
Resize System - Исправить ФС. Ошибка перевода - Изменить ФС. Даёт возможность автоматически увеличить-уменьшить размер раздела.
Repair System - Восстановить ФС. Восстанавливает файловую систему до максимально возможного размера.
Change System - Изменить ФС. ext4, fat, exfat, f2fs
сначала GSI - Resize - можно ставить гаппсы
команда Resize=Repair+Resize автоматически Repair+Resize. Отдельно делать Repair - не надо.
при прошивке GSI меняется виртуально размер system в twrp
+
Восстановление размера раздела System (Resize System)
https://4pda.ru/forum/index.php?showtopic=964578&view=findpost&p=91146801
https://4pda.ru/forum/index.php?showtopic=976547&view=findpost&p=92325883
При установке прошивок GSI без gapps, с установкой отдельно gapps.
Наш раздел System имеет изменённый размер раздела, поэтому при попытке установить gapps, в TWRP появляется ошибка. Как исправить эту ошибку и установить Сервисы?
Wipe - advanced wipe - system - change - resize partition
twrp ошибка 1: Монтирование Data, Cache, System, повторить
+
ctsProfile: false Сертификация в Google Play Защите
Certification+Patch.zip (a64_ab)
Это для корректной работы определения устройства. Для Gapps. Надо шить по-любому и не только для Gapps, чтоб оверлей работал.
+
Фикс сертификации и проверки safetynet для GSI
На AOSP не работает из-за встроенного superuser
Обязательно установить Certification+Patch.zip перед первой загрузкой
1 способ. создать файл secure в system_root/system/phh/secure сделать format data (yes)
2 способ. через терминал
touch /system/phh/secure
chmod 644 /system/phh/secure
ls -l /system/phh/secure
+
сертифицировать устройство на GSI
https://4pda.ru/forum/index.php?showtopic=964578&view=findpost&p=88532309
Если Вы на стадии первичной настройки - завершить. Если мешают уведомления о необходимости сертификации - отключить.
нужно найти наш GSF Device-ID
- качаем Device ID.apk https://androidfilehost.com/?fid=673956719939830832
- копируем Google Service Framework (GSF)
- идем сюда https://www.google.com/android/uncertified/ , вставляем и жмём кнопку
+ 
Кто ставит с гаппсами или гаппсы поверху и не работают кнопки, др.:
Отладка по USB ВКЛ. через ADB на ПК.
adb shell settings put secure user_setup_complete 1
adb shell settings put global device_provisioned 1
через терминал на теле также
+
Не смотря на то что процессор нашего аппарата 64-х битный, ядро, binder и вендор - 32-х битные. Это означает, что полноценной поддержки 64 bit Xiaomi нам не завезла. В итоге мы имеем 32-х битную ОС, и все прошивки у нас - 32-х битные.
На наш аппарат ставятся приложения arm (arm7a). Другие не пойдут.
Так же и с Gapps - выбираем arm-9(10)-pico.

RIL фикс
не определяются sim. нет сети.
выключается тело сам по себе через 5сек, после фикса, перестал перезагружаться телефон.
Только RR Resurrection Remix не рекомендую. По крайней мере на вендоре от A9 - лагает.

На всех кастомных прошивках, баг, который заключается в том, что вас очень тихо слышит собеседник в сотовой связи
/system/build.prop
ro.qc.sdk.audio.fluencetype=none
persist.audio.fluence.voicecall=false

Запись разговора
Абонента не слышно. Его и не будет слышно. Запись с линии отключена на всех прошивках MIUI кроме Индии и Индонезии. Какая программа используется для записи значения не имеет.
Подтвержденной активации записи на Гугло-звонилке на нашем телефоне нет.
Вы думаете зачем люди шьют прошивки другого региона, ограничивая себя в использовании Гугл-Пэй? Если бы всё решалось только установкой тру-фона или любого другого приложения для записи - всё было бы проще.
Запись разговоров на любой прошивке кроме Индии и Индонезии (Китая, вдруг кто любит китайские прошивки) невозможна. При получении рут - можно попробовать её разблочить и писать сторонним софтом, но этим никто не занимался. Проще поставить Индию и при желании (и наличии рут) завести ГПэй, ну или пользоваться другими системами бесконтактной оплаты...
Либо рут и модуль магиска.

ФИКС ЯРКОСТИ ДЛЯ GSI
мерцание экрана при изменении яркости (A9, на A10 тоже работает)
cmd # командная строка. через ADB на ПК. Отладка по USB вкл.
adb shell su -c setprop persist.sys.qcom-brightness $(cat /sys/class/leds/lcd-backlight/max_brightness)
su # терминал на теле. рут
setprop persist.sys.qcom-brightness $(cat /sys/class/leds/lcd-backlight/max_brightness)
Результат можно увидеть сразу, без перезагрузки

ФИКС разъём под наушники
su # терминал рут
setprop persist.sys.overlay.devinputjack true
reboot

ФИКС АВТОЯРКОСТИ (есть ещё и такое)
















ИНСТРУКЦИЯ ПО УСТАНОВКЕ КАСТОМНОЙ ПРОШИВКИ GSI A9 pie (a64_ab)
MIUI A9 10.4.4.0 -> прошить twrp A9 3.3.1 -> Перезагрузиться из twrp в twrp -> прошить boot MIUI A9 + Magisk-v19.3 (если надо) -> Перезагрузиться из twrp в twrp -> twrp Format Data (yes) -> Перезагрузиться из twrp в twrp -> twrp wipe Dalvik Cache, Cache, System -> прошить GSI-прошивка + Magisk-v19.3 (если надо)
Установлено: сток стабилка MIUI 10.4.4.0 A9, TWRP A9, Boot A9, Magisk-v19.3 A9, 
Имеется: GSI-прошивка A9
- Ставим сток стабилка. Ставим twrp. Перезагрузиться из twrp в twrp
- Ставим boot 10.4.4.0 и сразу же Magisk-v19.3. Перезагрузиться из twrp в twrp
- Format Data (yes). Перезагрузиться из twrp в twrp
- Wipe: Dalvik Cache, Cache, System. Перезагрузиться из twrp в twrp
- Ставим GSI-прошивку и сразу же Magisk-v19.3. Перезагрузиться из twrp в twrp
- Для работы Gapps, установите патч сертификации. Либо установите NanoDroid-microG-...

Чтобы Обновить/Сменить/Откатить кастомную прошивку надо?
Обновить:
- обновление прошивки если один ромодел:
twrp wipe Dalvik Cache, Cache
Install прошивку одного ромодела
- обновление прошивки если разные ромоделы:
лучше полый wipe Dalvik Cache, Cache, Data, System
Install прошивку



Что такое dm-verity?
A4.4 и более поздние версии поддерживают режим "проверенной загрузки" для борьбы с руткитами. Реализован через функцию device-mapper-verity (dm-verity), которая проверяет конфигурацию устройства во время загрузки.
Если dm-verity активирован на вашем устройстве, тогда вы не можете вносить изменения в системный раздел. А если вы всё таки попытаетесь, тогда получите bootloop. В ramdisk есть проверка dm-verify. Если её убрать, вы сможете обойти dm-verity. Представленный ниже скрипт как раз делает эту работу по удалению проверки. Disable_Dm-Verity_ForceEncrypt.zip
+
У нас включен Secure Boot (Redmi 6/6A), проверяет на каждой стадии загрузки подпись и содержимое, и если подпись совпадает, то он идёт дальше по цепочке: BootRom -> Preloader -> LK (Little Kernel) -> Linux Kernel -> Android
BootRom - это первичный внутренний загрузчик. Процессор при подаче питания начинает выполнение BootRom. Его зашивают во время производства в SoC и его невозможно изменить. Bootrom инициализирует первичную периферию: NAND, UART итп. Далее Bootrom проверяет preloader, и если он повреждён/имеет неправильную подпись, то смартфон не сможет загрузиться дальше и переходит в режим Bootrom DL на какое-то время (обычно 60 секунд), в котором смартфон можно восстановить через SPFT.




Что такое forced encryption (принудительное шифрование)?
Принудительное шифрование на Андроид осуществляется через ядро, которое запускает процесс шифрования всего раздела data с данными при первой загрузке в систему.
Раздел data при первой загрузке в систему miui шифруется стандартным паролем default_password, в системе дешифруется стандартным паролем default_password.
Когда ставится новый пароль блокировки перешифровывается не весь раздел data, а только default_password.
Когда делается wipe data стираются данные data, default_password - остаётся.
Когда делается format data стираются данные и default_password. Когда происходит загрузка в систему miui - снова шифруется и используется стандартный пароль default_password.
Что бы отключить принудительное шифрование при первой загрузке, сначала нужно получить модифицированный boot.img у которого отключена проверка dm-verity.
Скрипт ниже позволяет отключить принудительное шифрование, но у вас остаётся возможно зашифровать устройство в ручном режиме. Скрипт устанавливается как любой другой апдейт для TWRP. Disable_Dm-Verity_ForceEncrypt.zip.

Калибровка АКБ после чистой установки прошивки LOS. Подождать один полный цикл батареи от 100% полный заряд до 0% полный разряд (не актуально на современных аккумуляторах (АКБ))
Современные АКБ: литий-полимерные (Li-Pol, Li-Poly), литий-ионные (Li-Ion) (то-же самое) не обладают "эффектом памяти", не требуют полной разрядки-зарядки 0-100%, для того чтобы они сохранили полную ёмкость. Фактически литий-ионные батареи работают лучше, если Вы не расходуете их полностью и они не начинают страдать из-за низкого напряжения. Поэтому лучше всего держать их всегда заряженными частично (скажем 20-95%).
Старые АКБ: никель-кадмиевые (NiCd), никель-металлгидридные (NiMH), тем более свинцово-кислотные (SLA) уже считаются устаревшими.
Заряжаю АКБ (Redmi 6) полностью от 0 до 100%: АКБ 3000mAh ~2.5 часа, если посмотреть состояние батареи через приложение AIDA64, после заряда 100%, АКБ продолжает заряжаться ещё ~0.5 часа.
Если АКБ не заряжается - нет подачи нужного тока, чтобы стартануть заряд АКБ (лягуха - напрямую к АКБ). Зарядка идёт не за счёт напряжения, а за счёт силы тока.

Можно оставлять напостоянку оригинальное ЗУ (зарядку) подключённое к розетке (на круглые сутки):
- ЗУ без нагрузки в виде тела д.б. холодное, это нормальное состояние ЗУ, если греется/свистит без нагрузки, это не нормальное состояние ЗУ
- ЗУ без нагрузки в холостом режиме потребляет минимальную мощность, как ТВ, холодильник, микроволновка др. бытовые приборы в спящем режиме
Можно оставлять напостоянку тело подключённое к ПК чз USB, к зарядке (на круглые сутки):
- во время перезагрузки ПК, в выключенном состоянии ПК, при полностью заряженном теле
- во время перезагрузки тела в разные режимы: рекавери, фастбут, обычная перезагрузка
Заряжать тело и играть в ресурсоёмкие игры не рекомендуется: при игре больший нагрев тела от нагрузки, а если ещё и онлайн (интернет) то и нагрев от модема, при этом нагрев от процесса зарядки.
+
Стандарт Qi - беспроводная зарядка. Стандарт Samsung быстрой проводной зарядки - Fast Charge. Стандарт Qualcomm - Quick Charge 2.0. Стандарт единый, тело type-c - Power Delivery.
Стандарты разные: Dash Charge, Warp Charge, SuperVOOC, SuperCharge, TurboPower, Pump Express др., просто есть аппараты, стандарты которых совместимы с QC или PD, а есть которые поддерживают только свой стандарт.
Стандарт ЗУ индикатор CC/CV регулируемый/контролируемый процесс зарядки: constant current/constant voltage, постоянный ток/постоянное напряжение
- постоянный ток: Нагрузка требует больший ток, чем установленный максимум. ЗУ ведёт себя как источник тока, меняет выходное напряжение, чтобы поддерживать постоянный максимальный ток.
- постоянное напряжение: Нагрузка требует меньше установленного максимума тока. ЗУ ведёт себя как зарядка с постоянным напряжением, для большинства типов нагрузки требуется постоянное напряжение.
Сначала АКБ заряжается постоянным током CC ограниченным АКБ, по достижении номинального напряжения определяемого типом АКБ (напр. 4.2V для Li-Po на банку) контролируется постоянное напряжение CV, а ток падает до 0 в момент полной зарядки.
+
Беспроводная быстрая зарядка.
За год просадка у тела с QC 65Вт 7%. Довольно долго будет жить АКБ.
Просадка прогрессирующая. Причём быстро. Если первый год 7-8%, то следующий уже 20-24%.
Хм, даже, допустим, через два года АКБ просядет на 20-25% я пойду в сервис, заменю АКБ (1500р) и буду дальше продолжать довольствоваться QC за пол часа. Раз в 2 года заменить АКБ, если она так просядет, проблема и затрата небольшая.
+
На странице службы поддержки Apple iPhone 12 появилась информация о максимальной поддерживаемой мощности питания аппарата при использовании оригинального аксессуара с магнитным креплением. По данным производителя, для модели с приставкой mini это значение снижено с 15 до 12 Вт. Для достижения этого показателя MagSafe необходимо подключать к блоку питания с портом USB Type-C с характеристиками выходного тока 9 В/2,03 А. Таким образом, для зарядки новинки подойдёт прошлогодний аксессуар на 18 Вт.
Производитель также отмечает, что указанная мощность зарядки может быть уменьшена, так как зависит от многих факторов, включая температуру и активность системы. С другой стороны, за счёт меньшей ёмкости аккумулятора iPhone 12 mini предположительно будет тратить на полную зарядку примерно то же время, что и старшие представители серии.

Sign Boot
В обычной версии TWRP - RM Forceencrypt. В специальной - Sign Boot
прошивка SuperSu в новых рекавери называется - Sign Boot
патчит стоковый загрузчик Boot чтобы TWRP не подменялось стоковым recovery, замена стокового recovery на кастомный twrp в системном разделе /recovery
Sign Boot необходимо выполнять после установки ROM и после установки любых модов. которые изменяют boot, например Magisk
- По окончании прошивки внизу у Вас будут три кнопки, но нас интересует в данный момент только "Sign Boot". Жмем на неё. Далее делаем свайп. И уже после этого жмем на "Перегрузится в ОС". Планшет уйдет на перезагрузку
- прошиваем систему. А затем в любом порядке: гаппсы, магиск. И не забываем после каждого (!) действия делать Sign Boot(!)
- По поводу Лося все понятно что обязательно после него Sign boot, правильно понимаю что после Gapps, Dolby и Vyper (а зачем он и обязателен ли?) обязательно также делать Sign boot или его достаточно сделать один раз после установки LOS?  - Sign boot обязателен после каждой установки.

Если рингтон, уведомления, будильник тихие. То замена файлов через тврп на стоковые. Эта прошивка видимо с патчем фикса звука собрана 
Смотреть какие файлы в этом патче, и заменять их со стоковой прошивки (miui). Или искать другую прошивку

Magisk
Magisk патчит всё сам
Magisk - прокачанный рут + модули
установка1 прошить патченый бут в twrp в fastboot, прошить Magisk.zip в twrp
установка2 прошить патченый бут в twrp в fastboot, установить MagiskManager.арк в системе, прошить Magisk.zip в twrp
установка модуля: бутлуп, баги, с помощью заранее поставленного модуля recovery mode MM можно отключить, удалить багованный модуль
Magisk Удаление:
Прошиваете в twrp или FlashFire деинсталлятор Magisk-uninstaller.zip. После прошивки деинсталлятора желательно сделать вайп кеша и далвик-кеша.
Если деинсталлятор не помог, восстанавливаете стоковый boot.
Magisk перед выполнением патчинга делает бекап в /data/stock_boot_<sha1>.img.gz, так что при возникновении проблем вы всегда можете вручную распаковать бекап, прошить boot в TWRP и так вернуть девайс к жизни.
Если после удаления Magisk девайс завис на заставке, поскольку в стоковом boot активировано dm-verity, восстановите стоковый раздел /system или прошейте альтернативный рут (напр. SuperSU).
Насколько я понял, это сам Magisk есть в вариациях, а менеджер один. TWRP уставил 19-ю версию, но я не посмотрел, какую из них. Сам менеджер скачал и поставил 19.3, а это вроде Stable. Если ещё слетит, буду пробовать Canary. Есть Стабилка, Бета и Canary.
+
Если собираетесь что-то дополнительно ставить, модули: Magisk (root), Gapps etc сразу! после установки прошивки, не перегружаемся в систему, а ставим выбранные модули

Почему слетает twrp?
- В пределах одной версии Андроида разметка никогда не меняется.
- Обновление билда прошивки не несёт в себе обновление раздела рекавери (это опять же в пределах одной версии ОС), т.е. в прошивочном архиве стокового рекавери нет и быть не может.
- Возвращает стоковое рекавери механизм в самой системе (install-recovery.sh и recovery-from-boot.p), т.е. если изменения в систему (раздел /system) не вносились, то при загрузке в неё получаем возврат. Обходят этот момент все двумя способами: первый - магиск, второй - разрешение на изменение системного раздела в twrp (twrp лезет в /system и переименовывает from-boot.p). Во втором случае к слову, получаем бутлуп, если не отключен механизм dm-verity.
Но повторюсь, если вы не осуществляли загрузку в свеже-прошитую систему, при выполнении выше озвученного, twrp никуда уже не денется.

Install boot
Установка модифицированного патченого ядра для root через Magisk в раздел boot. Сам Magisk не может пропатчить.
Ядро патченное вручную хитрым способом для A9. Без патча ядра Magisk A9 установлен, а РУТа нет. Без патча ядра сам Magisk A9 не сможет его пропатчить. Т.к. стоит SAR a64_ab, после перезагрузки система проверяет себя на ошибки и затирает все изменения. На A8 РУТ есть без дополнительных телодвижений, просто установкой Magisk через TWRP. Прошивать ядро для A9 нужно только если нужен РУТ. Иначе, так же, как и на A8 - патчим ядро в TWRP Sign Boot (чтоб не слетал TWRP). Нужен РУТ - шьём патченное ядро + Magisk.

Mount System. Mount Vendor - монтирование системных разделов для чего?: в данной версии twrp косяк, нужно делать вручную, в новых релизах исправлено - само монтирует и вручную ничего делать не надо. По-умолчанию в twrp уже смонтировано 2 раздела: Data, Cache

WIPE
Wipe удаление данных в разделе. Не делайте Wipe full internal storage.
Wipe-Format data (yes) - форматирование (полное) данных в разделе /data, с удалением самого раздела. В разделе Data хранится ключ расшифровки storage, если просто удалить Data без storage - при следующем заходе в рекавери storage будет зашифровано. Раздел шифруется и не виден в twrp - после полного удаления раздела - виден. После Format data (yes) перезагрузиться из twrp в twrp обязательно.
Wipe Dalvik Cache, Cache, Data, System - с тела удаляются все данные в разделах. После вайпа перезагрузиться из twrp в twrp не обязательно, но желательно и потом шьём.
никогда не вайпать разделы /nvram, /nvdata, /vendor, /persist, etc.







размер после прошивки Хранилище-размер системы:
HavocOS-v3.8=9.2GB R8A
работающие службы
система    0.9GB 
приложения 200-300MB 
свободно   0.8GB 
процессы в кеше:
используется 1.1-1.2GB 
кешированные 300MB 
свободно     0.5GB 
AEX A9=6.1GB R6
работающие службы, работающие приложения
система    0.9GB 
приложения 200-300MB 
свободно   1.8GB 
процессы в кеше, фоновые процессы:
используется 1.1-1.2GB 
кешированные 300MB 
свободно     1.5GB 
LOS16 A9=6GB  R6
работающие службы
система    0.9GB 
приложения 200-300MB 
свободно   1.8GB 
процессы в кеше:
используется 1.1-1.2GB 
кешированные 300MB 
свободно     1.5GB 
LOS17.1 A9=6.4GB  R6
работающие службы
система    1.2GB 0.9 1   
приложения 217MB 213 200 
свободно   1.6GB 1.8 1.7 
процессы в кеше:
используется 1.4GB 1.2 
кешированные 312MB 260 
свободно     1.2GB 1.5 

откуда такие объёмы: 9Gb, 6Gb
я хочу видеть там соответственно ~1-2Gb (ну пусть 3Gb):
там куча дублей повторов бекапов полностью разделов (там есть дубли даже в трёх экземплярах)
там не 1 раздел с системой 1Gb, а 50+ разных раздробленных системных разделов разного размера, они м.б. даже пусты (зарезервированые разделы) но занимают место.

Отладка по USB ВКЛ
MTP это отдельный режим. fastboot это отдельный режим. reocvery это отдельный режим. Отладка по USB ВКЛ это отдельный режим. ADB, влияет только на ADB (Android Debug Bridge), девайс находится в своём обычном включённом состоянии.

Wi-Fi радиоканал радиосвязь
Wi-Fi Free. Открытая сеть Wi-Fi
Стандартом Wi-Fi не предусмотрено шифрование передаваемых данных в открытых сетях. Это значит, что все данные, которые передаются по открытому беспроводному соединению, м.б. прослушаны: пара логин-пароль, номера банковских счётов, пластиковых карт, конфиденциальная переписка.
Служебный трафик, высокие служебные "накладные расходы", зависит от наличия между устройствами физических преград (мебель, стены), наличия помех от других беспроводных устройств или электронной аппаратуры, расположения устройств относительно друг друга.

Wi-Fi monitor mode
В режиме мониторинга Wi-Fi модуль принимает все пакеты, а не только предназначенные именно этому Wi-Fi модулю. Для поддержки мониторинга и инъекции потребуется установить особый драйвер Wi-Fi https://bcmon.blogspot.com/
Требования:
- Одно из следующих устройств: Galaxy S1, Galaxy S2, Nexus One, Nexus 7. Потестировать драйвер на своём устройстве
- CyanogenMod 7+ (а следовательно права root).
- Драйвер и приложение для его установки bcmon.
Инструкция:
- Установить приложение и запустить его
- включение режима мониторинга
- Нажать кнопку "перейти в режим мониторинга"
- меню приложения bcmon

Redmi 6 коды USSD code
*#06# - IMEI1+IMEI2 - на глобал, MEID+IMEI1+IMEI2 - на китай. На китае показывается IMEI1+IMEI2 также как на глобал.
IMEI - international mobile equipment identity - международный идентификатор уникальный номер мобильного оборудования, для идентификации телефонов GSM, WCDMA и IDEN.
MEID - mobile equipment identifier - идентификатор номер радио модуля, который работает в сети CDMA.
*#*#86583#*#*  - активация VoLTE. Появится ползунок в настройках SIM. На кастомах не работает.
*#*#869434#*#* - активация VoWi-fi. Появится ползунок в настройках SIM. На кастомах не работает.
*#*#4636#*#* - активация проверок: статус IMS: VoLTE, VoWiFi, ViLTE, выбор сети, SMS Центр Kyivstar +380672021111, 
*#*#3646633#*#* - Инженерное меню Engineer Mode MTK. На кастомах не работает.

Инженерное меню
Подпрограммой меню поддерживается: изменение уровня громкости динамиков и чувствительности микрофона, настроек встроенной камеры, параметров аудио, модулей GPS, Bluetooth и Wi-Fi, отключение неиспользуемых частот для экономии заряда батареи. Также вы можете протестировать ключевые компоненты вашего устройства и внешнюю карту памяти, настроить операции ввода-вывода, определить точную температуру процессора и аккумулятора, уровень вредного электромагнитного излучения.

Инженерное меню
Изменения параметров громкости динамика и наушников:
- Зайти в настройки телефона, нажать "О телефоне", понажимать много раз на надпись Версия MIUI. Появится уведомление о том, что вы стали разработчиком.
- В звонилке набираем: *#*#3646633#*#* - зайти в инженерное меню.
- Листаем влево, пока не появится Hardware Testing-Audio-Volume-Audio Playback. Попадаем в настройки звука.
- Нажимаем на второй строке сверху и меняем её на Music.
- Выбираем в третьей строке:
- 3/4 pole headset - для изменения громкости наушников.
- Speaker - для динамика.
- Включаем музыку (или она уже играет в наушниках или динамике) и меняем цифры в четвёртой строке Headset PGA, или Speaker PGA - зависит от того, в чём громкость меняем.
Максимальная громкость 160. Настроили громкость под себя и в самом низу подтверждаем нажатием на кнопку SET. Прибавляйте постепенно.

VoLTE, Voice over LTE, голос через LTE
QCI-1 - голосовой канал, имеет самый высокий приоритет, перед передачей остальных данных.
Технология, позволяет передавать голосовой трафик высокого качества через LTE (4G) сеть.
Кодек для передачи голоса AMR-WB Adaptive_Multi-Rate_Wideband (HD-Voice), но может использоваться AMR-NB Adaptive_Multi-Rate_audio_codec.
Кодек EVS Enhanced_Voice_Services в нашей сети пока не поддерживается.

VoWiFi, Voice over Wi-Fi, Wi-Fi Calling, WFC, голосовые вызовы через Wi-Fi
VoWiFi позволяет виртуально находиться в сети своего оператора даже если вы вне зоны действия своей сети: за границей, далеко от базовой вышки. Звонить из-за границы без платы за роуминг используя Wi-Fi соединение и платить по своему базовому тарифу. Звонить с любой точки мира почти бесплатно, главное чтобы у вас был Wi-Fi

ViLTE Video over LTE
три bearer-а (прерывания) для нужд IMS (QCI-1 - голосовой канал, QCI-2 - видео канал, QCI-5 - сигнализация)

удалил Audio FX и установил Dolby Atmos
- twrp монтируем /system
- удалить /system/priv-app/audiofx
- Magisk-Модули-Нажать"+"-Выбрать Dolby Atmos-Перезагрузка

Смски не приходят от вотсаппа и Сбера и пр.?
установить GAPPS, уведомления не работают без сервисов гугла, лучше всего BitGAPPS, в них только самое основное.




















































BACKUP RESTORE Бекап Восстановление
> Redmi 6 cereus дерево устройства Android 9
> MTK      Redmi 6  бекап EFS IMEI: nvram + nvdata + nvcfg + persist
> MTK      Redmi 6A бекап EFS IMEI: nvram + nvdata + nvcfg + persist
> Qualcomm Redmi 8A бекап EFS IMEI: modem, modemst1, modemst2 + persist + fsc + fsg

su find /dev/block/         все блоки лежат тут               | 
su find /dev/block/by-name/ всего 41 блок                     | R8A 64 блок
su find /dev/block/platform/bootdevice/by-name/ всего 43 блок | R8A 

так как размечено в scatter.txt вот так и загружается по-очереди на теле
preloader 0x0
pgpt 0x0
zram0
mmcblk0p1-mmcblk0p41
sgpt 0xFFFF0000

mmcblk0 -> /dev/block/mmcblk0            это вся внутренняя память, если бекапить на внутреннюю память тела, не хватит места
preloader_a -> /dev/block/mmcblk0boot0   0x0
preloader_b -> /dev/block/mmcblk0boot1   0x0
mmcblk0rpmb -> /dev/block/mmcblk0rpmb    ?
boot -> /dev/block/mmcblk0p28
boot_para -> /dev/block/mmcblk0p1
cache -> /dev/block/mmcblk0p38
cust -> /dev/block/mmcblk0p31
devinfo -> /dev/block/mmcblk0p37
efuse -> /dev/block/mmcblk0p15
expdb -> /dev/block/mmcblk0p4 
flashinfo -> /dev/block/mmcblk0p41
frp -> /dev/block/mmcblk0p5        (FRP)
gz1 -> /dev/block/mmcblk0p22
gz2 -> /dev/block/mmcblk0p23
lk -> /dev/block/mmcblk0p26
lk2 -> /dev/block/mmcblk0p27
logo -> /dev/block/mmcblk0p29
md1img -> /dev/block/mmcblk0p16
metadata -> /dev/block/mmcblk0p8
nvcfg -> /dev/block/mmcblk0p6
nvdata -> /dev/block/mmcblk0p7
nvram -> /dev/block/mmcblk0p24
odmdtbo -> /dev/block/mmcblk0p30
otp -> /dev/block/mmcblk0p40
pad -> /dev/block/mmcblk0p34
para -> /dev/block/mmcblk0p3
persist -> /dev/block/mmcblk0p12
proinfo -> /dev/block/mmcblk0p14
protect1 -> /dev/block/mmcblk0p9   (protect_f)
protect2 -> /dev/block/mmcblk0p10  (protect_s)
recovery -> /dev/block/mmcblk0p2
scp1 -> /dev/block/mmcblk0p18
scp2 -> /dev/block/mmcblk0p19
sec1 -> /dev/block/mmcblk0p13
seccfg -> /dev/block/mmcblk0p11
spmfw -> /dev/block/mmcblk0p17
sspm_1 -> /dev/block/mmcblk0p20
sspm_2 -> /dev/block/mmcblk0p21
system -> /dev/block/mmcblk0p36   (/system_root/system)
tee1 -> /dev/block/mmcblk0p32     (trustzone1)
tee2 -> /dev/block/mmcblk0p33     (trustzone2)
userdata -> /dev/block/mmcblk0p39 (userdata = это вся Data = /data + /sdcard)
vbmeta -> /dev/block/mmcblk0p25
vendor -> /dev/block/mmcblk0p35



** fw_cereus_V10.3.3.0.OCGMIXM.zip
lk.img logo.bin md1img.img odmdtbo.img   preloader.img  scp.img spmfw.img sspm.img tee.img vbmeta.img
** fw_vendor_cereus_V10.3.3.0.OCGMIXM.zip
lk.img logo.bin md1img.img odmdtbo.img\* preloader.img3 scp.img spmfw.img sspm.img tee.img vbmeta.img vendor.br
** miui_cereus_V10.3.3.0.OCGMIXM.zip
lk.img logo.bin md1img.img odmdtbo.img\* preloader.img3 scp.img spmfw.img sspm.img tee.img vbmeta.img vendor.br  system.br  boot.img
** images_cereus_V11.0.4.0.PCGMIXM.tgz
lk.img logo.bin md1img.img odmdtbo.img\* preloader.bin  scp.img spmfw.img sspm.img tee.img vbmeta.img vendor.img system.img boot.img
cache.img cust.img dtbo.img efuse.img recovery.img userdata.img

\* незначительное несовпадение
preloader.img3 = preloader.img, preloader_emmc.img, preloader_ufs.img
lk.img = lk. sspm.img = sspm_1. tee.img = tee1. scp.img = scp1.



















  





Дамп блоков
Пример скрипта block.sh
> положить block.sh в /system/bin/block.sh
> выставить права рут владелец:Группа 0777 root:shell
> терминал
> su
> block
> разделы будут лежать в корне хранилища
> перенести на ПК
> удалить block.sh

Пример скрипта block.sh
#!/system/bin/sh
dd if=/dev/block/mmcblk0p32 of=/sdcard/tee1 # или так
dd if=/dev/block/by-name/tee1 of=/sdcard/tee1 # или так кому как удобнее

Пример скрипта Backup.bat
@echo  Backup nvram + nvdata + nvcfg + persist - Cereus
@pause
@echo --- Waiting for device in recovery ---
adb wait-for-device
@echo --- Backup ---
adb shell su -c "dd if=/dev/block/mmcblk0p24 of=/sdcard/nvram.img bs=4096"
adb pull /sdcard/nvram.img nvram.img
adb shell su -c "dd if=/dev/block/mmcblk0p7 of=/sdcard/nvdata.img bs=4096"
adb pull /sdcard/nvdata.img nvdata.img
adb shell su -c "dd if=/dev/block/mmcblk0p6 of=/sdcard/nvcfg.img bs=4096"
adb pull /sdcard/nvcfg.img nvcfg.img
adb shell su -c "dd if=/dev/block/mmcblk0p12 of=/sdcard/persist.img bs=4096"
adb pull /sdcard/persist.img persist.img
@pause

su -c - рут
dd - побайтовое копирование
bs=4096 - размер буфера 4Kb. Размер куска данных в байтах, записываемых/читаемых за раз
count - число кусков
conv=noerror - игнорировать ошибки чтения



Пример скрипта Restore.bat
@echo  Restore nvram + nvdata + nvcfg + persist - Cereus
@pause
@echo --- Waiting for device in recovery ---
adb wait-for-device
@echo --- Restore ---
adb push nvram.img /sdcard/nvram.img
adb shell su -c "dd if=/sdcard/nvram.img of=/dev/block/mmcblk0p24 bs=4096"
adb push nvdata.img /sdcard/nvdata.img
adb shell su -c "dd if=/sdcard/nvdata.img of=/dev/block/mmcblk0p7 bs=4096"
adb push nvcfg.img /sdcard/nvcfg.img
adb shell su -c "dd if=/sdcard/nvcfg.img of=/dev/block/mmcblk0p6 bs=4096"
adb push persist.img /sdcard/persist.img
adb shell su -c "dd if=/sdcard/persist.img of=/dev/block/mmcblk0p12 bs=4096"
@pause

Какие есть блоки
adb shell cat /proc/partitions

Удалить графический ключ (блокировки)
adb shell rm /data/system/gesture.key

Остановка службы ADB
@echo off
taskkill /F /IM adb.exe

проверить
adb nodaemon server # 1 окно консоли
adb push NvRam.img /sdcard/NvRam.img # во 2 окне консоли уже вводим команды



























Отзыв на прошивку:
==== AEX-v6.7 A9 feb 20200212 | 20200509 | 
AospExtended-v6.7-cereus-20200212-2020-UNOFFICIAL.zip
идеальная кастомная прошивка
AEX : OpenGL ES 3.2 build 1.10@5130912
busybox 1.22.1 (2019-06-02)
web : WebView 79.0.3945.136 | 81.0.4044.17
web : mark.via.gp 3.9.2 Via браузер
cam : com.android.camera2 2.0.002 - работает, не очень
clock : com.android.deskclock 9
rec : org.lineage.recorder 9 - запись экрана, запись звука
pic : com.android.gallery3d 1.1.40030
launcher : Launcher3QuickStep - нормальный лаунчер, похожий на Nova
sim отваливается: установлен отсутствующий TeleService.apk который не работает, поставить рабочий из патча AospExtended-v6.7-fix_ril.zip
баг Громкость рингтона во время входящего звонка, средняя. В кармане еле слышно
не работает Настройки-Расширения-Экран блокировки-Интерфейс экрана блокировки
оригинальная анимация загрузки AEX, заменена
баг при фоновом воспроизведении в MX Player при нажатии на кнопку Гр+, Гр- изменяется гр. рингтона, а не гр. медиа
есть Терминал (в файлах) - само приложение не появляется, wipe dalvik, помогло
есть MusicFX  (в файлах) - само приложение не появляется, wipe dalvik, помогло
нет первичной настройки
включён режим разработчика по умолчанию
включена отладка по USB по умолчанию
не надо подтверждать отладку через ПК, в logcat сыпет ошибки о не определённом состоянии usb, самому установить adb_keys. Не помогло.
чёта рут не слетает
com.accents.orange - глючит?
com.accents.darkorange - не глючит
==== LineageOS 17.1 A10 by SamarV-121
багованая кастомная прошивка
LOS : webview 81.0.4044.138
LOS : busybox нет?
LOS : OpenGL ES 3.2 build 1.10@5130912
launcher : com.android.launcher3 10
cam : org.lineageos.snap 2.02.037 (30-30) - не очень, но работает
terminal : com.android.terminal 10 - перестал запускаться, пропала иконка
обновлялся с кастома на кастом: LOS16 A9 by SamarV-121 -> LOS17.1 A10 by SamarV-121, /data расшифрована - при загрузке бесконечная анимация загрузки LOS, помог 1-й патч DIS_FORCE_ENCRYPT_PIE.zip
в шторке была кнопка sysUI делала какой-то дамп - потом пропала
нет Инструменты разработки dev tools
нет Защита и местоположение-Trust-Privacy Guard PG (Защита конфиденциальности)
нет VoLTE
встроенный рут для отладки
отладка перестаёт работать после вкл-выкл, подтверждение не появляется на теле, отозвать отладку нельзя, это произошло после установи рута Magisk-v20.4
в офлайн зарядка не работает
в офлайн Будильник не звонит
загружается быстрее LOS16, выключается быстро
несущественно сканер отпечатков глючит
несущественно недоперевод некоторых настроек меню
несущественно дребежжит проигрываемое видео в MX Player первые 1-2 сек.
несущественно глючит Часы
Часы нельзя скрыть в статус баре
несущественно глючит виджет Часы - вторая минутная цифра пропадает, после перезагрузки - появляется (несколько раз было, через некоторое время баг не воспроизводится)
несущественно глючит Рабочий стол
явного мерцания на белом фоне при мин. яркости не видно, вроде
уродское исполнение некоторых подменю в сравнении с LOS16 - по стандарту A10
EdXposedManager + Riru Core 19+ (v21.3) + EdXposed = автоматически поставятся два первых патча в LP в меню "Патчи Андроида" (для A9, A10)
https://samarv-121.github.io/lineageos-17.1-cactus-cereus/
https://github.com/SamarV-121/releases/releases/download/lineage-17.1-20200703-UNOFFICIAL-cereus-1407/lineage-17.1-20200703-UNOFFICIAL-cereus.zip
==== LineageOS 16.0 A9 by SamarV-121, MegaFon929 обновление сертификатов безопасности 09.02.2020
lineage-16.0-20200210-UNOFFICIAL-cereus.zip 401MB MD5: 7c02ae91d229a43321ead2e879f42316
https://4pda.ru/forum/index.php?showtopic=950105&view=findpost&p=93804891
https://androidfilehost.com/?fid=12420606652095401481
LineageOS 16.0 A9 by SamarV-121
идеальная кастомная прошивка
launcher : com.android.launcher3 9
cam : com.android.camera2 - не очень, но работает
в офлайн Часы не звонят
web : 78.0.3904.96
LOS : OpenGL ES 3.2 build 1.10@5130912
busybox : busybox v1.22.1 2019-06-02 multi-call binary
LOS : init.d
LOS : busybox 1.30.1 - через Magisk, надо ли устанавливать?
lineage-16.0-20191126-UNOFFICIAL-cereus.zip 420MB MD5: 613AF9F53CE629DDABF445F38BD1B536
https://samarv-121.github.io/lineageos-16.0-cactus-cereus/
https://github.com/SamarV-121/releases/tags
https://github.com/xiaomi-mt6765/releases/releases/download/lineage-16.0-20191126-UNOFFICIAL-cereus/lineage-16.0-20191126-UNOFFICIAL-cereus.zip










































































































































































































































































































































































